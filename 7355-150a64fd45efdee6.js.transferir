try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="2a5991b5-956d-41bc-9c48-999f96b108b1",e._sentryDebugIdIdentifier="sentry-dbid-2a5991b5-956d-41bc-9c48-999f96b108b1")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7355],{4349:(e,t,s)=>{"use strict";s.d(t,{Bj:()=>r,C9:()=>o,Fj:()=>i,t:()=>n});var a=s(69147);let l="lovable_hash_prompt_";function r(e){try{let t=localStorage.getItem(l+e);if(!t)return null;let s=JSON.parse(t);if(Date.now()-s.timestamp>36e5)return n(e),null;return s}catch(t){return a.logging.error("Failed to retrieve or parse hash prompt for key: ".concat(e),{error:t}),n(e),null}}function n(e){try{localStorage.removeItem(l+e)}catch(e){}}function i(){try{let e=Object.keys(localStorage),t=Date.now();e.forEach(e=>{if(e.startsWith(l))try{let s=localStorage.getItem(e);if(s){let a=JSON.parse(s);t-a.timestamp>36e5&&localStorage.removeItem(e)}}catch(t){localStorage.removeItem(e)}})}catch(e){}}function o(){let e=window.location.hash.substring(1);if(!e)return null;try{let t=new URLSearchParams(e),s=t.get("prompt");if(s){if(s.length>5e4)return null;let e=t.getAll("images"),a=function(e,t){if(e.length>5e4)throw Error("Prompt exceeds maximum length of ".concat(5e4," characters"));let s=crypto.randomUUID(),a={prompt:e,images:t,timestamp:Date.now()};try{return localStorage.setItem(l+s,JSON.stringify(a)),s}catch(e){throw Error("Failed to store prompt data")}}(s,e.length>0?e:void 0);return window.history.replaceState({},"",window.location.pathname+window.location.search),a}}catch(e){a.logging.error("Error processing hash fragment on load",{error:e})}return null}},5943:(e,t,s)=>{"use strict";s.d(t,{G7:()=>o,L$:()=>u,h_:()=>m,oI:()=>d,uB:()=>i,xL:()=>c});var a=s(99289),l=s(37876);s(11405),s(6072);var r=s(26551),n=s(97757);function i(e){let{className:t,...s}=e;return(0,a.jsx)(l.uB,{"data-slot":"command",className:(0,r.cn)("flex h-full w-full flex-col overflow-hidden rounded-xl bg-popover text-popover-foreground",t),...s})}function o(e){let{className:t,...s}=e;return(0,a.jsxs)("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[(0,a.jsx)(n.A,{name:"search",className:"size-4 shrink-0 opacity-50"}),(0,a.jsx)(l.uB.Input,{"data-slot":"command-input",className:(0,r.cn)("flex h-10 w-full rounded-xl bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50",t),...s})]})}function d(e){let{className:t,...s}=e;return(0,a.jsx)(l.uB.List,{"data-slot":"command-list",className:(0,r.cn)("max-h-[300px] scroll-py-1 overflow-y-auto overflow-x-hidden",t),...s})}function c(e){let{...t}=e;return(0,a.jsx)(l.uB.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...t})}function u(e){let{className:t,...s}=e;return(0,a.jsx)(l.uB.Group,{"data-slot":"command-group",className:(0,r.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...s})}function m(e){let{className:t,...s}=e;return(0,a.jsx)(l.uB.Item,{"data-slot":"command-item",className:(0,r.cn)("relative flex cursor-default select-none items-center gap-2 rounded-lg px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg:not([class*='size-'])]:size-4 [&_svg:not([class*='text-'])]:text-muted-foreground [&_svg]:pointer-events-none [&_svg]:shrink-0",t),...s})}},14635:(e,t,s)=>{"use strict";s.d(t,{S:()=>o});var a=s(99289),l=s(3204),r=s(11405),n=s(26551),i=s(97757);let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.bL,{ref:t,className:(0,n.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),...r,children:(0,a.jsx)(l.C1,{className:(0,n.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(i.A,{name:"check",className:"h-4 w-4"})})})});o.displayName=l.bL.displayName},16015:(e,t,s)=>{"use strict";s.d(t,{U:()=>n});var a=s(99289),l=s(97115),r=s(26551);let n=e=>{let{plan:t,className:s}=e,n=(0,l._R)(t);return(0,a.jsx)("span",{className:(0,r.cn)("rounded-full px-2 py-px text-[10px] font-medium uppercase transition-colors duration-150 ease-in-out","free"===t?"bg-muted text-muted-foreground":"bg-brand-twilight-primary text-brand-twilight-primary-foreground",s),children:n})}},17169:(e,t,s)=>{"use strict";var a;s.d(t,{s:()=>a}),function(e){var t;(t=e.status||(e.status={})).CONNECTED="connected",t.FAILED="failed",t.NEEDS_REFRESH="needs_refresh"}(a||(a={}))},23660:(e,t,s)=>{"use strict";s.d(t,{g:()=>x});var a=s(99289),l=s(19550),r=s.n(l),n=s(11405),i=s(5943),o=s(9562),d=s(5531),c=s(97757),u=s(17169),m=s(62593),p=s(77987);let x=e=>{var t;let{organization:s,reconnectOrg:l,isWorkspaceAdmin:n}=e;return s.status===u.s.status.NEEDS_REFRESH?(0,a.jsx)(o.Q,{showTooltip:!0,tooltipContent:n?"Click to reconnect to Supabase":"Ask an admin of your workspace to reconnect to Supabase",children:(0,a.jsxs)(d._2,{onClick:()=>l({supabaseOrgId:s.id}),className:"flex items-center gap-2 text-destructive-primary",disabled:!n,children:[(0,a.jsx)(c.A,{name:"warning_fill",size:"small",className:"text-destructive-primary"}),(0,a.jsx)("span",{className:"truncate",children:s.name})]})}):(0,a.jsxs)(d.lv,{children:[(0,a.jsx)(d.nV,{className:"text-sm",children:(0,a.jsx)("span",{className:"truncate",children:s.name})}),(0,a.jsxs)(d.M5,{className:"w-56 p-0",children:[(0,a.jsxs)(i.uB,{children:[(0,a.jsx)(i.G7,{placeholder:"Search projects...",autoFocus:!0}),(0,a.jsxs)(i.oI,{className:"max-h-60",children:[(0,a.jsx)(i.xL,{children:"No projects found."}),(0,a.jsx)(i.L$,{children:null==(t=s.projects)?void 0:t.map(e=>(0,a.jsx)(h,{project:e},e.id))})]})]}),(0,a.jsx)(d.mB,{className:"mt-0"}),(0,a.jsx)("div",{className:"px-1 pb-1",children:(0,a.jsx)(d._2,{asChild:!0,children:(0,a.jsxs)(r(),{href:"https://supabase.com/dashboard/new/".concat(s.id),target:"_blank",rel:"noopener noreferrer",className:"flex w-full items-center gap-2",children:[(0,a.jsx)(c.A,{name:"add",size:"small"}),"Create project",(0,a.jsx)(c.A,{name:"arrow_outward",size:"small",className:"ml-auto"})]})})})]})]},s.id)},h=e=>{let{project:t}=e,s=(0,p.L)(t),{setSelectedProject:l,setOpen:r}=(0,m.C)(),d=(0,n.useCallback)(()=>{l(t),r(!1)},[t,l,r]);return(0,a.jsx)(o.Q,{showTooltip:!s,side:"left",tooltipContent:"Check project status in Supabase.",children:(0,a.jsxs)(i.h_,{onSelect:d,disabled:!s,className:"group flex w-full items-center",value:t.name,children:[(0,a.jsx)("span",{className:"truncate",children:t.name}),!s&&(0,a.jsx)(c.A,{name:"warning_fill",size:"small",className:"ml-auto text-destructive-primary"})]},t.id)})}},31196:(e,t,s)=>{"use strict";s.d(t,{AF:()=>d,UO:()=>m,xO:()=>c,yk:()=>u});var a=s(11405),l=s(98213),r=s(99490),n=s(66608),i=s(69147),o=s(40074);let d="supabaseOAuthNonce",c="supabaseOAuthCodeVerifier",u=r.Ik({workspaceId:r.Yj(),userId:r.Yj().optional(),nonce:r.Yj()}),m=e=>{let[t,s]=(0,a.useState)(!1),{userData:r}=(0,n.ur)();return{handleConnect:(0,a.useCallback)(async t=>{s(!0);try{let a=window.location.origin,n=crypto.randomUUID();try{localStorage.setItem(d,n)}catch(e){i.logging.error("Error storing nonce in localStorage:",{error:e}),l.oR.error("Failed to initiate Supabase OAuth flow",{description:"Try clearing browser local storage and try again."}),s(!1);return}let u=btoa(JSON.stringify({workspaceId:e,userId:null==r?void 0:r.id,nonce:n})),m=o.env.NEXT_PUBLIC_SUPABASE_OAUTH_CLIENT_ID||"dbd565fc-4637-4cb6-ab68-0af4b5708417",x=function(){let e=new Uint8Array(32);return crypto.getRandomValues(e),btoa(String.fromCharCode.apply(null,Array.from(e))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}(),h=await p(x);localStorage.setItem(c,x);let g=new URL("https://api.supabase.com/v1/oauth/authorize");g.searchParams.set("response_type","code"),g.searchParams.set("client_id",m),g.searchParams.set("redirect_uri","".concat(a,"/supabase/callback")),g.searchParams.set("state",u),g.searchParams.set("code_challenge",h),g.searchParams.set("code_challenge_method","S256"),(null==t?void 0:t.supabaseOrgId)&&g.searchParams.set("organization_slug",encodeURIComponent(t.supabaseOrgId));let f=window.open(g.toString(),"_blank","width=600,height=700,left=100,top=100");f?f.focus():window.location.href=g.toString()}catch(e){i.logging.error("Error initiating Supabase connection:",{error:e}),l.oR.error("Connection Error",{description:"An error occurred while connecting to Supabase. Please try again."})}finally{s(!1)}},[e,null==r?void 0:r.id]),isConnecting:t}};async function p(e){let t=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",t);return btoa(String.fromCharCode.apply(null,Array.from(new Uint8Array(s)))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}},39226:(e,t,s)=>{"use strict";s.d(t,{z:()=>n});var a=s(99289),l=s(4099),r=s(5790);let n=e=>{var t;let{isInteractive:s=!1,className:n,workspace:i,...o}=e,d=(0,r.Q)(null==i?void 0:i.id),c=null==i?void 0:i.name,u=null!=(t=null==i?void 0:i.image_url)?t:void 0;return(0,a.jsx)(l._,{name:c,isInteractive:s,photoSrc:u,userColor:d,className:n,isWorkspace:!0,...o})}},47355:(e,t,s)=>{"use strict";s.d(t,{CreateForm:()=>e2});var a=s(99289),l=s(51252),r=s(22291),n=s(81797),i=s(11405),o=s(98213),d=s(9627),c=s(62276),u=s(37079),m=s(90820),p=s(44593),x=s(4991),h=s(48591),g=s(31167),f=s(74975),j=s(43328),b=s(77233),v=s(23594),N=s(40177),w=s(76974),y=s(78769),_=s(23719),C=s(50610),A=s(69201),S=s(12180),k=s(58032),I=s(76704),E=s(66608),T=s(67017),D=s(97115),R=s(26551),O=s(49944),P=s(9562),L=s(97757),z=s(60527),F=s(99017),M=s(95358),U=s(9070),W=s(82162),V=s(33979),B=s(31126);let G=e=>{let{visibility:t,setVisibility:s,onClick:l,disabled:r,className:n,customPrivateDescription:i,customPublicDescription:o,redirectToSubscription:d=!1,workspacePlan:c,workspace:u}=e,m=(0,I.c3)("VisibilitySelection"),p=(0,E.OM)({workspacePlan:c}),x=(0,E.W6)({workspacePlan:c}),h=(0,M.BK)(),{openSettings:g}=(0,U.t)();return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(V.z,{className:n,disabled:r,defaultValue:"public",value:t,onValueChange:e=>{s(e)},children:[(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(V.C,{value:"public",id:"public",disabled:(null==u?void 0:u.disable_publish)===!0,onClick:()=>{(null==u?void 0:u.disable_publish)||null==l||l()}}),(0,a.jsxs)(W.Label,{htmlFor:"public",className:(0,R.cn)("flex w-full justify-between",(null==u?void 0:u.disable_publish)&&"opacity-50"),children:[(0,a.jsxs)("div",{className:"flex w-full cursor-pointer flex-col gap-0.5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm font-medium leading-tight",children:[m("public.title"),(null==u?void 0:u.disable_publish)&&(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",m("public.publishingDisabled"),")"]})]}),o||(0,a.jsx)("span",{className:"font-normal leading-normal text-muted-foreground",children:m((null==u?void 0:u.disable_publish)?"public.publishingDisabledDescription":"public.description")})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)(F.m_,{delayDuration:300,children:[(0,a.jsx)(F.k$,{children:(0,a.jsx)(L.A,{name:"info",className:"mt-0.5 h-4 w-4 text-muted-foreground"})}),(0,a.jsx)(F.ZI,{className:"max-w-[35ch]",children:(0,a.jsxs)("p",{children:["Anyone can remix this project. This means copy and build on it. To stop remixing,"," ",(0,a.jsx)("span",{className:"cursor-pointer underline hover:underline",onClick:()=>{if(!d)return void h(M.KU.PRO_PRIVATE_PROJECT);g("billing")},children:"upgrade"})," ","to make it private."]})})]})})]})]}),(0,a.jsxs)("div",{className:"flex w-full items-start gap-2",children:[(0,a.jsx)(V.C,{value:"private",id:"private",onClick:e=>{if(p)null==l||l();else{if(e.preventDefault(),!d)return void h(M.KU.PRO_PRIVATE_PROJECT);g("billing")}}}),(0,a.jsxs)(W.Label,{htmlFor:"private",className:(0,R.cn)("flex w-full cursor-pointer flex-col gap-0.5"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm font-medium leading-tight",children:[m("workspace.title"),u&&(0,a.jsx)(B.M,{workspace:u,requiredPlanCategory:"pro"})]}),i||(0,a.jsx)("span",{className:"font-normal leading-normal text-muted-foreground",children:m("workspace.description")})]})]}),(0,a.jsxs)("div",{className:"flex w-full items-start gap-2",children:[(0,a.jsx)(V.C,{value:"draft",id:"draft",onClick:e=>{if(x)null==l||l();else{if(e.preventDefault(),!d)return void h(M.KU.BIZ_PERSONAL_PROJECT);g("billing")}}}),(0,a.jsxs)(W.Label,{htmlFor:"draft",className:"flex w-full cursor-pointer flex-col gap-0.5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm font-medium leading-tight",children:[m("draft.title"),u&&(0,a.jsx)(B.M,{workspace:u,requiredPlanCategory:"biz"})]}),i||(0,a.jsx)("p",{className:"flex items-center gap-1",children:(0,a.jsx)("span",{className:"font-normal leading-normal text-muted-foreground",children:m("draft.description")})})]})]})]})})};var H=s(39975);let K=e=>{let{visibility:t,setVisibility:s,className:l,currentWorkspacePlan:r,disabled:n,disabledTooltipContent:o,workspace:d}=e,c=(0,I.c3)("ChatInputCreateProjectVisibility"),m=(0,T.A)(480),{authUser:p}=(0,u.Z2)(),{userData:x}=(0,E.ur)(),[h,g]=(0,i.useState)(!1),{chatInputFormRef:f}=(0,H.N)(),{isFreeOrInactivePlan:j,isBizOrEnterprisePlan:b}=(0,D.cb)(r),v=(0,i.useRef)(null==d?void 0:d.id);return(0,i.useEffect)(()=>{if(!t||(null==d?void 0:d.id)!==v.current){if(v.current=null==d?void 0:d.id,null==d?void 0:d.default_project_visibility)return void s(d.default_project_visibility);r&&(j?s("public"):b?s("draft"):s("private"))}},[r,s,t,null==d?void 0:d.default_project_visibility,null==d?void 0:d.id,j,b]),(0,a.jsx)(P.Q,{showTooltip:n&&!!o,tooltipContent:(0,a.jsx)("p",{children:o}),children:(0,a.jsxs)(z.AM,{open:h,onOpenChange:g,children:[(0,a.jsxs)(F.m_,{children:[(0,a.jsx)(F.k$,{asChild:!0,children:(0,a.jsx)(z.Wv,{asChild:!0,children:(0,a.jsx)(O.$,{variant:"outline",size:"sm",disabled:n,className:(0,R.cn)(l,"flex h-8 items-center justify-center gap-1 rounded-full text-muted-foreground focus-visible:ring-0"),children:void 0===x&&p?(0,a.jsx)("div",{className:"w-[60px]"}):"draft"===t?(0,a.jsxs)("div",{className:"flex items-center gap-1 duration-200 animate-in fade-in",children:[(0,a.jsx)(L.A,{name:"draft",size:"small"}),(0,a.jsx)("span",{className:"hidden md:flex",children:c("draft")})]}):"private"===t?(0,a.jsxs)("div",{className:"flex items-center gap-1 duration-200 animate-in fade-in",children:[(0,a.jsx)(L.A,{name:"workspaces",size:"small"}),(0,a.jsx)("span",{className:"hidden md:flex",children:c("workspace")})]}):(0,a.jsxs)("div",{className:"flex items-center gap-1 duration-200 animate-in fade-in",children:[(0,a.jsx)(L.A,{name:"globe",size:"small"}),(0,a.jsx)("span",{className:"hidden md:flex",children:c("public")})]})})})}),(0,a.jsx)(F.ZI,{className:"border-background bg-background text-foreground",children:c("changeVisibility")})]}),(0,a.jsx)(z.hl,{align:"start",className:"w-auto gap-0 bg-popover",children:(0,a.jsx)(G,{visibility:t,setVisibility:e=>{s(e),g(!1),f.current&&!m&&f.current.focus()},workspacePlan:r,workspace:d,className:"flex flex-col gap-4"})})]})})};var $=s(67230);let Q=e=>{let{className:t,iconSize:s="large",disabled:l=!1,isSendingDisabled:r=!1}=e;return(0,a.jsx)("button",{id:"chatinput-send-message-button",type:"submit",className:(0,R.cn)("flex h-8 w-8 items-center justify-center rounded-full bg-foreground transition-opacity duration-150 ease-out disabled:cursor-not-allowed disabled:opacity-50",t),disabled:r||l,children:(0,a.jsx)(L.A,{name:"arrow_upward_alt_600",size:s,className:"text-background"})})};var Y=s(47354),J=s(64394),X=s(74846),Z=s(86077),q=s(55753),ee=s(34958),et=s(1965),es=s(34936),ea=s(33256),el=s(4349),er=s(69147),en=s(24159),ei=s(15207),eo=s(273),ed=s(79312);let ec=()=>{let{store:e}=(0,g.Xl)(),t=e(e=>e.message),[s,l]=(0,i.useState)([]),[r,n]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{if(t){let e=(0,C.E)(t);l(e),e.length>0&&n(!1)}else l([])},[t]),0===s.length||r)?null:(0,a.jsx)("div",{className:"absolute -bottom-48 left-0 right-0 z-20 mb-4 flex w-full flex-col rounded-lg border border-orange-500/50 bg-orange-900 md:-bottom-40",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2 py-2 pb-4 pl-3 pr-2",children:[(0,a.jsxs)("div",{className:"flex flex-1 items-start gap-2",children:[(0,a.jsx)(L.A,{name:"info",className:"mt-0.5 text-base text-orange-500","aria-label":"Warning"}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-foreground",children:"Sensitive API key detected"}),(0,a.jsxs)("span",{className:"text-sm text-foreground",children:["API keys detected in your message. Create your project first, then connect Supabase to store API keys securely as secrets instead of including them in messages.",(0,a.jsx)("p",{className:"mt-2",children:(0,a.jsx)(O.$,{variant:"link",size:"sm",asChild:!0,className:"pl-0",children:(0,a.jsxs)("a",{href:"https://docs.lovable.dev/features/security",target:"_blank",rel:"noreferrer",children:[(0,a.jsx)(L.A,{name:"help",className:"h-4 w-4 text-foreground"}),(0,a.jsx)("span",{className:"text-xs text-foreground",children:"Learn more about security"}),(0,a.jsx)(L.A,{name:"arrow_outward",className:"h-4 w-4 text-foreground"})]})})})]})]})]}),(0,a.jsx)("button",{type:"button",className:"flex h-7 w-7 items-center justify-center",onClick:()=>{n(!0)},children:(0,a.jsx)(L.A,{name:"close",className:"h-3 w-3 text-foreground"})})]})})};var eu=s(19550),em=s.n(eu),ep=s(62593),ex=s(23660),eh=s(5531),eg=s(24238),ef=s(31196),ej=s(2904),eb=s(7545),ev=s(77987),eN=s(88852),ew=s(17169);function ey(e){let{workspaceId:t,onSupabaseProjectSelect:s,disabled:l=!1,onClose:r}=e,[n,o]=(0,i.useState)(!1),[d,c]=(0,i.useState)(""),{supabaseOrganizations:u}=(0,ej.G)({workspaceId:t});(0,ej.f)({workspaceId:t});let m=(0,j.useCurrentWorkspaceStore)(e=>e.membership),p=(null==m?void 0:m.role)==="admin"||(null==m?void 0:m.role)==="owner",{handleConnect:x,isConnecting:h}=(0,ef.UO)(t),g=(0,A.D)(),f=()=>{o(!1),c(""),null==r||r()},b=(0,i.useMemo)(()=>{if(!d.trim())return u;let e=d.toLowerCase();return null==u?void 0:u.map(t=>{var s;return{...t,projects:null==(s=t.projects)?void 0:s.filter(t=>t.name.toLowerCase().includes(e))}}).filter(e=>e.projects&&e.projects.length>0)},[u,d]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eh._2,{onClick:e=>{e.preventDefault(),o(!0)},className:"text-sm",disabled:l,onSelect:e=>e.preventDefault(),children:[(0,a.jsx)(L.A,{name:"database",className:"h-4 w-4"}),"Connect Database"]}),(0,a.jsx)(eb.cj.Root,{license:"commercial",presented:n,onPresentedChange:o,children:(0,a.jsx)(eb.cj.Portal,{children:(0,a.jsxs)(eb.cj.View,{className:"z-[10000]",children:[(0,a.jsx)(eb.cj.Backdrop,{themeColorDimming:"auto"}),(0,a.jsxs)(eb.cj.Content,{className:"flex h-[65vh] flex-col gap-3 rounded-t-2xl p-4",children:[(0,a.jsx)(eb.s6.Root,{children:(0,a.jsx)(eb.cj.Handle,{children:"Connect database"})}),(0,a.jsx)(eb.cj.BleedingBackground,{className:"rounded-t-2xl border-t bg-background"}),(0,a.jsxs)("div",{className:"flex max-h-full flex-1 flex-col gap-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(L.A,{name:"search",className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,a.jsx)(eN.p,{placeholder:"Search projects...",value:d,onChange:e=>c(e.target.value),className:"pl-9",autoFocus:!0})]}),g&&!d&&(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("p",{className:"px-1 text-sm font-medium text-muted-foreground",children:"Lovable"}),(0,a.jsxs)("button",{className:"flex items-center gap-2 rounded-md px-3 py-2 text-left hover:bg-muted",onClick:()=>{s("lovable"),f()},disabled:l,children:[(0,a.jsx)(L.A,{name:"database"}),(0,a.jsx)("span",{className:"text-base",children:"Lovable Cloud"})]})]}),(0,a.jsx)("p",{className:"px-1 text-sm font-medium text-muted-foreground",children:"Supabase Projects"}),(0,a.jsx)("div",{className:"min-h-0 flex-1 overflow-y-auto pr-1",children:b&&b.length>0?b.map(e=>{var t;return e.status===ew.s.status.NEEDS_REFRESH?(0,a.jsxs)("button",{onClick:()=>x({supabaseOrgId:e.id}),className:"mb-3 flex w-full items-center gap-2 rounded-md px-2 py-2 text-left text-destructive-primary hover:bg-muted",disabled:!p,children:[(0,a.jsx)(L.A,{name:"warning_fill",size:"small",className:"flex-shrink-0 text-destructive-primary"}),(0,a.jsx)("span",{className:"truncate text-sm",children:e.name})]},e.id):(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("p",{className:"px-1 text-sm font-medium text-muted-foreground",children:e.name}),(0,a.jsxs)("div",{className:"mt-1 flex flex-col gap-0.5",children:[null==(t=e.projects)?void 0:t.map(e=>{let t=(0,ev.L)(e);return(0,a.jsx)(P.Q,{showTooltip:!t,tooltipContent:"Check project status in Supabase.",children:(0,a.jsxs)("button",{className:(0,R.cn)("flex w-full items-center gap-1 rounded-md px-3 py-1.5 text-left hover:bg-muted disabled:opacity-50",!t&&"opacity-50"),onClick:()=>{if(t)s(e),f();else window.open("https://supabase.com/dashboard/project/".concat(e.id),"_blank")},children:[(0,a.jsx)("span",{className:"truncate text-base",children:e.name}),!t&&(0,a.jsx)(L.A,{name:"arrow_outward"})]})},e.id)}),(0,a.jsxs)("a",{href:"https://supabase.com/dashboard/new/".concat(e.id),target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded-md px-3 py-1.5 text-base hover:bg-muted",children:[(0,a.jsx)("span",{children:"Create project"}),(0,a.jsx)(L.A,{name:"arrow_outward"})]})]})]},e.id)}):d?(0,a.jsxs)("p",{className:"px-2 py-4 text-center text-base text-muted-foreground",children:['No projects found matching "',d,'"']}):(0,a.jsx)("p",{className:"px-2 py-4 text-center text-base text-muted-foreground",children:"No projects found"})}),(0,a.jsx)(P.Q,{showTooltip:!p,tooltipContent:"You are not an admin of this workspace",children:(0,a.jsxs)("button",{onClick:()=>x(),className:"mt-auto flex items-center gap-2 rounded-md px-2 py-2 text-base hover:bg-muted",disabled:h||!p||l,children:[(0,a.jsx)(L.A,{name:"add"}),"Add organization"]})})]})]})]})})})]})}function e_(e){let{workspaceId:t,selectedSupabaseProject:s,onSupabaseProjectSelect:l,disabled:r=!1}=e,n=(0,eg.a)(),{supabaseOrganizations:i}=(0,ej.G)({workspaceId:t});(0,ej.f)({workspaceId:t});let o=(0,j.useCurrentWorkspaceStore)(e=>e.membership),d=(null==o?void 0:o.role)==="admin"||(null==o?void 0:o.role)==="owner",{handleConnect:c,isConnecting:u}=(0,ef.UO)(t),m=(0,A.D)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eh.mB,{}),n?(0,a.jsx)(ey,{workspaceId:t,selectedSupabaseProject:s,onSupabaseProjectSelect:l,disabled:r}):(0,a.jsxs)(eh.lv,{children:[(0,a.jsxs)(eh.nV,{className:"flex items-center gap-2 text-sm",disabled:r,children:[(0,a.jsx)(L.A,{name:"database",className:"h-4 w-4"}),"Connect Database"]}),(0,a.jsx)(eh.M5,{className:"w-48",children:(0,a.jsxs)(ep.B,{setSelectedProject:l,setOpen:()=>{},children:[m&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eh.lp,{className:"text-xs font-medium text-muted-foreground",children:"Lovable"}),(0,a.jsxs)(eh._2,{onClick:()=>l("lovable"),className:"text-sm",disabled:r,children:[(0,a.jsx)(L.A,{name:"database",className:"h-4 w-4"}),"Lovable Cloud"]})]}),(0,a.jsx)(eh.lp,{className:"text-xs font-medium text-muted-foreground",children:"Supabase Projects"}),null==i?void 0:i.map(e=>(0,a.jsx)(ex.g,{organization:e,reconnectOrg:c,isWorkspaceAdmin:d},e.id)),(0,a.jsx)(P.Q,{showTooltip:!d,tooltipContent:"You are not an admin of this workspace",children:(0,a.jsxs)(eh._2,{onClick:()=>c(),className:"text-sm",disabled:u||!d||r,children:[(0,a.jsx)(L.A,{name:"add",size:"small"}),"Add organization"]})})]})})]})]})}var eC=s(52983),eA=s(2418);let eS={src:"/_next/static/media/modal-attach-image.a9312b4f.png",height:736,width:1472,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAALVBMVEUYDDIsHE4jFERQOIA5J13y4v/77P+1kuRCLm+jg9E7J2PWvPTOt+p6WrjDpukyd0olAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAJ0lEQVR4nAXBiQEAIAgDsSsFf91/XBOqtRkgap+3CNEd6ZC4TvDIDwrwAI+AKn8QAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:4};function ek(e){let{isOpen:t,onOpenChange:s,onAttachImages:l,onDismiss:r,children:n,allowAnyFile:o=!1}=e,d=(0,I.c3)("AttachImageModal"),[c,u]=(0,i.useState)({x:0,y:0});return(0,i.useEffect)(()=>{if(!t)return;let e=e=>{let{clientX:t,clientY:s}=e,{innerWidth:a,innerHeight:l}=window;u({x:(t/a-.5)*20,y:(s/l-.5)*20})};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)},[t]),(0,a.jsxs)(z.AM,{open:t,onOpenChange:s,children:[(0,a.jsx)(z.Wv,{asChild:!0,children:n}),(0,a.jsx)(z.hl,{className:"w-80 rounded-3.5xl px-4 py-5",align:"start",sideOffset:8,children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"relative h-24 w-full overflow-hidden rounded-2xl",children:(0,a.jsx)("div",{className:"absolute inset-0 transition-transform ease-out",style:{transform:"scale(1.8) translateX(".concat(c.x,"px) translateY(").concat(c.y,"px)")},children:(0,a.jsx)(eA.default,{src:eS,alt:"Upload visual references",fill:!0,className:"object-cover"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg",children:d(o?"titleFiles":"title")}),(0,a.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:d(o?"descriptionFiles":"description")})]}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O.$,{size:"sm",onClick:()=>{s(!1),l()},className:"rounded-full",type:"button",children:d(o?"addFiles":"addImages")}),(0,a.jsx)(O.$,{size:"sm",variant:"outline",onClick:()=>{r(),s(!1)},className:"rounded-full",type:"button",children:d("dismiss")})]})})]})})]})}var eI=s(81784);function eE(e){var t;let{isLovableAdmin:s,onSettingsClick:l,handleTemplatesClick:r,workspace:o,disabled:d=!1,workspaceId:c,selectedSupabaseProject:u,onSupabaseProjectSelect:m}=e,p=(0,I.c3)("AttachImageActionModal"),x=(0,h.G8)(),[g,f]=(0,i.useState)(!1),[b,v]=(0,eC.V)("has_seen_attach_image_modal",{defaultValue:!1}),{dropzoneElement:N,openFileUploadFromDropdown:w,getInputProps:y}=(0,eI.F)({portalTargetRef:null}),_=()=>{n.bC.capture(en.yD.CREATE_FORM.ATTACH_CLICKED,{has_seen_attach_modal:b}),b?w():f(!0)},{isBizOrEnterprisePlan:C}=(0,D.cb)(null==o?void 0:o.plan),{userData:A}=(0,E.ur)(),S=(0,j.useCurrentWorkspaceStore)(e=>e.currentWorkspace),k=null!=(t=null==o?void 0:o.disable_figma_import)&&t;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eh.rI,{onOpenChange:d?void 0:e=>{e&&n.bC.capture(en.yD.CREATE_FORM.DROPDOWN_CLICKED)},children:[(0,a.jsx)(eh.ty,{asChild:!0,children:(0,a.jsx)(O.$,{variant:"outline",size:"sm",className:"h-8 w-8 rounded-full p-0 text-muted-foreground hover:text-foreground",type:"button",disabled:d,children:(0,a.jsx)(L.A,{name:"add",size:"default",className:"text-muted-foreground"})})}),(0,a.jsxs)(eh.SQ,{align:"start",className:"min-w-52",children:[!k&&(0,a.jsx)(eh._2,{asChild:!0,disabled:d,children:(0,a.jsxs)(em(),{href:d?"#":"https://www.figma.com/community/plugin/747985167520967365",target:d?void 0:"_blank",rel:d?void 0:"noopener noreferrer",onClick:d?void 0:()=>{n.bC.capture(en.yD.CREATE_FORM.FIGMA_IMPORT_CLICKED)},children:[(0,a.jsx)(L.A,{name:"figma_logo_color",size:"small",className:"text-muted-foreground"}),p("importFromFigma")]})}),s&&(0,a.jsxs)(eh._2,{onClick:d?void 0:l,disabled:d,children:[(0,a.jsx)(L.A,{name:"manufacturing",size:"small",className:"text-muted-foreground"}),p("advancedSettings")]}),C&&(null==A?void 0:A.id)&&(0,a.jsxs)(eh._2,{onClick:d?void 0:r,disabled:d,children:[(0,a.jsx)(L.A,{name:"file_export"}),p("templates")," ",S&&(0,a.jsx)(B.M,{workspace:S,requiredPlanCategory:"biz"})]}),(0,a.jsx)(e_,{workspaceId:c,selectedSupabaseProject:u,onSupabaseProjectSelect:m,disabled:d})]})]}),(0,a.jsx)("div",{children:(0,a.jsxs)(F.m_,{children:[(0,a.jsx)(F.k$,{asChild:!0,children:b?(0,a.jsxs)(O.$,{variant:"outline",size:"sm",className:"h-8 gap-1.5 rounded-full px-3 text-muted-foreground hover:text-foreground",type:"button",onClick:d?void 0:_,disabled:d,children:[(0,a.jsx)(L.A,{name:x?"attach_file":"add_photo_alternate",size:"small"}),(0,a.jsx)("span",{className:"hidden md:flex",children:p("attach")})]}):(0,a.jsx)(ek,{isOpen:!d&&g,onOpenChange:d?()=>{}:e=>{f(e),!e&&g&&v(!0)},onAttachImages:d?()=>{}:()=>{n.bC.capture(en.yD.CREATE_FORM.ATTACH_ADD_IMAGES_CLICKED),w()},onDismiss:d?()=>{}:()=>n.bC.capture(en.yD.CREATE_FORM.ATTACH_DISMISSED),allowAnyFile:x,children:(0,a.jsxs)(O.$,{variant:"outline",size:"sm",className:"h-8 gap-1.5 rounded-full px-3 text-muted-foreground hover:text-foreground",type:"button",disabled:d,onClick:_,children:[(0,a.jsx)(L.A,{name:"add_photo_alternate",size:"small"}),(0,a.jsx)("span",{className:"hidden md:flex",children:p("attach")})]})})}),(0,a.jsx)(F.ZI,{className:"border-background bg-background text-foreground",children:p("tooltip")})]})}),N,(0,a.jsx)("input",{id:"file-upload",className:"hidden",...y()})]})}let eT=JSON.parse('{"y":[{"name":"shadcn/ui + typescript","id":"vite_react_shadcn_ts","experimental":false,"description":"Build front-end with React, Tailwind, Vite & TypeScript","technologies":["vite","react","shadcnui","tailwind","typescript"]},{"name":"shadcn/ui + typescript (minor)","id":"vite_react_shadcn_ts_20250728_minor","experimental":true,"description":"Build front-end with React, Tailwind, Vite & TypeScript","technologies":["vite","react","shadcnui","tailwind","typescript"]},{"name":"shadcn/ui + typescript (major)","id":"vite_react_shadcn_ts_20250728_major","experimental":true,"description":"Build front-end with React, Tailwind, Vite & TypeScript","technologies":["vite","react","shadcnui","tailwind","typescript"]},{"name":"Next.js","id":"nextjs","experimental":true,"description":"Build with Next.js, TypeScript, React, Tailwind","technologies":["nextjs","typescript","react","shadcnui","tailwind"]},{"name":"Custom Tech Stack","id":"custom","experimental":false,"description":"Use a customized tech stack","technologies":[]}],"Z":[{"id":"nextjs","name":"Next.js"},{"id":"nodejs","name":"Node.js"},{"id":"express","name":"Express.js"},{"id":"html","name":"HTML"},{"id":"css","name":"CSS"},{"id":"javascript","name":"JavaScript"},{"id":"typescript","name":"TypeScript"},{"id":"sqlite","name":"SQLite"},{"id":"supabase","name":"Supabase"},{"id":"vite","name":"Vite"},{"id":"cloudflare","name":"Cloudflare"},{"id":"react","name":"React"},{"id":"tailwind","name":"Tailwind"},{"id":"chakraui","name":"Chakra UI"},{"id":"daisyui","name":"Daisy UI"},{"id":"shadcnui","name":"shadcn/ui"},{"id":"typescript","name":"TypeScript"}]}'),eD=e=>{let{id:t}=e,s=eT.Z.find(e=>e.id===t),l=null;"shadcnui"===t&&(l="ShadcnLogo");let r=l?Z.Xy[l]:null;return r?(0,a.jsx)(r,{className:"h-10 w-10"}):(0,a.jsx)(eA.default,{src:"/img/technologies/".concat(t,".").concat({chakraui:"png"}[t]||"svg"),alt:"".concat(t," logo"),width:40,height:40,title:null==s?void 0:s.name,style:"shadcnui"===t?{filter:"invert(100%)"}:"nextjs"===t?{border:"1px solid white",borderRadius:"50%"}:{}})};var eR=s(82176),eO=s(79960),eP=s.n(eO);let eL=e=>{let{value:t,onChange:s,className:l}=e,r=n.Ay.isFeatureEnabled("experimental_tech_stacks")||!1,o=(0,i.useMemo)(()=>eT.y.filter(e=>!e.experimental||r),[r]);return(0,i.useEffect)(()=>{o.find(e=>e.id===t)||s(o[0].id)},[o,s,t]),(0,a.jsx)("div",{className:l,children:(0,a.jsxs)(eR.l6,{required:!0,value:t,onValueChange:e=>{if(er.logging.info("_value",{value:e}),"custom"===e)return void window.open("https://antonosika.typeform.com/to/KbocJ7pz","_blank");s(e)},children:[(0,a.jsx)(eR.bq,{className:"h-15 max-w-full ".concat(eP().button),id:"tech-stack-selector-trigger",children:(0,a.jsx)(eR.yv,{placeholder:"Select a Tech Stack"})}),(0,a.jsx)(eR.gC,{className:"max-w-xs sm:max-w-[600px] md:max-w-3xl",children:(0,a.jsxs)(eR.s3,{children:[(0,a.jsx)(eR.TR,{children:"Tech Stacks"}),o.map(e=>(0,a.jsx)(eR.eb,{value:e.id,className:"group",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("div",{children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500 group-hover:text-primary",children:e.description})]})},e.id))]})})]})})};var ez=s(14635),eF=s(6072);function eM(e){var t;let{isLovableAdmin:s,onSettingsClick:l,handleTemplatesClick:r,workspace:i,disabled:o=!1,workspaceId:d,selectedSupabaseProject:c,onSupabaseProjectSelect:u}=e,m=(0,h.G8)(),{dropzoneElement:p,openFileUploadFromDropdown:x,getInputProps:g}=(0,eI.F)({portalTargetRef:null}),{isBizOrEnterprisePlan:f}=(0,D.cb)(null==i?void 0:i.plan),b=(0,j.useCurrentWorkspaceStore)(e=>e.currentWorkspace),{userData:v}=(0,E.ur)(),N=null!=(t=null==i?void 0:i.disable_figma_import)&&t;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eh.rI,{onOpenChange:o?void 0:e=>{e&&n.bC.capture(en.yD.CREATE_FORM.DROPDOWN_CLICKED)},children:[(0,a.jsx)(eh.ty,{asChild:!0,children:(0,a.jsx)(O.$,{variant:"outline",size:"sm",className:"h-8 w-8 rounded-full p-0 text-muted-foreground hover:text-foreground",type:"button",disabled:o,children:(0,a.jsx)(L.A,{name:"add",size:"default",className:"text-muted-foreground"})})}),(0,a.jsxs)(eh.SQ,{align:"start",className:"w-48",children:[(0,a.jsxs)(eh._2,{onClick:o?void 0:()=>{n.bC.capture(en.yD.CREATE_FORM.DROPDOWN_ATTACH_CLICKED),x()},disabled:o,children:[(0,a.jsx)(L.A,{name:m?"attach_file":"add_photo_alternate",size:"small",className:"text-muted-foreground"}),m?"Attach":"Attach Image"]}),!N&&(0,a.jsx)(eh._2,{asChild:!0,disabled:o,children:(0,a.jsxs)(em(),{href:o?"#":"https://www.figma.com/community/plugin/747985167520967365",target:o?void 0:"_blank",rel:o?void 0:"noopener noreferrer",onClick:o?void 0:()=>{n.bC.capture(en.yD.CREATE_FORM.FIGMA_IMPORT_CLICKED)},children:[(0,a.jsx)(L.A,{name:"figma_logo_color",size:"small",className:"text-muted-foreground"}),"Import from Figma"]})}),f&&(null==v?void 0:v.id)&&(0,a.jsxs)(eh._2,{onClick:o?void 0:r,disabled:o,children:[(0,a.jsx)(L.A,{name:"file_export"}),"Use a template"," ",b&&(0,a.jsx)(B.M,{workspace:b,requiredPlanCategory:"biz"})]}),s&&(0,a.jsxs)(eh._2,{onClick:o?void 0:l,disabled:o,children:[(0,a.jsx)(L.A,{name:"manufacturing",size:"small",className:"text-muted-foreground"}),"Advanced Settings"]}),d&&u&&(0,a.jsx)(e_,{workspaceId:d,selectedSupabaseProject:c,onSupabaseProjectSelect:u,disabled:o})]})]}),p,(0,a.jsx)("input",{id:"file-upload",className:"hidden",...g()})]})}let eU=e=>{let{chatModeEnabled:t,setChatModeEnabled:s,techStack:l,setTechStack:r,isSettingsDialogOpen:o,setIsSettingsDialogOpen:d,openTemplatesDialog:c,disabled:u=!1,workspaceId:m,selectedSupabaseProject:p,onSupabaseProjectSelect:x}=e,h=(0,ee.WW)(),{selectedTechnologies:g}=(0,i.useMemo)(()=>{if(l){let e=eT.y.find(e=>e.id===l);if(e){let{technologies:t,description:s}=e;return{selectedTechnologies:t.map(e=>eT.Z.find(t=>t.id===e)),techStackDescription:s}}}return{selectedTechnologies:[],techStackDescription:""}},[l]),f=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"control",a=(0,N._C)(e),l=t[s];return(n.Ay.capture("$feature_flag_called",{$feature_flag_response:a,$feature_flag:e}),"boolean"!=typeof a&&a&&a in t)?t[a]:l}(N.Gi.LaunchpadFormUploadImageModal,{control:eM,variant1:eE}),b=(0,j.useCurrentWorkspaceStore)(e=>e.currentWorkspace),{isBizOrEnterprisePlan:v}=(0,D.cb)(null==b?void 0:b.plan),w=(0,M.BK)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f,{isLovableAdmin:h,onSettingsClick:()=>d(!0),handleTemplatesClick:()=>{v?c():w(M.KU.BIZ_TEMPLATES)},workspace:b,disabled:u,workspaceId:m,selectedSupabaseProject:p,onSupabaseProjectSelect:x}),(0,a.jsx)(eF.lG,{onOpenChange:d,open:o,children:(0,a.jsxs)(eF.Cf,{children:[(0,a.jsxs)(eF.c7,{children:[(0,a.jsx)(eF.L3,{children:"Advanced Settings"}),(0,a.jsx)(eF.rr,{children:"Make advanced or experimental changes before starting a new project"})]}),(0,a.jsxs)("div",{className:"flex w-full flex-col items-center",children:[h&&(0,a.jsx)("div",{className:"mb-3 flex w-full flex-col gap-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ez.S,{id:"chat-mode",checked:t,onCheckedChange:e=>s(e),disabled:u}),(0,a.jsx)(W.Label,{htmlFor:"chat-mode",children:"Enable Chat Mode"})]})}),(0,a.jsxs)("div",{className:"mb-2 w-full",children:[(0,a.jsx)("p",{className:"mb-1 text-sm font-medium",children:"Tech Stack"}),(0,a.jsx)("div",{className:u?"pointer-events-none opacity-50":"",children:(0,a.jsx)(eL,{className:"w-full",value:l,onChange:e=>{e&&!u&&r(e)}})})]}),(0,a.jsx)("div",{className:"mb-3 flex w-full items-center justify-between",children:(0,a.jsx)("div",{className:"flex-grow text-sm text-muted-foreground",children:"The tech stack to be used for initial generation."})}),(0,a.jsx)("div",{className:"flex gap-4",children:g.map(e=>(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)(W.Label,{children:e.name}),(0,a.jsx)(eD,{id:e.id})]},e.name))})]})]})})]})};var eW=s(44767);let eV=e=>{let{suggestion:t,onClick:s}=e,{label:l,prompt:r,icon:o}=t,d=(0,i.useCallback)(()=>{n.Ay.capture(en.yD.EXAMPLE_PROMPT.CLICKED,{label:l}),s(r,l)},[s,r,l]);return(0,a.jsxs)(O.$,{onClick:d,className:"flex cursor-pointer items-center rounded-full border border-muted-border bg-muted font-normal text-muted-foreground transition-colors duration-150 ease-in-out",variant:"outline",children:[(0,a.jsx)(L.A,{name:o||"arrow_upward",size:"small"}),l]})},eB=e=>{let{onClick:t,suggestions:s,disabled:l=!1}=e,r=s&&s.length>0;return(0,a.jsx)("div",{className:"h-[40px]",children:!!r&&!l&&(0,a.jsx)(eW.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{ease:"easeOut",duration:.5},children:(0,a.jsx)("div",{className:"mt-4 flex w-screen justify-start gap-2.5 overflow-x-auto px-2 py-1 scrollbar-hide md:mt-5 md:justify-center",children:null==s?void 0:s.map(e=>(0,a.jsx)(eV,{suggestion:e,onClick:t},e.label))})})})};var eG=s(34363),eH=s(44794),eK=s(36104);let e$=e=>{var t,s;let{projectId:l,setSelectedTemplateId:r,openTemplatesDialog:n}=e,{data:i,isLoading:o}=(0,eG.I)(eK.c.projectDetails({projectId:l})),d=(0,T.A)("md");return i||o?(0,a.jsxs)("div",{className:"group/attached-template relative flex flex-wrap gap-2",children:[(0,a.jsxs)("button",{className:(0,R.cn)("flex h-16 w-16 items-center justify-center bg-muted p-0 transition-opacity duration-150 ease-in-out hover:opacity-80",d&&"h-24 w-24"),type:"button",onClick:n,children:[o?(0,a.jsx)(eH.y,{size:"small"}):(0,a.jsx)(eA.default,{src:null!=(t=null==i?void 0:i.latest_screenshot_url)?t:"",alt:"Screenshot of ".concat(null!=(s=null==i?void 0:i.name)?s:"template project"),fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",style:{objectFit:"cover",objectPosition:"top"},draggable:"false",className:"rounded-xl border border-muted-border"}),(0,a.jsx)("div",{className:"absolute inset-px rounded-xl bg-gradient-to-t from-background/50 to-background/0"}),(0,a.jsx)(L.A,{name:"file_export",size:d?"default":"small",className:"absolute bottom-1.5 left-1.5 text-foreground"})]}),(0,a.jsxs)(F.m_,{instant:!0,children:[(0,a.jsx)(F.k$,{asChild:!0,children:(0,a.jsx)("button",{className:(0,R.cn)("absolute -right-0.5 -top-0.5 z-[10000] flex items-center justify-center rounded-full border bg-primary text-xs text-primary-foreground opacity-0 shadow shadow-background/25 transition-opacity duration-150 ease-out group-hover/attached-template:opacity-100",d&&"h-5 w-5 opacity-100"),onClick:()=>{r(void 0)},children:(0,a.jsx)(L.A,{name:"close_small",size:d?"default":"small"})})}),(0,a.jsx)(F.ZI,{children:"Remove template"})]})]},l):null};var eQ=s(72384),eY=s(27317),eJ=s(7099);let eX=e=>{let{isOpen:t,setIsOpen:s,setSelectedTemplateId:l}=e,r=(0,j.useCurrentWorkspaceStore)(e=>e.currentWorkspace);return(0,a.jsx)(eF.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(eF.Cf,{className:"md:max-w-4xl",children:[(0,a.jsxs)(eF.c7,{className:"mb-4 border-b pb-4",children:[(0,a.jsx)(eF.L3,{children:"Use a template"}),(0,a.jsxs)(eF.rr,{children:["Select a project from ",(0,a.jsx)("span",{className:"font-medium",children:null==r?void 0:r.name})," and tell Lovable how to use it. Set projects as templates in project settings."]})]}),(0,a.jsx)(eZ,{setSelectedTemplateId:l,closeDialog:()=>{s(!1)}})]})})},eZ=e=>{var t;let{setSelectedTemplateId:s,closeDialog:l}=e,r=(0,j.useCurrentWorkspaceStore)(e=>e.currentWorkspace),{data:n,isLoading:i}=(0,eG.I)(eQ.y.templates({workspaceId:null!=(t=null==r?void 0:r.id)?t:""}));return(0,a.jsx)("div",{className:"flex flex-1",children:(0,a.jsxs)("div",{className:"grid max-h-[500px] w-full grid-cols-1 gap-6 overflow-y-auto md:grid-cols-2 lg:grid-cols-3",children:[i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eY.p,{}),(0,a.jsx)(eY.p,{}),(0,a.jsx)(eY.p,{})]}),!i&&(n&&n.length>0?n.map(e=>(0,a.jsx)(eJ.U,{project:e,subtitleType:"created-by",isCommunityProject:!1,positionIndex:0,isTemplate:!0,selectTemplate:()=>{s(e.id),l()}},e.id)):(0,a.jsxs)("div",{className:"col-span-full flex h-[300px] w-full flex-col items-center justify-center gap-2 text-center text-sm text-muted-foreground",children:[(0,a.jsx)(L.A,{name:"file_export",size:"large"}),(0,a.jsx)("p",{children:"Set a project as a template in project settings."})]}))]})})};var eq=s(88134),e0=s(90465),e1=s(40879);let e5=e=>{let{disabled:t=!1}=e,s=(0,I.c3)("TypeWriter"),l=(0,e1.ot)(),r=(0,e0.d)({words:l.TypeWriter.words,prefix:s("prefix")});return(0,a.jsx)(eq.h,{autoSize:!0,minHeight:80,shouldAutoFocus:!t,placeholder:t?"Viewers can only view existing projects":r,enableSlashCommands:!1,isChatModeActive:!1,disabled:t})},e2=e=>{let{promptSuggestions:t}=e;return(0,a.jsx)(g.Ar,{localStorageKey:"create-form",children:(0,a.jsx)(e4,{promptSuggestions:t})})},e4=e=>{let{promptSuggestions:t}=e,s=(0,r.useRouter)(),I=(0,l.jE)(),E=(0,X.X5)(),[T,D]=(0,i.useState)(""),[R,P]=(0,i.useState)(void 0),[z,F]=(0,i.useState)(!1),[M,U]=(0,i.useState)(!1),W=(0,N.Tp)(ei.x.SendMessageOnCreation),V=(0,h.G8)(),{store:B}=(0,g.Xl)(),G=B(e=>e.message),eu=B(e=>e.setMessage),em=B(e=>e.setImages),ep=(0,g.Uw)(e=>e.suggestionLabel),ex=(0,g.Uw)(e=>e.setSuggestionLabel),eh=(0,g.Uw)(e=>e.images),eg=(0,h.zJ)(),ef=(0,ee.WW)(),[ej,eb]=(0,d.A)("chat-mode-enabled",{defaultValue:!1}),{currentWorkspaceId:ev,setCurrentWorkspaceId:eN}=(0,j.Dx)(),[ew,ey]=(0,i.useState)(!1),[e_,eC]=(0,i.useState)(!1),[eA,eS]=(0,i.useState)(!1),ek=(0,w.Mu)(e=>e.isLoading),eI=(0,r.useSearchParams)(),eE=eI.get("promptKey"),eT=eI.get("prompt"),eD=eI.get("autosubmit"),eR=eI.get("builder_token"),eO=(0,i.useMemo)(()=>eE?(0,el.Bj)(eE):null,[eE]),eP=(null==eO?void 0:eO.prompt)||eT,[eL,ez]=(0,i.useState)(!1),eF=()=>ez(!0),[eM,eW]=(0,i.useState)(void 0);(0,i.useEffect)(()=>{let e=eI.get("templateId");e&&eW(e)},[eI,eW]);let eV=(0,A.D)(),[eG,eH]=(0,i.useState)(null);(0,i.useEffect)(()=>{eH(null)},[ev,eV]);let eK=(0,j.useCurrentWorkspaceStore)(e=>e.currentWorkspace),{permitted:eQ}=(0,v.J)(ed.eZ.CreateWorkspaceProjects),{permitted:eY}=(0,v.J)(ed.eZ.ManageWorkspaceSupabase),{disableChangeVisibility:eJ,disabledTooltipContent:eZ,disableFormActions:eq,disableSubmission:e0,disableModelSelector:e1,disableConnectSupabase:e2,disablePromptSuggestions:e4,showActionButtons:e9}=(0,i.useMemo)(()=>eQ?{disableChangeVisibility:!1,disabledTooltipContent:void 0,disableFormActions:!1,disableSubmission:!1,disableModelSelector:!1,disableConnectSupabase:!eY,disablePromptSuggestions:!1,showActionButtons:!0}:{disableChangeVisibility:!0,disabledTooltipContent:"You don't have permission to create projects in this workspace. Contact a workspace admin for access.",disableFormActions:!0,disableSubmission:!1,disableModelSelector:!0,disableConnectSupabase:!0,disablePromptSuggestions:!0,showActionButtons:!0},[eQ,eY]),{selectedModel:e7}=(0,b.Y$)(),{store:e3}=(0,g.Xl)(),e6=(0,i.useCallback)((e,t)=>{e0||(eu(e),ex(t))},[eu,ex,e0]),e8=(0,i.useCallback)(async e=>{let{body:t,options:a}=e;try{let e,l=e3.getState(),r=(0,_.wL)(t),n={description:r.message||"Implement exactly the screenshot and nothing else",tech_stack:T||void 0,example_prompt_label:ep||void 0,visibility:R,images_added_via_dropdown:l.imagesAddedViaDropdown&&l.images.length>0||void 0,template_project_id:eM,...eG&&"object"==typeof eG?{supabase_project_config:{supabase_organization_id:eG.organization_id,supabase_project_id:eG.id}}:{},...r.image_urls&&r.image_urls.length>0&&(!V||r.from_hash_fragment)?{image_urls:r.image_urls}:{}};if("lovable"===eG&&delete n.supabase_project_config,!ev)return void o.oR.error("We had trouble finding your workspace.",{description:"Please try again later or contact support if the problem persists."});"auto"!==e7&&null!==e7&&(e=e7);let i={id:r.id,message:r.message,images:l.images,ai_message_id:r.ai_message_id||void 0,chatOnly:!!ej||!0===r.chat_only||void 0,agentMode:"enabled",builderToken:r.builder_token||void 0,model:e};W&&(n.initial_message={...r,agent_mode:"enabled",model:e});let d=(0,ea.Pg)(),c=await d.post("/workspaces/".concat(ev,"/projects"),n);I.invalidateQueries({queryKey:eo.Or.all}),I.setQueryData(eo.gO.initialPrompt(c.id),i),eE&&(0,el.t)(eE),s.push("/projects/"+c.id),setTimeout(()=>{var e;null==a||null==(e=a.clear)||e.call(a)},1e3)}catch(s){var l;null==a||null==(l=a.restore)||l.call(a);let e=401===s.status,t=402===s.status;if(s instanceof et.L&&"rate_limited"===s.type)return void o.oR.error("We are currently under heavy load, please try again later.");if(e)return;if(t){n.Ay.capture("out_of_credits_dialog_opened"),E();return}(0,es.Ni)(s),er.logging.error("Create project error",s);return}},[e3,T,ep,R,eM,eG,ev,ej,e7,W,V,I,s,E,eE]),te=(0,i.useCallback)(async e=>{let{body:t,options:s}=e;if((0,C.u)(t.message)){n.Ay.capture(en.$6.CREATION.API_KEY_DETECTED),U(!0);return}await e8({body:{...t,model:ef&&"auto"!==e7&&null!==e7?e7:void 0},options:s})},[e8,ef,e7]),{sendChatMessage:tt,isSendingDisabled:ts,isSubmitting:ta,AuthDialogComponent:tl}=(e=>{let{onSubmit:t}=e,{authUser:s,authState:l}=(0,u.Z2)(),[r,n]=(0,i.useState)(!1),[o,d]=(0,i.useState)(!1),c=(0,h.G8)(),{store:j,clearEditorState:b,restoreEditorState:v}=(0,g.Xl)(),N=j(e=>e.images),w=j(e=>e.message),y=(0,i.useMemo)(()=>N.some(e=>!e.uploaded),[N]),_=(0,i.useMemo)(()=>0===w.length||s&&y||(0,x.rn)(w)||o||"loading"===l,[w,s,y,o,l]);return{sendChatMessage:(0,i.useCallback)(async()=>{if(!_){if(!s)return void n(!0);d(!0);try{let e={id:(0,m.g_)(),message:w,...c?{files:N.map(e=>({file_id:e.id,file_name:e.name,type:f.g.USER_UPLOAD}))}:{images:N.map(e=>({image_id:e.id,type:f.g.USER_UPLOAD}))},optimisticImageUrls:N.map(e=>e.url),chat_only:!1,agent_mode_enabled:!1};await t({body:e,options:{clear:b,restore:v}})}finally{d(!1)}}},[s,_,w,N,t,b,v,c]),isSendingDisabled:_,isSubmitting:o,AuthDialogComponent:(0,a.jsx)(p.H,{open:r,onOpenChange:n})}})({onSubmit:te}),tr=(0,i.useRef)(!1);(0,i.useEffect)(()=>{(null==eO?void 0:eO.images)&&eO.images.length>0&&em(eO.images.map((e,t)=>{try{return{id:"hash-image-".concat(e,"-").concat(t),url:decodeURIComponent(e),name:"Image ".concat(t+1),size:0,type:"image/jpeg",uploaded:!0,uploading:!1}}catch(t){return er.logging.error("Error decoding malformed image URL from hash fragment for UI",{error:t,url:e}),null}}).filter(e=>null!=e))},[null==eO?void 0:eO.images,em]);let tn=(0,i.useMemo)(()=>{let e=((null==eO?void 0:eO.images)||[]).map(e=>{try{return decodeURIComponent(e.trim())}catch(t){return er.logging.error("Error decoding malformed image URL from hash fragment",{error:t,url:e}),null}}).filter(e=>!!e),t=eI.getAll("images").map(e=>{try{return decodeURIComponent(e.trim())}catch(t){return er.logging.error("Error decoding malformed image URL from query params",{error:t,url:e}),null}}).filter(e=>!!e);return e.length>0?e:t},[eI,null==eO?void 0:eO.images]);return(0,i.useEffect)(()=>{if(!tr.current)if(eR&&ev){tr.current=!0;let e=(0,c.A)();e8({body:{message:"Build a pixel perfect UI clone of this Figma design!",builder_token:eR,id:e}}),n.Ay.capture("builder_io_figma_import_request_sent",{project_id:e})}else eP&&"true"===eD&&!ek&&(e_?eA&&ev&&(tr.current=!0,eS(!1),e8({body:{message:eP,id:(0,c.A)(),image_urls:tn.length>0?tn:void 0,from_hash_fragment:!!(null==eO?void 0:eO.images)}})):(eC(!0),ey(!0)))},[e8,eP,eD,eR,ev,tn,ek,e_,eC,eA,eS,null==eO?void 0:eO.images]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.c,{isOpen:M,onDismiss:()=>U(!1),onConfirm:()=>{U(!1),G&&(n.Ay.capture(en.$6.CREATION.API_KEY_WARNING_DISMISSED),e8({body:{message:G,id:(0,c.A)()}}))}}),(0,a.jsx)(eX,{isOpen:eL,setIsOpen:ez,selectedTemplateId:eM,setSelectedTemplateId:eW}),(0,a.jsx)(q.AX,{open:ew,onOpenChange:e=>{ey(e),e||eA||(eE&&(0,el.t)(eE),s.replace("/"))},onWorkspaceSelect:e=>{eN(e),eS(!0),ey(!1)},selectedWorkspaceId:ev}),(0,a.jsx)("div",{className:"w-full max-w-3xl",children:(0,a.jsx)("div",{className:"relative w-full",children:(0,a.jsxs)("div",{className:"flex w-full flex-col items-center",children:[(0,a.jsx)("div",{className:"relative size-full",children:(0,a.jsxs)(H._,{onSendChatMessage:te,isSubmitting:ta,children:[(0,a.jsx)(ec,{}),(0,a.jsxs)(S.V,{className:"w-full rounded-3.5xl border border-muted-border bg-muted text-base shadow-xl transition-all duration-150 ease-in-out focus-within:border-foreground/20 hover:border-foreground/10 focus-within:hover:border-foreground/20",onSubmit:e0?()=>{}:tt,AuthDialogComponent:tl,children:[(eh.length>0||!!eM)&&(0,a.jsx)("div",{className:"p-1 pb-0",children:(0,a.jsx)($.d,{children:eM&&(0,a.jsx)(e$,{projectId:eM,setSelectedTemplateId:eW,openTemplatesDialog:eF})})}),(0,a.jsx)(e5,{disabled:e0}),(0,a.jsx)(x.eh,{}),(0,a.jsxs)(k.Z,{className:"flex-wrap items-center",children:[(0,a.jsx)(eU,{chatModeEnabled:ej,setChatModeEnabled:eb,techStack:T,setTechStack:D,isSettingsDialogOpen:z,setIsSettingsDialogOpen:F,openTemplatesDialog:eF,disabled:eq,workspaceId:ev||"",selectedSupabaseProject:eG,onSupabaseProjectSelect:eH}),(0,a.jsx)(K,{disabled:eJ,visibility:R,setVisibility:P,currentWorkspacePlan:(null==eK?void 0:eK.plan)||null,disabledTooltipContent:eZ,workspace:eK||void 0}),eG&&(0,a.jsx)("div",{className:e2?"pointer-events-none opacity-50":"",children:(0,a.jsxs)(O.$,{variant:"default",size:"sm",className:"flex h-8 max-w-32 items-center gap-1 rounded-full pr-2 focus-visible:ring-0 md:max-w-40",onClick:()=>eH(null),disabled:e2,children:["lovable"===eG?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(L.A,{name:"database",className:"h-4 w-4 flex-shrink-0"}),(0,a.jsx)("span",{className:"hidden truncate text-sm font-medium md:flex",children:"Lovable Cloud"})]}):"object"==typeof eG&&eG?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z.Xy.Supabase,{className:"mr-0.5 h-3.5 w-3.5 flex-shrink-0"}),(0,a.jsx)("span",{className:"hidden truncate text-sm font-medium md:flex",children:eG.name})]}):null,(0,a.jsx)(L.A,{name:"close",size:"small",className:"h-3.5 w-3.5 opacity-70"})]})}),(0,a.jsxs)("div",{className:"ml-auto flex items-center gap-1",children:[eg&&(0,a.jsx)("div",{className:e1?"pointer-events-none opacity-50":"",children:(0,a.jsx)(J.B,{projectId:"create-form"})}),(0,a.jsxs)("div",{className:"relative flex items-center gap-1 md:gap-2",children:[(0,a.jsx)("div",{className:e9?"":"pointer-events-none opacity-50"}),(0,a.jsx)(Y.H,{size:"large",disabled:!e9}),(0,a.jsx)(Q,{isSendingDisabled:ts||!e9,iconSize:"large"})]})]})]})]})]})}),(0,a.jsx)(eB,{onClick:e6,suggestions:t,disabled:e4})]})})})]})}},55753:(e,t,s)=>{"use strict";s.d(t,{AX:()=>u});var a=s(99289),l=s(11405),r=s(76974),n=s(39226),i=s(49944),o=s(6072),d=s(97757),c=s(16015);function u(e){let{open:t,onOpenChange:s,onWorkspaceSelect:n,selectedWorkspaceId:d}=e,c=(0,r.Mu)(e=>e.workspaces),u=(0,r.Mu)(e=>e.isLoading),p=(0,l.useCallback)(e=>{e.id&&(n(e.id),s(!1))},[n,s]);return(0,a.jsx)(o.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(o.Cf,{className:"max-h-screen w-96 gap-4",size:"sm",onOpenAutoFocus:e=>e.preventDefault(),children:[(0,a.jsxs)(o.c7,{children:[(0,a.jsx)(o.L3,{className:"text-xl",children:"Choose Workspace for Auto-Submit"}),(0,a.jsx)(o.rr,{className:"text-sm",children:"Please select which workspace to create this project in."})]}),u?(0,a.jsx)("div",{className:"flex max-h-72 w-full flex-col space-y-2 overflow-y-auto p-2",children:Array.from({length:3}).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-3 px-3 py-3",children:[(0,a.jsx)("div",{className:"h-8 w-8 animate-pulse rounded bg-muted"}),(0,a.jsx)("div",{className:"h-4 flex-1 animate-pulse rounded bg-muted"})]},t))}):(0,a.jsx)("div",{className:"flex max-h-72 w-full flex-col overflow-y-auto",children:c.map(e=>{var t;return(0,a.jsx)(m,{workspace:e,onSelect:()=>p(e),selected:d==e.id},null!=(t=e.id)?t:"fake-workspace-id")})}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(i.$,{variant:"outline",onClick:()=>s(!1),children:"Cancel"})})]})})}let m=e=>{let{workspace:t,onSelect:s,selected:l}=e;return(0,a.jsxs)(i.$,{variant:"ghost",onClick:s,className:"group flex h-auto w-full items-center justify-start gap-3 px-3 py-3 text-left",children:[(0,a.jsx)(n.z,{workspace:t}),(0,a.jsx)("p",{className:"min-w-0 truncate text-sm",children:t.name}),t.plan&&(0,a.jsx)(c.U,{plan:t.plan}),l&&(0,a.jsx)(d.A,{name:"check",size:"small",className:"ml-auto"})]})};s(70999)},62593:(e,t,s)=>{"use strict";s.d(t,{B:()=>i,C:()=>n});var a=s(99289),l=s(11405);let r=(0,l.createContext)({setSelectedProject:()=>{},setOpen:()=>{}}),n=()=>{let e=(0,l.useContext)(r);if(!e)throw Error("useSupabaseConnectMenuContext must be used within a SupabaseConnectMenuContext");return e},i=e=>{let{children:t,setSelectedProject:s,setOpen:l}=e;return(0,a.jsx)(r.Provider,{value:{setSelectedProject:s,setOpen:l},children:t})}},71459:(e,t,s)=>{"use strict";s.d(t,{K:()=>a});var a=function(e){return e.ACTIVE_HEALTHY="ACTIVE_HEALTHY",e.ACTIVE_UNHEALTHY="ACTIVE_UNHEALTHY",e.COMING_UP="COMING_UP",e.GOING_DOWN="GOING_DOWN",e.INACTIVE="INACTIVE",e.INIT_FAILED="INIT_FAILED",e.REMOVED="REMOVED",e.RESTARTING="RESTARTING",e.UNKNOWN="UNKNOWN",e.UPGRADING="UPGRADING",e.PAUSING="PAUSING",e.RESTORING="RESTORING",e.RESTORE_FAILED="RESTORE_FAILED",e.PAUSE_FAILED="PAUSE_FAILED",e}({})},77987:(e,t,s)=>{"use strict";s.d(t,{L:()=>l});var a=s(71459);let l=e=>e.status===a.K.ACTIVE_HEALTHY},79960:e=>{e.exports={button:"TechStackSelector_button__pszsB"}},90465:(e,t,s)=>{"use strict";s.d(t,{d:()=>l});var a=s(11405);function l(e){let{words:t,typingSpeed:s=30,deletingSpeed:l=30,pauseBetweenWords:r=1500,prefix:n=""}=e,[i,o]=(0,a.useState)(0),[d,c]=(0,a.useState)(""),[u,m]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{if(!t||0===t.length)return;let e=setTimeout(()=>{let e=t[i];if(e)if(u){if(""===d){m(!1),o(e=>(e+1)%t.length);return}c(e.substring(0,d.length-1))}else{if(d===e)return void setTimeout(()=>m(!0),r);c(e.substring(0,d.length+1))}},u?l:s);return()=>clearTimeout(e)},[d,i,u,t,s,l,r]),n+d}}}]);