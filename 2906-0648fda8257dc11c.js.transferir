try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="b232410c-7b4f-4336-979f-35b4d4cfd635",e._sentryDebugIdIdentifier="sentry-dbid-b232410c-7b4f-4336-979f-35b4d4cfd635")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2906],{273:(e,t,a)=>{"use strict";a.d(t,{Or:()=>n,QO:()=>l,a$:()=>i,cm:()=>s,gO:()=>r});let l={all:["permissions"],get:(e,t)=>[...l.all,e,t]},r={all:["projects"],details:()=>[...r.all,"detail"],detail:e=>[...r.details(),e],sharedWithMe:()=>[...r.all,"shared"],pendingProjectInvites:()=>[...r.all,"pending-invites"],branches:e=>[...r.detail(e),"branches"],secretLinkId:e=>[...r.detail(e),"secret-link-id"],domains:e=>[...r.detail(e),"domains"],sourceCode:e=>[...r.detail(e),"source-code"],feedbackStatus:e=>[...r.detail(e),"feedback-status"],presence:e=>[...r.detail(e),"presence"],communityProjects:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"recent",a=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0;return[...r.all,"community",e,t,a,l]},collaborators:e=>[...r.detail(e),"collaborators"],analytics:(e,t)=>[...r.detail(e),"analytics",t],analyticsTrend:e=>[...r.detail(e),"analytics-trend"],projectDetails:e=>[...r.detail(e),"details"],initialPrompt:e=>[...r.detail(e),"initial-prompt"],integrations:e=>[...r.detail(e),"integrations"],integration:(e,t)=>[...r.integrations(e),t]},n={all:["workspaces"],totalProjects:e=>[...n.all,e,"total-projects"],projects:e=>{let{workspaceId:t,userId:a,limit:l,isDraft:r=!1}=e;return[...n.detail(t),"projects",a,l,r?"draft":"published"]},membership:(e,t)=>[...n.all,e,"membership",t],memberships:(e,t)=>t?[...n.detail(e),"memberships",(null==t?void 0:t.query)||"",(null==t?void 0:t.status)||"all",(null==t?void 0:t.role)||"",(null==t?void 0:t.limit)||20,(null==t?void 0:t.offset)||0,(null==t?void 0:t.sortBy)||"joined_at",(null==t?void 0:t.sortOrder)||"desc"]:[...n.detail(e),"memberships"],detail:e=>[...n.all,e],supabaseOrganizations:(e,t)=>[...n.all,e,"supabase-organizations",t],unacceptedInvites:()=>[...n.all,"unaccepted-invites"],inviteUser:(e,t)=>[...n.all,e,"invite-user",t],workspaceRole:(e,t)=>[...n.all,e,"workspace-role",t],workspaceUsage:(e,t,a)=>[...n.all,e,"workspace-usage",t,a],workspaceUserTotalUsage:e=>[...n.all,e,"workspace-user-total-usage"],workspaceGithubInstallations:e=>[...n.all,e,"workspace-github-installations"],referralCode:(e,t)=>[...n.all,e,"referral-code",t],workspaces:e=>{let{userId:t}=e;return[...n.all,t,"workspaces"]},templates:e=>[...n.detail(e),"templates"],integrationsOAuthStatus:(e,t)=>[...n.detail(e),"integrations",{integrations:t}],integrationOAuthStatus:(e,t)=>[...n.detail(e),"integrations",t,"oauth"]},s={all:["github"],installations:()=>[...s.all,"installations"],repoAccessibility:e=>[...s.all,"repo-accessibility",e],repos:e=>[...s.all,"repos",null==e?void 0:e.account.login,null==e?void 0:e.target_type]},i={all:["users"],experimentalFeatures:()=>[...i.all,"experimental-features"],workspaces:()=>[...i.all,"workspaces"],workspace:e=>[...i.workspaces(),e],profile:e=>[...i.all,e],contributions:e=>[...i.all,"contributions",e],studentDomains:()=>[...i.all,"student-domains"],toolApprovalPreferences:()=>[...i.all,"preferences","tool-preferences"]}},2906:(e,t,a)=>{"use strict";a.d(t,{LS:()=>_,ET:()=>k,et:()=>C});var l=a(99289),r=a(51252),n=a(81797),s=a(11405),i=a(98213),o=a(70999),d=a(91352),c=a(99280),u=a(97115);let p={PRO_TO_PRO_UPGRADE:{title:"Add more credits",subtitle:"Here's what happens if you upgrade:",showCreditDifference:!0,showWhatsChanging:!1,showPlanFeatures:!1,showNextBillingCycle:!0,showPlanDropdown:!0},PRO_TO_BIZ_UPGRADE:{title:"Upgrade to Business",subtitle:"Here's what happens if you upgrade:",showCreditDifference:!0,showWhatsChanging:!0,showPlanFeatures:!1,showNextBillingCycle:!0,showPlanDropdown:!0},BIZ_TO_BIZ_UPGRADE:{title:"Add more credits",subtitle:"Here's what happens if you upgrade:",showCreditDifference:!0,showWhatsChanging:!1,showPlanFeatures:!1,showNextBillingCycle:!0,showPlanDropdown:!0}},m=e=>{let{targetPlan:t,scenario:a}=e,{currentPlan:r}=C(),n=p[a],s=(0,c.Y)({currentPlan:r,targetPlanCategory:(0,u.m6)(t)});return(0,l.jsx)(d.n,{targetPlan:t,availablePlans:s,title:n.title,subtitle:n.subtitle,showCreditDifference:n.showCreditDifference,showWhatsChanging:n.showWhatsChanging,showPlanFeatures:n.showPlanFeatures,showNextBillingCycle:n.showNextBillingCycle,showPlanDropdown:n.showPlanDropdown})};var g=a(4745),h=a(19618),x=a(67017),f=a(24159),b=a(99605),v=a(71302),w=a(273),y=a(37079),j=a(43328);let _="pendingPlanSelection",N=(0,s.createContext)(void 0),k=e=>{let{children:t,pricingScenario:a}=e,d=(0,r.jE)(),c=(0,j.useCurrentWorkspaceStore)(e=>e.currentWorkspace),p=(0,j.Dx)(),k=(0,j.useCurrentWorkspaceStore)(e=>{var t;return null==(t=e.membership)?void 0:t.role}),{authUser:C}=(0,y.Z2)(),{toCheckout:P,createPortalSession:S,checkoutLoading:E,isCreatePortalSessionLoading:A,cancelSubscription:D,isCancelSubscriptionLoading:L,cancelSubscriptionChanges:I,isCancelSubscriptionChangesLoading:T}=(0,h.R)(),[R,O]=(0,s.useState)(null!=a?a:"billing"),F=(0,s.useCallback)(async()=>{(null==c?void 0:c.id)?await S({workspaceId:c.id}):i.oR.error("Something went wrong.",{description:"Please, refresh the page and try again."})},[S,null==c?void 0:c.id]),M=(0,s.useCallback)(async(e,t)=>{(null==c?void 0:c.id)?(await e({workspaceId:c.id}),(null==p?void 0:p.store)&&p.store.setState({currentWorkspace:{...c,...t(c)}}),await new Promise(e=>setTimeout(async()=>{await d.invalidateQueries({queryKey:w.Or.all}),e(void 0)},1e3))):i.oR.error("Something went wrong.",{description:"Please, refresh the page and try again."})},[c,null==p?void 0:p.store,d]),z=(0,s.useCallback)(()=>M(D,()=>({plan_scheduled:v.VL.FREE,plan_type_scheduled:void 0})),[M,D]),W=(0,s.useCallback)(()=>M(I,()=>({plan_scheduled:void 0,plan_type_scheduled:void 0})),[M,I]),K=(0,s.useMemo)(()=>{var e,t;return{id:null!=(e=null==c?void 0:c.plan)?e:v.VL.FREE,type:null!=(t=null==c?void 0:c.plan_type)?t:"monthly"}},[c]),B=(0,s.useMemo)(()=>{if(null==c?void 0:c.plan_scheduled){var e,t;return{id:null!=(e=null==c?void 0:c.plan_scheduled)?e:v.VL.FREE,type:null!=(t=null==c?void 0:c.plan_type_scheduled)?t:"monthly"}}},[c]),U="loggedOut"===R,{isFreePlan:G,isLegacyPlan:V}=(0,u.cb)(K.id),q=!!(!U&&C&&c&&C.uid===c.owner_id),$=!U&&"member"===k,Z=!U&&(!!k||q),H=!U&&!Z&&!q,Y=.2*!!V,[X,Q]=(0,s.useState)(K.type),J=(0,s.useMemo)(()=>(0,u.yw)(K),[K]),ee=(0,s.useMemo)(()=>(0,u.LL)(K),[K]),[et,ea]=(0,s.useState)(J),[el,er]=(0,s.useState)(ee),[en,es]=(0,s.useState)(null),[ei,eo]=(0,s.useState)(b.pB[0]);(0,s.useEffect)(()=>{ea(J),er(ee),es(null),Q(K.type)},[J,ee,R,K]);let ed=(0,s.useCallback)(e=>(0,u.jL)({id:e,type:X}),[X]),ec="loggedOut"===R||(null==B?void 0:B.id)==="free",eu="outOfCredits"!==R&&("ktlo"===K.id||(null==B?void 0:B.id)==="ktlo"),ep="outOfCredits"!==R&&!B&&!eu,em=(0,s.useCallback)(e=>{if("monthly"===K.type&&"annual"===X&&e===K.id)return!1;let t=(0,u.jL)({...K,type:"monthly"}),a=(0,u.jL)({id:e,type:X,type:"monthly"}),l=(0,u.RL)(K.id),r=(0,u.RL)(e),n=(0,u.m6)(K.id),s=(0,u.m6)(e);return"biz"==n?"biz"==s?a<t:r<=l:"biz"==s?r<l:a<t},[K,X]),eg=(0,s.useCallback)(e=>e===K.id&&X===K.type?"current":G||(0,u.jL)(K)===ed(e)?"upgrade":"enterprise"===K.id?"downgrade":e===K.id&&"annual"===X&&"monthly"===K.type?"switchToAnnual":em(e)?"downgrade":"upgrade",[K,G,ed,X,em]),eh=(0,s.useCallback)(e=>{let t=eg(e);if("current"===t)return"Your current plan";if("switchToAnnual"===t)return"Switch to annual";let{isProPlan:a,isBizPlan:l}=(0,u.cb)(K.id),{isProPlan:r,isBizPlan:n}=(0,u.cb)(e);return"upgrade"===t?a&&r||l&&n?"Upgrade current plan":"Upgrade":"enterprise"===K.id?"Downgrade (Contact us)":"Downgrade"},[eg,K]),ex=(0,s.useMemo)(()=>{var e,t,a;return(null==C?void 0:C.email)||(null==C||null==(a=C.firebase)||null==(t=a.identities)||null==(e=t.email)?void 0:e[0])||"xxxxx"},[C]),ef=(0,x.A)("sm"),eb=(0,s.useMemo)(()=>ef?1:[ec,eu,!0,!0,ep].filter(Boolean).length,[ef,ec,eu,!0,!0,ep]),ev=(0,s.useCallback)(e=>{let t=eg(e);return"upgrade"===t||"switchToAnnual"===t?"twilight":"link"},[eg]),ew=ev(et),ey=ev(el),ej=(0,s.useCallback)(e=>{if("free"===e){window.location.href="/signup";return}let t={planId:e,planType:"pro",timestamp:Date.now(),price:ed(e),limit:(0,u.RL)(e)};localStorage.setItem(_,JSON.stringify(t)),window.location.href="/signup"},[ed]),e_=(()=>{let e=(0,o.f)(m);return t=>{let{targetPlan:a,scenario:l}=t;e({childProps:{targetPlan:a,scenario:l,onClose:()=>e(!1)}})}})(),eN=(0,s.useCallback)(async e=>{(null==c?void 0:c.id)&&await P({plan:e,workspaceId:c.id,grandfatheredDiscount:V,planType:X,changeType:"upgrade",useStudentDiscount:"studentDiscount"==R})},[c,P,V,X,R]),ek=(0,s.useCallback)(async e=>{n.Ay.capture(f.aw.PLAN_UPGRADE_CLICKED,{current_plan_id:K.id,current_plan_type:K.type,target_plan_id:e,target_plan_type:X,plan_type:(0,u.m6)(e),plan_price:ed(e)});let t=function(e,t,a){if("annual"===a||"annual"===e.type)return null;let l=(0,u.m6)(e.id),r=(0,u.m6)(t);return"biz"===l&&"pro"===r?null:"pro"===l&&"biz"===r?"PRO_TO_BIZ_UPGRADE":"pro"===l&&"pro"===r?"PRO_TO_PRO_UPGRADE":"biz"===l&&"biz"===r?"BIZ_TO_BIZ_UPGRADE":null}(K,e,X);t?e_({targetPlan:e,scenario:t}):await eN(e)},[K,X,ed,eN,e_]),eC=(0,s.useCallback)(()=>{es(v.VL.FREE)},[]),eP=(0,s.useCallback)(e=>{if("annual"===X)return 2*(0,u.jL)({id:e,type:"monthly"})},[X]),eS=(0,o.f)(g.u),eE=(0,s.useCallback)(()=>{c&&eS({childProps:{workspace:c,onClose:()=>eS(!1)},dialogProps:{onOpenChange:e=>{e||es(null)}}})},[eS,c]);return(0,l.jsx)(N.Provider,{value:{currentPlan:K,selectedProPlan:et,setSelectedProPlan:ea,selectedBizPlan:el,setSelectedBizPlan:er,planType:X,setPlanType:Q,pricingScenario:R,setPricingScenario:O,getDisplayPrice:ed,showFreePlan:ec,showKtloPlan:eu,showProPlan:!0,showBizPlan:!0,showEnterprisePlan:ep,showProDropdown:!U,showBizDropdown:!U,isLoggedOut:U,isOwner:q,isEditor:$,isMemberOfWorkspace:Z,shouldDisableWorkspaceAdminActions:!U&&($||H||!U&&"viewer"===k),userEmail:ex,scheduledPlan:B,discountPercent:Y,getSavingsAmount:eP,handleUpgradeClicked:ek,handleUpgradeConfirmed:eN,handleLoggedOutUpgrade:ej,getButtonVariant:ev,getButtonText:eh,getPlanComparisonStatus:eg,createPortalSession:F,isCreatePortalSessionLoading:A,cancelSubscription:z,isCancelSubscriptionLoading:L,cancelSubscriptionChanges:W,isCancelSubscriptionChangesLoading:T,checkoutLoading:E,numberOfPlansShown:eb,freePlanButtonVariant:U?"twilight":"link",proPlanButtonVariant:ew,bizPlanButtonVariant:ey,isPlanDowngrade:em,targetDowngradePlan:en,setTargetDowngradePlan:es,setFreePlanAsTarget:eC,newWorkspaceSelectedPlan:ei,setNewWorkspaceSelectedPlan:eo,onDowngradeClick:eE},children:t})},C=()=>{let e=(0,s.useContext)(N);if(!e)throw Error("usePricing must be used within a PricingProvider");return e}},4141:(e,t,a)=>{"use strict";a.d(t,{Separator:()=>i});var l=a(99289),r=a(32075),n=a(11405),s=a(26551);let i=n.forwardRef((e,t)=>{let{className:a,orientation:n="horizontal",decorative:i=!0,...o}=e;return(0,l.jsx)(r.b,{ref:t,decorative:i,orientation:n,className:(0,s.cn)("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",a),...o})});i.displayName=r.b.displayName},4745:(e,t,a)=>{"use strict";a.d(t,{R:()=>ef,u:()=>ex});var l=a(99289),r=a(22291),n=a(11405),s=a(2906),i=a(69201),o=a(13851),d=a(39627),c=a(49944),u=a(6072),p=a(97757),m=a(86077),g=a(97115),h=a(20234),x=a(4141),f=a(52983),b=a(99017),v=a(26551),w=a(53417);let y={BAR_HEIGHT:11,LINE_EXTENSION:4},j=e=>{let{usage:t,includedLimit:a=_,payAsYouGoLimit:r,isPro:s=!1,payAsYouGoEnabled:i=!1,className:o}=e,{includedLinePosition:d,payAsYouGoLinePosition:u,segments:p,labelStyles:m,headerSummary:g,includedAriaNow:h,tooltips:x}=function(e){let{usage:t,includedLimit:a,payAsYouGoLimit:l,isPro:r=!1,payAsYouGoEnabled:s=!1}=e,i=(0,n.useMemo)(()=>1.2*Math.max(t,l?Math.max(a,l):a),[t,a,l]),o=a/i*100,d=l?l/i*100:null,c=(0,n.useMemo)(()=>{let e={normal:0,overIncluded:0,overLimit:0};if(t<=a)e.normal=t/i*100;else{e.normal=a/i*100;let n=t-a;r&&s&&l?t<=l?e.overIncluded=n/i*100:(e.overIncluded=(l-a)/i*100,e.overLimit=(t-l)/i*100):e.overLimit=n/i*100}return e},[t,a,l,r,s,i]),u=(0,n.useMemo)(()=>{if(!d)return{included:{left:"50%",transform:"translateX(-50%)"},payg:null};let e=Math.abs(d-o);return e<5?{included:{left:"50%",transform:"translateX(calc(-100% - 4px))"},payg:{left:"50%",transform:"translateX(calc(0% + 4px))"}}:e<22?{included:{left:"50%",transform:"translateX(-100%)"},payg:{left:"50%",transform:"translateX(0%)"}}:{included:{left:"50%",transform:"translateX(-50%)"},payg:{left:"50%",transform:"translateX(-50%)"}}},[d,o]),p=(0,n.useMemo)(()=>{if(t<=a)return 0;let e=t-a;return r&&s&&l?Math.min(e,l-a):0},[t,a,r,s,l]),m=e=>"$".concat(e.toFixed(2)),g=(0,n.useMemo)(()=>t<=a?"$0 monthly costs":r&&s&&l?t<=l?"".concat(m(t-a)," pay-as-you-go usage"):"".concat(m(t-l)," over budget limit"):"".concat(m(t-a)," over included limit"),[t,a,r,s,l]),h=(0,n.useMemo)(()=>({included:"".concat(m(Math.min(t,a))," included usage (no cost)"),payg:l&&r&&s?"".concat(m(Math.min(t-a,l-a))," pay-as-you-go (cost: ").concat(m(Math.min(t-a,l-a)),")"):null,overLimit:t>a?l&&t>l?"".concat(m(t-l)," over budget limit"):"".concat(m(t-a)," over included limit"):null}),[t,a,l,r,s]);return{maxVisibleRange:i,includedLinePosition:o,payAsYouGoLinePosition:d,segments:c,labelStyles:u,usageCost:p,headerSummary:g,includedAriaNow:Math.min(t,a),tooltips:h}}({usage:t,includedLimit:a,payAsYouGoLimit:r,isPro:s,payAsYouGoEnabled:i});return(0,l.jsxs)("div",{className:(0,v.cn)("w-full",o),children:[(0,l.jsxs)("div",{className:"mb-3 flex items-center justify-between text-sm",children:[(0,l.jsxs)("p",{className:"flex items-center gap-2 text-base font-medium text-foreground",children:["Cloud Usage",(0,l.jsx)(w.E,{variant:"affirmative",className:"text-xs",children:"Private Beta"})]}),(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:"$0 monthly costs"})]}),(0,l.jsx)("div",{className:"relative mb-4",style:{padding:"".concat(y.LINE_EXTENSION,"px 0")},children:(0,l.jsxs)("div",{className:"relative h-full w-full overflow-visible rounded-md bg-muted-active",style:{height:"".concat(y.BAR_HEIGHT,"px")},children:[(0,l.jsxs)("div",{className:"relative h-full",children:[(0,l.jsxs)(b.m_,{delayDuration:0,children:[(0,l.jsx)(b.k$,{asChild:!0,children:(0,l.jsx)("div",{className:"absolute left-0 top-0 h-full cursor-pointer rounded-l-md bg-blue-600 transition-all duration-300",style:{width:"calc(".concat(p.normal,"% - 2px)"),minWidth:"8px"},role:"progressbar","aria-valuenow":h,"aria-valuemin":0,"aria-valuemax":a,"aria-label":"Included usage"})}),(0,l.jsx)(b.ZI,{children:(0,l.jsx)("div",{children:x.included})})]}),p.overIncluded>0&&(0,l.jsxs)(b.m_,{delayDuration:0,children:[(0,l.jsx)(b.k$,{asChild:!0,children:(0,l.jsx)("div",{className:"absolute top-0 h-full translate-x-1 cursor-pointer bg-blue-400 transition-all duration-300",style:{left:"".concat(p.normal,"%"),width:"calc(".concat(p.overIncluded,"% - 6px)")},"aria-label":"Pay-as-you-go usage"})}),(0,l.jsx)(b.ZI,{children:(0,l.jsx)("div",{children:x.payg})})]}),p.overLimit>0&&(0,l.jsxs)(b.m_,{delayDuration:0,children:[(0,l.jsx)(b.k$,{asChild:!0,children:(0,l.jsx)("div",{className:(0,v.cn)("absolute top-0 h-full translate-x-1 cursor-pointer bg-warning-primary transition-all duration-300",(0===p.overIncluded&&p.normal,""),0===p.normal&&0===p.overIncluded?"rounded-l-md":"","rounded-r-md"),style:{left:"".concat(p.normal+p.overIncluded,"%"),width:"calc(".concat(p.overLimit,"% - 2px)")},"aria-label":"Usage over limit"})}),(0,l.jsx)(b.ZI,{children:(0,l.jsx)("div",{children:x.overLimit})})]})]}),(0,l.jsx)("div",{className:"absolute z-10 w-0.5 rounded-full bg-muted-foreground",style:{left:"".concat(d,"%"),top:"-".concat(y.LINE_EXTENSION,"px"),height:"".concat(y.BAR_HEIGHT+2*y.LINE_EXTENSION,"px")},"aria-label":"Included usage limit",children:(0,l.jsxs)("span",{className:"absolute whitespace-nowrap text-sm text-muted-foreground",style:{bottom:"-24px",...m.included},children:["Included ($",a,")"]})}),u&&i&&(0,l.jsx)("div",{className:"absolute z-10 w-0.5 rounded-full bg-muted-foreground",style:{left:"".concat(u,"%"),top:"-".concat(y.LINE_EXTENSION,"px"),height:"".concat(y.BAR_HEIGHT+2*y.LINE_EXTENSION,"px")},"aria-label":"Pay-as-you-go limit",children:(0,l.jsxs)("span",{className:"absolute whitespace-nowrap text-sm text-muted-foreground",style:{bottom:"-24px",...m.payg},children:["Budget ($",r,")"]})})]})}),(0,l.jsx)("div",{className:"mb-3 text-sm text-muted-foreground",children:"During private beta, usage is entirely free—even if you exceed the included amount."}),(0,l.jsx)("div",{className:"flex w-full justify-start",children:(0,l.jsx)(c.$,{variant:"outline",size:"sm",asChild:!0,children:(0,l.jsx)("a",{href:"https://docs.lovable.dev/features/cloud",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground",children:"Learn more"})})})]})},_=25,N=e=>{var t,a;let{workspace:r,isPro:s,usageData:i}=e,[o,d]=(0,f.V)("cloud_intro_seen",{defaultValue:!1}),[c]=(0,n.useState)(!o);(0,n.useEffect)(()=>{c&&d(!0)},[c,d]);let{isProPlan:u}=(0,g.cb)(null==r?void 0:r.plan),m=null!=(a=null!=(t=null==i?void 0:i.used)?t:null==r?void 0:r.backend_total_used_in_billing_period)?a:0;return(0,l.jsx)("div",{className:"mx-auto flex w-full flex-col gap-4 lg:max-w-[888px]",children:(0,l.jsx)("div",{className:"flex flex-col gap-6",children:(0,l.jsxs)(h.Zp,{className:"gap-0 rounded-xl bg-muted p-0 shadow-sm",children:[c&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex flex-col gap-2 p-4 pb-5 text-sm",children:[(0,l.jsx)("div",{className:"mb-1 flex items-center justify-between text-base font-medium",children:"Ship faster with Lovable"}),(0,l.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,l.jsx)(p.A,{name:"check",size:"small",className:"text-muted-foreground"}),(0,l.jsx)("p",{children:"One platform for database, hosting, auth, and storage"})]}),(0,l.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,l.jsx)(p.A,{name:"check",size:"small",className:"text-muted-foreground"}),(0,l.jsx)("p",{children:"Zero costs in beta, zero setup forever"})]}),(0,l.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,l.jsx)(p.A,{name:"check",size:"small",className:"text-muted-foreground"}),(0,l.jsxs)("p",{children:["After beta, you get $",_,"/month free, pay-as-you-go billing"]})]}),(0,l.jsxs)("a",{href:"https://docs.lovable.dev/features/cloud",target:"_blank",rel:"noopener noreferrer",className:"ml-6 flex items-center gap-1 text-sm text-muted-foreground underline",children:["Read more",(0,l.jsx)(p.A,{name:"arrow_outward",size:"small"})]})]}),(0,l.jsx)(x.Separator,{className:"bg-muted-border"})]}),(0,l.jsx)("div",{className:"flex h-full flex-col gap-6 p-4 pb-4",children:(0,l.jsx)(j,{usage:m,includedLimit:_,isPro:null!=s?s:u})})]})})})};var k=a(19618),C=a(48591),P=a(71055),S=function(e){return e.SUGGEST_LOWER_PLAN="SUGGEST_LOWER_PLAN",e.FEATURES_TO_TRY="FEATURES_TO_TRY",e.KTLO_OFFER="KTLO_OFFER",e.FEEDBACK="FEEDBACK",e.FINAL_CONFIRMATION="FINAL_CONFIRMATION",e}({}),E=a(71302);let A=(0,n.createContext)(void 0),D=e=>{let{children:t,targetPlan:a,onCancel:r,workspace:i}=e,o=!!(0,C.fT)(),d=!!(0,C.H4)(),c=i.plan!==P.G.KTLO&&o&&a===E.VL.FREE,u=(0,n.useCallback)(()=>c?S.KTLO_OFFER:S.FEEDBACK,[c]),p=(0,n.useMemo)(()=>u(),[u]),[m,g]=(0,n.useState)(p),[h,x]=(0,n.useState)({reason:""}),[f,b]=(0,n.useState)(!1),v=(0,s.et)(),{toCheckout:w}=(0,k.R)(),y=async e=>{b(!0);try{let t=null!=e?e:a;(null==i?void 0:i.id)&&(t&&t!==E.VL.FREE?await w({plan:t,workspaceId:i.id,grandfatheredDiscount:!1,planType:v.planType,changeType:"downgrade"}):d?(await v.cancelSubscription(),r()):await v.createPortalSession())}finally{b(!1)}},j=async()=>{b(!0);try{(null==i?void 0:i.id)&&await w({plan:E.VL.KTLO,workspaceId:i.id,grandfatheredDiscount:!1,planType:"monthly",changeType:"downgrade"})}catch(e){b(!1)}},_={currentStep:m,feedback:h,currentPlan:i.plan,targetPlan:null!=a?a:E.VL.FREE,shouldShowKtloOffer:c,setCurrentStep:g,setFeedback:x,onCancel:r,onConfirm:y,onSwitchToKtlo:j,isLoading:f||v.isCancelSubscriptionLoading,getNextStepAfterSuggestLowerPlan:()=>S.FEATURES_TO_TRY,getNextStepAfterFeatures:u,getNextStepAfterKtlo:()=>S.FEEDBACK,getNextStepAfterFeedback:()=>S.FINAL_CONFIRMATION,getPreviousStepBeforeFeedback:()=>c?S.KTLO_OFFER:S.FEATURES_TO_TRY,getPreviousStepBeforeFinalConfirmation:()=>S.FEEDBACK};return(0,l.jsx)(A.Provider,{value:_,children:t})},L=()=>{let e=(0,n.useContext)(A);if(void 0===e)throw Error("useDowngrade must be used within a DowngradeProvider");return e};var I=a(81797),T=a(88852),R=a(82162),O=a(33979),F=a(24159);let M=[{value:"technical_issues",label:"I am having too many technical issues"},{value:"too_expensive",label:"It's too expensive"},{value:"not_using",label:"I'm not using Lovable enough"},{value:"missing_features",label:"It's missing features"},{value:"switched_to_competitor",label:"I switched to a competitor"},{value:"other",label:"Other reason"}],z=[{id:"custom-domains",name:"Custom domains",description:"Connect your own domain to your projects",icon:"link"},{id:"team-collab",name:"Team collaboration",description:"Invite team members to work together",icon:"group"},{id:"visual-editor",name:"Visual editor",description:"Edit the frontend of your project instantly",icon:"draw"},{id:"code-editor",name:"Code editor",description:"Edit the backend of your project in code",icon:"code"},{id:"chat-mode",name:"Chat mode",description:"Plan your next step with AI",icon:"chat"},{id:"security-checks",name:"Security checks",description:"Run checks when publishing with Supabase to find and fix vulnerabilities",icon:"security"}],W=e=>{let{title:t,description:a}=e;return(0,l.jsxs)("div",{className:"flex flex-col items-start gap-4",children:[(0,l.jsx)(m.Fy,{className:"h-9"}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(u.L3,{className:"text-2xl font-medium md:text-3xl",children:t}),a&&(0,l.jsx)(u.rr,{className:"text-base text-muted-foreground",children:a})]})]})},K=()=>{let e=L();return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,l.jsx)(W,{title:"Why are you canceling?",description:"We use this information to improve our product."}),(0,l.jsx)(O.z,{value:e.feedback.reason,onValueChange:t=>e.setFeedback({...e.feedback,reason:t}),className:"flex flex-col gap-1",children:M.map(t=>(0,l.jsxs)("div",{className:(0,v.cn)("flex cursor-pointer items-center gap-3 rounded-lg px-4 py-3 transition-colors",e.feedback.reason===t.value?"bg-primary/5":"hover:bg-muted/50"),onClick:()=>e.setFeedback({...e.feedback,reason:t.value}),children:[(0,l.jsx)(O.C,{value:t.value,id:t.value}),(0,l.jsx)(R.Label,{htmlFor:t.value,className:"text-base font-normal leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:t.label})]},t.value))}),(0,l.jsx)(T.p,{placeholder:"Tell us more about your decision...",className:"h-12",maxLength:500,value:e.feedback.additionalNotes,onChange:t=>e.setFeedback({...e.feedback,additionalNotes:t.target.value})}),(0,l.jsxs)("div",{className:"flex flex-col gap-4 pt-2",children:[(0,l.jsxs)(c.$,{variant:"affirmative",className:"w-full",onClick:()=>{I.Ay.capture(F.rz.FEEDBACK.KEEP_PLAN_CLICKED),e.onCancel()},children:["Keep Lovable ",(0,g._R)(e.currentPlan||"unknown")]}),(0,l.jsx)(c.$,{variant:"outline",className:"w-full",onClick:()=>{I.Ay.capture(F.rz.FEEDBACK.CONTINUE_CLICKED,{reason:e.feedback.reason}),e.setCurrentStep(e.getNextStepAfterFeedback())},children:"Downgrade plan"})]})]})})};var B=a(6919),U=a(98213),G=a(99490),V=a(31288),q=a(33256),$=a(69147);let Z=e=>{let{children:t,className:a}=e;return(0,l.jsx)("div",{className:(0,v.cn)("rounded-xl border bg-background p-5",a),children:t})},H=G.Ik({reason:G.Yj().optional(),additional_notes:G.Yj().max(500,"Additional notes must be less than 500 characters").optional()}),Y=()=>{let e=L(),t=(0,q.Pg)(),a=(0,B.n)({mutationFn:async()=>{let a=H.parse({reason:e.feedback.reason,additional_notes:e.feedback.additionalNotes});await t.post("/user/cancellation",a),await e.onConfirm()},onSuccess:()=>{I.Ay.capture(F.rz.FINAL_CONFIRMATION.CONFIRM_CLICKED,{from_plan:e.currentPlan,to_plan:e.targetPlan})},onError:e=>{if($.logging.error("Error submitting feedback:",e),e instanceof V.G){let t=e.errors[0];U.oR.error("Validation Error",{description:t.message})}else{var t;U.oR.error("Error",{description:(null==(t=e.data)?void 0:t.detail)||"Failed to submit feedback"})}}}),r=((e,t)=>{let a=(0,g.m6)(e),l=(0,g.m6)(t),r=(0,g.RL)(e),n=(0,g.RL)(t);if("pro"===a){if("pro"===l)return["Credits will decrease from ".concat(r," to ").concat(n," per month"),"Credit rollover maximum will be adjusted to the new plan","Same pro features will be maintained at a lower tier"];if("free"===l)return["All new projects will be public","A Lovable badge will be added to all new projects","You will lose team management features","Custom domains will be removed","Credits will reset to 5 per day","No credit rollovers"]}if("biz"===a){if("biz"===l)return["Credits will decrease from ".concat(r," to ").concat(n," per month"),"Credit rollover maximum will be adjusted to the new plan","Same business features will be maintained at a lower tier"];if("pro"===l)return["No SSO","No design templates","No data opt out","No personal projects"];if("free"===l)return["No SSO","No design templates","No data opt out","No personal projects","All new projects will be public","A Lovable badge will be added to all new projects","You will lose team management features","Custom domains will be removed","Credits will reset to 5 per day","No credit rollovers"]}return"ktlo"===l?["Credits will change from ".concat(r," per month to freemium (5 per day, up to 30 per month)"),"No credit rollovers","You keep: Pro features: Private Projects, No Lovable Badge, Roles and Permissions, Custom Domains"]:[]})(e.currentPlan,e.targetPlan);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(W,{title:"Continue downgrading?",description:"Your projects are live. Your team is set up. Don't lose it all."}),(0,l.jsxs)(Z,{children:[(0,l.jsx)("div",{className:"mb-4 text-lg font-medium",children:"Here is what will change:"}),(0,l.jsxs)("ul",{className:"flex flex-col gap-4",children:[0===r.length&&(0,l.jsxs)("li",{className:"flex items-start gap-3",children:[(0,l.jsx)(p.A,{name:"close",className:"size-5"}),(0,l.jsx)("span",{children:"Features of your current plan"})]}),r.map((e,t)=>(0,l.jsxs)("li",{className:"flex items-start gap-3",children:[(0,l.jsx)(p.A,{name:"close",className:"size-5 text-muted-foreground"}),(0,l.jsx)("span",{children:e})]},t))]}),(0,l.jsxs)(c.$,{variant:"outline",className:"mt-4 w-full",onClick:()=>{I.Ay.capture(F.rz.FINAL_CONFIRMATION.KEEP_PLAN_CLICKED),e.onCancel()},children:["Keep Lovable ",(0,g._R)(e.currentPlan||"unknown")]})]}),(0,l.jsx)(c.$,{variant:"destructive",className:"w-full",onClick:()=>a.mutate(),loading:a.isPending,children:"Confirm cancellation"})]})},X=()=>{let e=L(),t=async()=>{I.Ay.capture(F.rz.KTLO_OFFER.SWITCH_CLICKED),await e.onSwitchToKtlo()};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(W,{title:"Switch to Lite",description:"Try our new Lite plan and retain important features that keep your project going."}),(0,l.jsxs)(Z,{children:[(0,l.jsx)("div",{className:"mb-2 text-lg font-medium",children:"Lite plan"}),(0,l.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-3xl font-medium md:text-4xl",children:"$15"}),(0,l.jsx)("span",{className:"text-base font-medium text-muted-foreground",children:"per month"}),(0,l.jsx)("span",{className:"rounded bg-success px-2 py-0.5 text-xs text-success-foreground",children:"40% off"})]}),(0,l.jsx)("ul",{className:"mt-4 flex flex-col gap-3",children:["5 daily credits","Keep custom domains","No Lovable badge","Team settings stay in place","Access to private projects"].map((e,t)=>(0,l.jsxs)("li",{className:"flex items-center gap-2",children:[(0,l.jsx)(p.A,{name:"check",className:"size-5"}),(0,l.jsx)("span",{children:e})]},t))}),(0,l.jsx)(c.$,{className:"mt-6 w-full",variant:"affirmative",onClick:t,loading:e.isLoading,children:"Switch to Lite"})]}),(0,l.jsx)(c.$,{variant:"outline",className:"w-full",onClick:()=>{I.Ay.capture(F.rz.KTLO_OFFER.CONTINUE_DOWNGRADE_CLICKED),e.setCurrentStep(e.getNextStepAfterKtlo())},children:"Downgrade plan"})]})},Q=()=>{let e=L();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(W,{title:"Have you tried these features?"}),(0,l.jsxs)(Z,{children:[(0,l.jsx)("div",{className:"flex flex-col gap-1.5 md:gap-2",children:z.map(e=>(0,l.jsxs)("div",{className:"flex items-start gap-3 rounded-lg px-2 py-2 transition-colors md:gap-4 md:px-3",children:[(0,l.jsx)("span",{className:"mt-1.5 select-none text-base md:mt-2 md:text-lg",children:(0,l.jsx)(p.A,{name:e.icon,className:"h-4 w-4"})}),(0,l.jsxs)("div",{className:"flex flex-1 flex-col gap-0.5",children:[(0,l.jsx)(R.Label,{htmlFor:e.id,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:e.name}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:e.description})]})]},e.id))}),(0,l.jsxs)(c.$,{variant:"affirmative",className:"mt-4 w-full",onClick:()=>{I.Ay.capture(F.rz.FEATURE_USAGE.KEEP_PLAN_CLICKED),e.onCancel()},children:["Keep Lovable ",(0,g._R)(e.currentPlan||"unknown")]})]}),(0,l.jsx)(c.$,{variant:"outline",onClick:()=>{I.Ay.capture(F.rz.FEATURE_USAGE.CONTINUE_CLICKED),e.setCurrentStep(e.getNextStepAfterFeatures())},children:"Downgrade plan"})]})};var J=a(43328),ee=a(93652),et=a(16161),ea=a(99605);let el=()=>{let e=L(),t=(0,s.et)(),a=(0,J.useCurrentWorkspaceStore)(e=>e.currentWorkspace),{isEnterprisePlan:r}=(0,g.cb)(t.currentPlan.id),i=(0,n.useMemo)(()=>(0,g.e3)(e.currentPlan,e.currentPlan.startsWith(ea.lV)?"biz":"pro"),[e.currentPlan]),o=(0,n.useMemo)(()=>(null==a?void 0:a.plan)&&i.length>0&&!i.some(e=>e===(null==a?void 0:a.plan))?i[0]:null,[i,null==a?void 0:a.plan]),[d,u]=(0,n.useState)(o);(0,n.useEffect)(()=>{t.setPlanType("monthly")},[t.setPlanType]),(0,n.useEffect)(()=>{(null==a?void 0:a.plan)&&!d&&e.setCurrentStep(e.getNextStepAfterSuggestLowerPlan())},[null==a?void 0:a.plan,d,e]);let p=async()=>{d&&(I.Ay.capture(F.rz.SUGGEST_LOWER_PLAN.DOWNGRADE_CREDITS_CLICKED,{current_plan_id:e.currentPlan,target_plan_id:d,target_plan_type:t.planType,plan_price:t.getDisplayPrice(d)}),await e.onConfirm(d))};return d?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(W,{title:"Downgrade now",description:"Do you want to downgrade by changing your monthly credits?"}),(0,l.jsxs)(Z,{children:[(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("div",{className:"text-lg font-medium",children:"Reduce monthly credits"}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)("span",{className:"text-3xl font-medium md:text-4xl",children:["$",t.getDisplayPrice(d)]}),(0,l.jsx)("span",{className:"text-base font-medium text-muted-foreground",children:"per month"})]}),(0,l.jsx)(ee.h,{options:i,selectedOption:d,disabled:t.shouldDisableWorkspaceAdminActions,onSelect:u})]}),(0,l.jsx)(c.$,{className:"mt-4 w-full",variant:"affirmative",disabled:d===e.currentPlan||r||t.shouldDisableWorkspaceAdminActions,onClick:p,loading:e.isLoading,children:"Downgrade credits"})]}),(0,l.jsx)(c.$,{variant:"outline",onClick:()=>{I.Ay.capture(F.rz.SUGGEST_LOWER_PLAN.CONTINUE_CLICKED),e.setCurrentStep(e.getNextStepAfterSuggestLowerPlan())},children:"Downgrade plan"})]}):(0,l.jsx)("div",{className:"p-6",children:(0,l.jsx)(et.E,{className:"h-16 w-full"})})},er=()=>{let e=L();return(0,l.jsx)(l.Fragment,{children:(()=>{switch(e.currentStep){case S.SUGGEST_LOWER_PLAN:return(0,l.jsx)(el,{});case S.FEATURES_TO_TRY:return(0,l.jsx)(Q,{});case S.KTLO_OFFER:return(0,l.jsx)(X,{});case S.FEEDBACK:return(0,l.jsx)(K,{});case S.FINAL_CONFIRMATION:return(0,l.jsx)(Y,{});default:return null}})()})};var en=a(1596),es=a(27899),ei=a(68939),eo=a(18883),ed=a(2418),ec=a(13070);let eu=e=>{let{workspace:t}=e,a=(0,g._R)(t.plan),r=t.billing_period_end_date?(0,en.GP)((0,ec.ay)(t.billing_period_end_date),"MMM d, yyyy"):"";return(0,l.jsxs)("div",{className:"flex items-center justify-start gap-4",children:[(0,l.jsx)(ed.default,{src:"/img/logo/lovable-logo-icon.svg",alt:"Lovable",width:36,height:36,className:"h-9 w-9"}),(0,l.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,l.jsxs)("p",{className:"text-base font-medium text-foreground",children:["You're on ",a," Plan"]}),(0,l.jsxs)("p",{className:"text-base text-muted-foreground",children:[t.plan_scheduled?"Cancels":"Renews"," ",r]})]})]})},ep=e=>{let{workspace:t,open:a,onOpenChange:r}=e,{createPortalSession:n,isCreatePortalSessionLoading:i,setFreePlanAsTarget:o,onDowngradeClick:d}=(0,s.et)(),p=async()=>{await n()},m=async()=>{await n()},g="free"===t.plan_scheduled;return(0,l.jsx)(u.lG,{open:a,onOpenChange:()=>{r(!1)},children:(0,l.jsxs)(u.Cf,{className:"sm:max-w-[500px]",children:[(0,l.jsxs)(u.c7,{children:[(0,l.jsx)(u.L3,{children:"Manage Plan"}),(0,l.jsx)(u.rr,{children:"Subscription & Billing Settings"})]}),(0,l.jsx)("div",{className:"flex flex-col gap-4 border-y py-4",children:(0,l.jsxs)("div",{className:"flex items-center justify-between gap-4 rounded-xl bg-muted p-4",children:[(0,l.jsx)(eu,{workspace:t}),g?(0,l.jsx)(c.$,{onClick:m,disabled:i,variant:"outline",children:i?"Opening...":"Cancel Downgrade"}):(0,l.jsx)(c.$,{variant:"outline",onClick:()=>{o(),d(),r(!1)},children:"Downgrade to Free"})]})}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(c.$,{variant:"secondary",onClick:p,disabled:i,className:"w-5/6",children:i?"Opening...":"View Invoices"}),(0,l.jsx)(c.$,{onClick:p,disabled:i,className:"w-full",children:i?"Opening...":"Payment Preferences"})]})]})})},em=e=>{let{workspace:t,shouldDisableWorkspaceAdminActions:a}=e,{createPortalSession:r,isCreatePortalSessionLoading:n,cancelSubscriptionChanges:i,isCancelSubscriptionChangesLoading:o}=(0,s.et)(),d=(0,C.H4)();if(!t.plan_scheduled)return null;let u=(0,g._R)(t.plan),m=(0,g._R)(t.plan_scheduled),h=t.billing_period_end_date?(0,en.GP)((0,ec.ay)(t.billing_period_end_date),"MMM d, yyyy"):"",x=d?o:n,f=async()=>{d?await i():r()};return(0,l.jsx)("div",{className:"space-y-3",children:(0,l.jsx)("div",{className:"space-y-3 rounded-md bg-warning p-3",children:(0,l.jsxs)("div",{className:"flex items-start gap-2",children:[(0,l.jsx)(p.A,{name:"info",size:"small",className:"mt-0.5 flex-shrink-0 text-warning-primary"}),(0,l.jsxs)("div",{className:"flex w-full flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"text-sm font-medium text-warning-primary",children:["Pending changes scheduled for ",h]}),(0,l.jsxs)("p",{className:"text-sm text-warning-primary",children:[u," → ",m]})]}),(0,l.jsx)("div",{children:(0,l.jsx)(c.$,{variant:"warning",size:"default",disabled:x||a,onClick:f,children:x?"Canceling...":"Cancel changes"})})]})]})})})},eg=e=>{let{workspace:t,myWorkspaceRole:a}=e,[r,i]=(0,n.useState)(!1),o=(0,ei.D)(t),{currentPlan:d,shouldDisableWorkspaceAdminActions:u}=(0,s.et)(),m=(0,es.IJ)(o.currentlyConsuming,o.sources),x=(0,g._R)(d.id),f=t.plan,{isPaidPlan:b,isLegacyPlan:v,isEnterprisePlan:w}=(0,g.cb)(f),y="free"===f||"ktlo"===f,j=()=>{let e="ambassador"===t.plan,a="ktlo"===t.plan;return(!v&&!e&&!a||(null==t?void 0:t.billing_period_credits_limit)!==0&&(null==t?void 0:t.billing_period_credits_limit)!==void 0)&&"free"!==t.plan&&!!t.billing_period_credits_limit&&!(t.billing_period_credits_limit<=0)&&!0},_=(()=>{if(y)return{text:"No credits will rollover",icon:"close"};if(!j())return null;let e="annual"===t.plan_type,a=t.billing_period_credits_limit;return{text:"Up to ".concat((0,eo.Q)(e?12*a:a)," credits rollover"),icon:"check"}})(),N=(()=>{if(y)return"Daily credits reset at midnight UTC";if(!j()||!o.creditsResetDate||(null==t?void 0:t.plan_scheduled)==="free")return null;let e=(e=>{let t=new Date(e);return t.setTime(t.getTime()+6e5),t})(o.creditsResetDate),a=(0,en.GP)(e,"dd MMM 'at' h:mm a"),l=null==t?void 0:t.billing_period_credits_limit;return l?"".concat((0,eo.Q)(l)," credits reset on ").concat(a):"Monthly credits reset on ".concat(a)})();return b?(0,l.jsxs)("div",{className:"mx-auto flex w-full flex-col gap-4 lg:max-w-[888px]",children:[(0,l.jsx)(em,{workspace:t,shouldDisableWorkspaceAdminActions:u}),(0,l.jsxs)("div",{className:"flex flex-col gap-6 lg:grid lg:grid-cols-3",children:[(0,l.jsx)(h.Zp,{className:"rounded-xl bg-muted p-4 shadow-sm",children:(0,l.jsxs)("div",{className:"flex h-full flex-col justify-between gap-4",children:[(0,l.jsx)(eu,{workspace:t}),!w&&(0,l.jsx)("div",{className:"flex justify-start",children:(0,l.jsx)(c.$,{variant:"outline",size:"default",disabled:u,onClick:()=>i(!0),children:"Manage"})})]})}),(0,l.jsx)(h.Zp,{className:"col-span-2 rounded-xl bg-muted p-4 shadow-sm outline outline-1 outline-offset-[-1px] outline-border",children:(0,l.jsxs)("div",{className:"flex h-full flex-col gap-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"text-base font-medium text-foreground",children:"Credits remaining"}),(0,l.jsxs)("p",{className:"text-sm font-normal text-muted-foreground",children:[(0,eo.Q)(o.totalRemaining)," of"," ",(0,eo.Q)(o.totalAllocation)]})]}),(0,l.jsx)(es.bY,{progressData:o}),(o.currentlyConsuming||0===o.totalRemaining)&&(0,l.jsx)("div",{className:"flex flex-col gap-2",children:(0,l.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 sm:order-2",children:[(0,l.jsx)("div",{className:"ml-1 mr-0.5 h-2 w-2 rounded-full ".concat(m)}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,es.bT)(o.currentlyConsuming)})]}),(_||N)&&(0,l.jsxs)("div",{className:"flex flex-col gap-2 sm:order-1",children:[_&&(0,l.jsxs)("div",{className:"flex items-start gap-1.5",children:[(0,l.jsx)(p.A,{name:_.icon,size:"small",className:"mt-0.5 text-foreground"}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:_.text})]}),N&&(0,l.jsxs)("div",{className:"flex items-start gap-1.5",children:[(0,l.jsx)(p.A,{name:"check",size:"small",className:"mt-0.5 text-foreground"}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:N})]})]})]})})]})})]}),!w&&(0,l.jsx)(ep,{workspace:t,myWorkspaceRole:a,open:r,onOpenChange:i})]}):"inactive"!==f?(0,l.jsx)(h.Zp,{className:"flex w-full flex-col gap-4 bg-muted p-4",children:(0,l.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(0,l.jsxs)("span",{children:["You're currently on plan: ",(0,l.jsx)("span",{className:"font-medium capitalize",children:x}),". "]})," ",(0,l.jsx)(eh,{workspace:t,children:"Manage your payment preferences and view past invoices"}),", or change your plan below."]})}):void 0},eh=e=>{let{workspace:t,children:a}=e,{createPortalSession:r,isCreatePortalSessionLoading:n}=(0,k.R)();return(0,l.jsx)("span",{role:"button",tabIndex:0,onClick:()=>{n||r({workspaceId:t.id})},onKeyDown:e=>{n||("Enter"===e.key||" "===e.key)&&r({workspaceId:t.id})},className:"inline cursor-pointer underline disabled:opacity-50","aria-disabled":n,children:a})},ex=e=>{let{workspace:t,onClose:a}=e,{targetDowngradePlan:r,setTargetDowngradePlan:n}=(0,s.et)();return(0,l.jsx)(u.Cf,{className:"pointer-events-auto flex max-h-[95vh] flex-col gap-4 overflow-y-auto outline-none",children:(0,l.jsx)(D,{targetPlan:null!=r?r:void 0,onCancel:()=>{n(null),a()},workspace:t,children:(0,l.jsx)(er,{})})})},ef=e=>{let{workspace:t,myWorkspaceRole:a}=e,{setPricingScenario:h}=(0,s.et)(),x="inactive"===t.plan,[f,b]=(0,n.useState)(!1),v=(0,i.D)(),w=(0,g.cb)(t.plan).isEnterprisePlan,[y,j]=(0,n.useState)(!1),[_,k]=(0,n.useState)(null),C=(0,r.useSearchParams)();return(0,n.useEffect)(()=>{h("billing")},[h]),(0,n.useEffect)(()=>{let e=C.get("planChanged"),t=C.get("planName");if("true"===e&&t){k({planName:t}),j(!0);let e=new URL(window.location.href);e.searchParams.delete("planChanged"),e.searchParams.delete("planName"),window.history.replaceState({},"",e.toString())}},[C]),(0,l.jsxs)(d.Pt,{title:"Plans & Billing",value:"billing",docsLink:"https://docs.lovable.dev/user-guides/messaging-limits",children:[x?(0,l.jsxs)("span",{children:["Your subscription is currently ",(0,l.jsx)("span",{className:"font-medium",children:"inactive"}),". You can select a new plan below to restore full functionality to your workspace."]}):null,!f&&(0,l.jsx)(eg,{workspace:t,myWorkspaceRole:a}),v&&(0,l.jsx)(N,{workspace:t,isPro:(0,g.cb)(t.plan).isProPlan}),!w&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.s,{showStudentDiscountCard:!0}),(0,l.jsx)(u.lG,{open:y,onOpenChange:j,children:(0,l.jsxs)(u.Cf,{className:"gap-4 outline-none focus:ring-0",size:"md",hideCloseButton:!0,blurOverlay:!0,onInteractOutside:e=>{e.preventDefault(),e.stopPropagation()},children:[(0,l.jsxs)("div",{className:"flex flex-col items-start gap-4",children:[(0,l.jsx)(m.Fy,{className:"h-9"}),(0,l.jsxs)(u.c7,{children:[(0,l.jsxs)(u.L3,{className:"text-2xl md:text-3xl",children:["Plan successfully changed to ",null==_?void 0:_.planName,"!"]}),(0,l.jsx)(u.rr,{children:"Your new plan will be activated at the start of the next billing cycle."})]})]}),(0,l.jsx)(u.Es,{fullWidthButtons:!0,className:"flex-col gap-2",children:(0,l.jsxs)(c.$,{onClick:e=>{e.preventDefault(),e.stopPropagation(),j(!1),k(null),b(!1)},className:"w-full",children:[(0,l.jsx)(p.A,{name:"check",size:"small",className:"mr-2"}),"Got it!"]})})]})})]})]})}},5465:(e,t,a)=>{"use strict";a.d(t,{C:()=>l});var l=function(e){return e.SUBMITTED="submitted",e.SKIPPED="skipped",e.NOT_SHOWN="not_shown",e}({})},5531:(e,t,a)=>{"use strict";a.d(t,{rI:()=>u,hO:()=>w,SQ:()=>b,_2:()=>v,lp:()=>j,dc:()=>m,Hr:()=>h,Ht:()=>y,mB:()=>_,V0:()=>N,lv:()=>g,M5:()=>f,nV:()=>x,ty:()=>p});var l=a(99289),r=a(93307),n=a(90502),s=a(11405),i=a(26551),o=a(6072);class d extends s.Component{static getDerivedStateFromError(e){return{hasError:!0,componentStack:e.stack||"",error:e}}componentDidCatch(e,t){this.setState({componentStack:t.componentStack||"",error:e})}render(){if(this.state.hasError){var e;return(0,l.jsxs)("div",{style:{position:"absolute",top:0,left:0,zIndex:1e4,backgroundColor:"red"},children:[(0,l.jsx)("h2",{children:null==(e=this.state.error)?void 0:e.message}),(0,l.jsx)("p",{style:{whiteSpace:"pre-wrap"},children:this.state.componentStack})]})}return this.props.children}constructor(e){super(e),this.state={hasError:!1,componentStack:"",error:null}}}var c=a(97757);let u=e=>{let{...t}=e;return(0,l.jsx)(d,{children:(0,l.jsx)(o.MV.Provider,{value:{allowNestedDialog:!1},children:(0,l.jsx)(r.bL,{...t})})})},p=r.l9,m=r.ZL;r.YJ;let g=r.Pb,h=r.z6,x=s.forwardRef((e,t)=>{let{className:a,inset:s,children:o,hideChevron:d,...c}=e;return(0,l.jsxs)(r.ZP,{ref:t,className:(0,i.cn)("flex cursor-default select-none items-center gap-2 rounded-lg px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",a),...c,children:[o,!d&&(0,l.jsx)(n.vKP,{className:"ml-auto"})]})});x.displayName=r.ZP.displayName;let f=s.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)(r.G5,{ref:t,className:(0,i.cn)("z-[10000] min-w-32 overflow-hidden rounded-xl border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})});f.displayName=r.G5.displayName;let b=s.forwardRef((e,t)=>{let{className:a,sideOffset:n=4,...s}=e;return(0,l.jsx)(r.ZL,{children:(0,l.jsx)(r.UC,{ref:t,sideOffset:n,className:(0,i.cn)("z-[10000] min-w-32 overflow-hidden rounded-xl border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","origin-[var(--radix-dropdown-menu-content-transform-origin)]",a),...s})})});b.displayName=r.UC.displayName;let v=s.forwardRef((e,t)=>{let{className:a,inset:n,...s}=e;return(0,l.jsx)(r.q7,{ref:t,className:(0,i.cn)("relative flex cursor-default select-none items-center gap-2 rounded-lg px-2 py-1.5 text-sm text-foreground outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent [&>svg]:size-4 [&>svg]:shrink-0",n&&"pl-8",a),...s})});v.displayName=r.q7.displayName;let w=s.forwardRef((e,t)=>{let{className:a,children:s,checked:o,...d}=e;return(0,l.jsxs)(r.H_,{ref:t,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-lg py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent",a),checked:o,...d,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(r.VF,{children:(0,l.jsx)(n.Srz,{className:"h-4 w-4"})})}),s]})});w.displayName=r.H_.displayName;let y=s.forwardRef((e,t)=>{let{className:a,children:n,selectedIndicatorClassName:s,arrowLocation:o="start",...d}=e;return(0,l.jsxs)(r.hN,{ref:t,className:(0,i.cn)("relative flex cursor-default select-none items-center justify-start gap-x-1 rounded-lg px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent","start"===o&&"pl-7",a),...d,children:["start"===o&&(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(r.VF,{children:(0,l.jsx)(c.A,{name:"check_small",size:"default",className:(0,i.cn)("ml-auto",s)})})}),n,"end"===o&&(0,l.jsx)(r.VF,{children:(0,l.jsx)(c.A,{name:"check_small",size:"default",className:(0,i.cn)("ml-auto",s)})})]})});y.displayName=r.hN.displayName;let j=s.forwardRef((e,t)=>{let{className:a,inset:n,...s}=e;return(0,l.jsx)(r.JU,{ref:t,className:(0,i.cn)("px-2 py-1.5 text-sm font-medium",n&&"pl-8",a),...s})});j.displayName=r.JU.displayName;let _=s.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)(r.wv,{ref:t,className:(0,i.cn)("-mx-1 my-1 h-px bg-border",a),...n})});_.displayName=r.wv.displayName;let N=e=>{let{className:t,...a}=e;return(0,l.jsx)("span",{className:(0,i.cn)("ml-auto text-xs tracking-widest opacity-60",t),...a})};N.displayName="DropdownMenuShortcut"},6072:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>x,Es:()=>b,HM:()=>m,L3:()=>v,MV:()=>d,c7:()=>f,lG:()=>c,rr:()=>w,zM:()=>u});var l=a(99289),r=a(69764),n=a(90502),s=a(545),i=a(11405),o=a(26551);let d=(0,i.createContext)({allowNestedDialog:!0}),c=e=>{let{...t}=e;if(!(0,i.useContext)(d).allowNestedDialog){let e=Error("Dialogs must not be used inside of dropdowns or context menus. Look at RootDialog.tsx for a way to render a dialog using a hook or render the dialog above the dropdown or context menu");s.Cp(e)}return(0,i.useEffect)(()=>()=>{document.body.style.pointerEvents=""},[]),(0,l.jsx)(r.bL,{...t,onOpenChange:e=>{var a;e||setTimeout(()=>{document.body.style.pointerEvents=""},250),null==(a=t.onOpenChange)||a.call(t,e)}})},u=r.l9,p=r.ZL,m=r.bm,g=i.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)(r.hJ,{ref:t,className:(0,o.cn)("fixed inset-0 z-[10000] bg-black/70 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...n})});g.displayName=r.hJ.displayName;let h={sm:"md:max-w-sm",md:"md:max-w-lg",lg:"md:max-w-2xl",xl:"md:max-w-[1200px]","2xl":"md:max-w-[1440px]"},x=i.forwardRef((e,t)=>{let{className:a,children:s,hideCloseButton:i,blurOverlay:d,blackoutOverlay:c,size:u="md",...m}=e;return(0,l.jsxs)(p,{children:[(0,l.jsx)(g,{className:(0,o.cn)("[&_[data-radix-dialog-overlay]]:bg-black",d&&"backdrop-blur-sm",c&&"bg-background")}),(0,l.jsxs)(r.UC,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-[10000] grid w-full max-w-[95vw] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-xl border bg-background p-6 shadow-modal duration-300 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-90 data-[state=open]:zoom-in-90 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]",h[u],a),...m,children:[s,!i&&(0,l.jsxs)(r.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",onClick:e=>{e.stopPropagation()},children:[(0,l.jsx)(n.MKb,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=r.UC.displayName;let f=e=>{let{className:t,...a}=e;return(0,l.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-left",t),...a})};f.displayName="DialogHeader";let b=e=>{let{className:t,fullWidthButtons:a,...r}=e;return(0,l.jsx)("div",{className:(0,o.cn)("flex flex-row justify-between gap-2 sm:justify-end [&>*]:w-full sm:[&>*]:w-auto",a&&"sm:[&>*]:w-full",t),...r})};b.displayName="DialogFooter";let v=i.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)(r.hE,{ref:t,className:(0,o.cn)("text-lg font-medium leading-none tracking-tight",a),...n})});v.displayName=r.hE.displayName;let w=i.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)(r.VY,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...n})});w.displayName=r.VY.displayName},9070:(e,t,a)=>{"use strict";a.d(t,{t:()=>n});var l=a(22291),r=a(11405);let n=()=>{let e=(0,l.useRouter)(),t=(0,l.usePathname)(),a=(0,l.useSearchParams)(),n=a.get("settings");return{activeTab:n,openSettings:(0,r.useCallback)(function(l){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new URLSearchParams(a);l?n.set("settings",l):n.set("settings","");let s="".concat(t,"?").concat(n.toString());r?e.replace(s):e.push(s)},[t,e,a]),closeSettings:(0,r.useCallback)(()=>{let l=new URLSearchParams(a);l.delete("settings"),e.push("".concat(t,"?").concat(l.toString()))},[t,e,a])}}},9562:(e,t,a)=>{"use strict";a.d(t,{Q:()=>s});var l=a(99289);a(11405);var r=a(99017),n=a(26551);let s=e=>{let{showTooltip:t,tooltipContent:a,children:s,className:i,align:o,side:d,triggerClassName:c,...u}=e;return t?(0,l.jsxs)(r.m_,{...u,children:[(0,l.jsx)(r.k$,{asChild:!0,children:(0,l.jsx)("div",{className:c,children:s})}),(0,l.jsx)(r.ZI,{className:(0,n.cn)("max-w-[45ch]",i),align:o,side:d,children:a})]}):s}},13070:(e,t,a)=>{"use strict";a.d(t,{F8:()=>n,ay:()=>i,ki:()=>s});var l=a(1596),r=a(58113);function n(e){return{absolute:(0,l.GP)(e,"h:mm a"),relative:(0,l.GP)(e,"h:mm a")}}function s(e){let t=!(0,r.e)(e),a="MMM d";return t&&(a+=", yyyy"),a+=", h:mm a",{absolute:(0,l.GP)(e,a),relative:(0,l.GP)(e,a)}}function i(e){return"string"==typeof e?new Date(e):e.toDate()}},13851:(e,t,a)=>{"use strict";a.d(t,{s:()=>g});var l=a(99289),r=a(81797),n=a(2906),s=a(66324),i=a(24159),o=a(19550),d=a.n(o),c=a(49944),u=a(20234),p=a(26551);let m=()=>(0,l.jsx)("div",{className:"flex w-full justify-center",children:(0,l.jsx)(u.Zp,{className:(0,p.cn)("w-full max-w-[360px] rounded-xl border-input bg-transparent sm:max-w-none"),children:(0,l.jsxs)("div",{className:"flex flex-col items-center justify-between gap-4 sm:flex-row",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,l.jsx)(u.ZB,{className:"text-lg font-medium",children:"Student discount"}),(0,l.jsx)(u.BT,{className:"text-sm",children:"Verify student status and get access to up to 50% off Lovable Pro."})]}),(0,l.jsx)(c.$,{asChild:!0,variant:"outline",size:"lg",className:"w-full bg-transparent px-8 sm:w-auto sm:shrink-0 lg:min-w-[180px]",children:(0,l.jsx)(d(),{href:"/students",children:"Learn more"})})]})})}),g=e=>{let{className:t,showStudentDiscountCard:a}=e,{pricingScenario:o}=(0,n.et)();return r.Ay.capture(i.aw.PLAN_VIEWED,{plan_context:o}),(0,l.jsxs)(s.ZL,{className:t,suffix:a?(0,l.jsx)(m,{}):void 0,children:[(0,l.jsx)(s.ZL.Free,{}),(0,l.jsx)(s.ZL.Ktlo,{}),(0,l.jsx)(s.ZL.Scheduled,{}),(0,l.jsx)(s.ZL.Pro,{}),(0,l.jsx)(s.ZL.Biz,{}),(0,l.jsx)(s.ZL.Enterprise,{})]})}},15207:(e,t,a)=>{"use strict";a.d(t,{x:()=>l});var l=function(e){return e.LaunchpadExamplePrompts="launchpad-example-prompts",e.AgentDefault="agent-default",e.CustomDomainsBuy="custom_domains_buy",e.GetStartedForFree="get-started-for-free",e.GithubContribution="github-contribution",e.InAppTeaching="in-app-teaching",e.MemoryIntegration="memory-integration",e.IntegrationConnection="integration-connect",e.ModelSelector="quartz-toggle",e.ReferralCopyConfetti="referral-copy-confetti",e.VoiceMode="voice-mode",e.CCPA="ccpa",e.GrowthKtlo="growth-ktlo",e.SupabaseExperimental="supabase-experimental",e.SendMessageOnCreation="send-message-on-creation",e.AIGateway="ai-gateway",e.Embed="embed",e.ChatSuggestions="chat-suggestions",e.DowngradeDialog="downgrade-dialog",e.SetCreditLimit="set-credit-limit",e.DownloadZip="download-zip",e.FiverrIntegration="fiverr-integration",e.StudentsDiscount="students-discount",e.ViewSwitcher="view-switcher",e.McpPlugins="mcp-plugins",e.ToolUseCardV2="tool-use-card-v2",e.UploadAnyFile="upload-any-file",e.DirectCancellation="direct-cancellation",e.CommunityFreshness="community-freshness",e.ImageDisplay="image-display",e}({})},16161:(e,t,a)=>{"use strict";a.d(t,{E:()=>n});var l=a(99289),r=a(26551);function n(e){let{className:t,...a}=e;return(0,l.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-primary/10",t),...a})}},18883:(e,t,a)=>{"use strict";a.d(t,{Q:()=>o,V:()=>i});let l={MAX_DISPLAY_DECIMAL_PLACES:1},r=l.MAX_DISPLAY_DECIMAL_PLACES+1,n=Math.pow(10,l.MAX_DISPLAY_DECIMAL_PLACES),s=Math.pow(10,r),i=e=>Number.isFinite(e)?Math.round(e*s)/s:0,o=e=>{if(!Number.isFinite(e)||e<0)return"0";let t=Math.round(e*n)/n;return t===Math.floor(t)?t.toLocaleString():t.toLocaleString(void 0,{minimumFractionDigits:l.MAX_DISPLAY_DECIMAL_PLACES,maximumFractionDigits:l.MAX_DISPLAY_DECIMAL_PLACES})}},19618:(e,t,a)=>{"use strict";a.d(t,{R:()=>_,d:()=>N});var l=a(99289),r=a(6919),n=a(22291),s=a(81797),i=a(11405),o=a(98213),d=a(1965),c=a(34936),u=a(33256),p=a(69147),m=a(24159),g=a(97115),h=a(63680);let x="settings",f="change_type",b="billing",v="plan_id",w="plan_type",y="redirect",j=(0,i.createContext)(void 0),_=()=>{let e=(0,i.useContext)(j);if(!e)throw Error("useSubscription must be used within a SubscriptionProvider");return e},N=e=>{let{children:t}=e,[a,_]=(0,i.useState)(!1),[N,k]=(0,i.useState)(!1),[C,P]=(0,i.useState)(!1),[S,E]=(0,i.useState)(!1),A=(0,n.useSearchParams)().get("checkoutCode")||void 0,D=(0,r.n)({mutationFn:async e=>{var t;let{plan:a,workspaceId:l,grandfatheredDiscount:r=!1,planType:n="monthly",changeType:s,useStudentDiscount:i=!1}=e;_(a);let o=new URL(window.location.href),d=(e=>{let{currentUrl:t,planId:a,changeType:l}=e,r=new URL(t);return r.searchParams.set("payment_status","failed"),r.searchParams.set(v,a),l&&r.searchParams.set(f,l),r.toString()})({currentUrl:o,planId:a,changeType:s}),c=(e=>{let{currentUrl:t,planId:a,planType:l,changeType:r}=e,n=new URL("".concat(window.location.origin).concat("/purchase-success"));if("/profile/plans"===window.location.pathname)n.searchParams.set(y,window.location.origin);else{let e=new URL(t);t.searchParams.has(x)&&t.searchParams.get(x)===b&&e.searchParams.set(x,b),r&&e.searchParams.set(f,r),e.searchParams.set(w,l),n.searchParams.set(y,e.toString())}return n.searchParams.set(v,a),n.searchParams.set(w,l),n.toString()})({currentUrl:o,planId:a,planType:n,changeType:s}),p=(0,g.h5)(a,n),m=(0,h.D)(),j={price_lookup_key:p,quantity:1,cancel_url:d,success_url:c,client_reference_id:null==(t=window.Rewardful)?void 0:t.referral,workspace_id:l,with_discount:r,coupon_code:A,use_student_discount:i,tracking_data:m};return(0,u.Pg)().post("/workspaces/".concat(l,"/stripe/checkout"),j)},onSuccess:e=>{window.location.assign(e.url)},onMutate:e=>{let{plan:t}=e;_(t),s.Ay.capture(m.nA.CREDIT_PLAN_CHECKOUT_CLICKED,{coupon_code:A,new_plan:t})},onError:e=>{p.logging.error("error_creating_checkout_session",{error:e}),(0,c.Ni)(e)},onSettled:()=>{_(!1)}}),L=async e=>{let{plan:t,workspaceId:a,grandfatheredDiscount:l=!1,planType:r="monthly",changeType:n,useStudentDiscount:s=!1}=e;try{await D.mutateAsync({plan:t,workspaceId:a,grandfatheredDiscount:l,planType:r,changeType:n,useStudentDiscount:s})}catch(e){}},I=async e=>{let{workspaceId:t}=e;try{k(!0);let e=(0,u.Pg)(),a=await e.post("/workspaces/".concat(t,"/stripe/portal-session"),{return_url:window.location.href});window.location.assign(a.url)}catch(e){e instanceof d.L&&"network_error"===e.type&&o.oR.error("Network error: Please check your internet connection and try again."),p.logging.error("error_creating_portal_session",{error:e})}finally{k(!1)}},T=async e=>{let{workspaceId:t}=e;try{P(!0);let e=(0,u.Pg)();await e.post("/workspaces/".concat(t,"/stripe/cancel-subscription")),o.oR.success("Subscription canceled successfully",{description:"Your subscription will remain active until the end of your current billing period."})}catch(e){(0,c.Ni)(e)}finally{P(!1)}},R=async e=>{let{workspaceId:t}=e;try{E(!0);let e=(0,u.Pg)();await e.post("/workspaces/".concat(t,"/stripe/cancel-changes")),o.oR.success("Subscription changes canceled successfully",{description:"Any pending subscription changes have been canceled."})}catch(e){(0,c.Ni)(e)}finally{E(!1)}};return(0,l.jsx)(j.Provider,{value:{checkoutLoading:a,isCreatePortalSessionLoading:N,isCancelSubscriptionLoading:C,isCancelSubscriptionChangesLoading:S,toCheckout:L,createPortalSession:I,cancelSubscription:T,cancelSubscriptionChanges:R},children:t})}},20234:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>s,aR:()=>i,wL:()=>u});var l=a(99289),r=a(11405),n=a(26551);let s=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col gap-6 rounded-lg border bg-card p-6 text-primary shadow-sm",a),...r})});s.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5",a),...r})});i.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:t,className:(0,n.cn)("font-medium leading-none tracking-tight",a),...r})});o.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:t,className:(0,n.cn)("gap-6 pt-0",a),...r})});c.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center pt-0",a),...r})});u.displayName="CardFooter"},27899:(e,t,a)=>{"use strict";a.d(t,{IJ:()=>d,bT:()=>c,bY:()=>m});var l=a(99289),r=a(11405),n=a(99017),s=a(18883);let i={GAP_SCALE_FACTOR:.002,MIN_GAP_WIDTH:2,MIN_INDICATOR_WIDTH:7,PROGRESS_BAR_HEIGHT:11,FALLBACK_MIN_WIDTH_PERCENTAGE:2},o=["bg-blue-800","bg-blue-600","bg-blue-400","bg-blue-200","bg-blue-50"],d=(e,t)=>(0,r.useMemo)(()=>((e,t)=>{if(!e)return"bg-muted-foreground";let a=t.findIndex(t=>t.name===e);return -1===a?"bg-muted-foreground":o[Math.min(a,o.length-1)]})(e,t),[e,t]),c=e=>{switch(e){case"daily":return"Daily credits used first";case"rollover":return"Using rollover credits";case"billing":return"Using monthly credits";case"granted":return"Using bonus credits";case null:return"You are out of credits"}},u={granted:"Bonus",billing:"Monthly",rollover:"Rollover",daily:"Daily"},p=e=>u[e],m=e=>{let{progressData:t}=e,a=(0,r.useRef)(null),[d,c]=(0,r.useState)(0);(0,r.useLayoutEffect)(()=>{let e=()=>{a.current&&c(a.current.offsetWidth)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let u=Math.max(i.MIN_GAP_WIDTH,d*i.GAP_SCALE_FACTOR),m=i.MIN_INDICATOR_WIDTH,g=(0,r.useMemo)(()=>t.hasCredits?t.sources.map((e,a)=>{let l=Math.max(t.totalAllocation>0?e.remaining/t.totalAllocation*100:0,d>0?m/d*100:i.FALLBACK_MIN_WIDTH_PERCENTAGE),r=a===t.sources.length-1,n=o[Math.min(a,o.length-1)];return{...e,widthPercentage:l,isFirst:0===a,isLast:r,colorClass:n}}):[],[t.hasCredits,t.sources,t.totalAllocation,d,m]),h=(0,r.useMemo)(()=>{if(!t.hasCredits||0===g.length)return[];let e=d>0?u/d*100:.4,a=Math.max(0,g.length-1)*e,l=g.reduce((e,t)=>e+t.widthPercentage,0)+a,r=l>100?100/l:1,n=e*r,s=0;return g.map(e=>{let t=e.widthPercentage*r,a=s;return s+=t+(e.isLast?0:n),{...e,widthPercentage:t,leftOffset:a}})},[t.hasCredits,g,d,u]);return t.hasCredits?(0,l.jsx)("div",{className:"flex w-full items-center gap-2",children:(0,l.jsx)("div",{ref:a,className:"relative flex-1 overflow-hidden rounded-lg bg-muted-active",style:{height:"".concat(i.PROGRESS_BAR_HEIGHT,"px")},children:h.map(e=>(0,l.jsxs)(n.m_,{delayDuration:0,children:[(0,l.jsx)(n.k$,{asChild:!0,children:(0,l.jsx)("div",{className:"absolute h-full cursor-pointer ".concat(e.colorClass," transition-all ").concat(e.isFirst?"rounded-bl-lg rounded-tl-lg":""," ").concat(e.isLast?"rounded-br-lg rounded-tr-lg":""),style:{left:"".concat(e.leftOffset,"%"),width:"".concat(e.widthPercentage,"%")}})}),(0,l.jsx)(n.ZI,{className:"border border-gray-200 bg-white shadow-lg",children:(0,l.jsx)("div",{className:"justify-center text-xs font-normal leading-none text-black",children:"granted"===e.name?"".concat((0,s.Q)(e.remaining)," ").concat(p(e.name)," credits"):"".concat((0,s.Q)(e.remaining),"/").concat((0,s.Q)(e.limit)," ").concat(p(e.name)," credits")})})]},e.name))})}):(0,l.jsx)("div",{className:"flex w-full items-center gap-2",children:(0,l.jsx)("div",{className:"relative h-2.5 flex-1 overflow-hidden rounded-lg bg-muted-active"})})}},33063:(e,t,a)=>{"use strict";a.d(t,{B:()=>o,O:()=>d});var l=a(99289),r=a(81797),n=a(11405),s=a(76918);let i=(0,n.createContext)(null),o=e=>{let{children:t}=e,a=(0,n.useRef)((0,s.vt)(()=>({projectWorkspaceId:null,currentWorkspaceId:null}))),o=(0,n.useCallback)(()=>{let{projectWorkspaceId:e,currentWorkspaceId:t}=a.current.getState();r.Ay.group("workspace",e||t||"none")},[]),d=(0,n.useCallback)(e=>{a.current.setState({projectWorkspaceId:e}),o()},[o]),c=(0,n.useCallback)(e=>{a.current.setState({currentWorkspaceId:e}),o()},[o]),u={store:a.current,setProjectWorkspaceId:d,setCurrentWorkspaceId:c};return(0,l.jsx)(i.Provider,{value:u,children:t})};function d(){let e=(0,n.useContext)(i);if(!e)throw Error("usePostHogGroupContext must be used within a PostHogGroupProvider");return e}},33979:(e,t,a)=>{"use strict";a.d(t,{C:()=>o,z:()=>i});var l=a(99289),r=a(52272),n=a(11405),s=a(26551);let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)(r.bL,{className:(0,s.cn)("grid gap-2",a),...n,ref:t})});i.displayName=r.bL.displayName;let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)(r.q7,{ref:t,className:(0,s.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),...n,children:(0,l.jsx)(r.C1,{className:"flex items-center justify-center",children:(0,l.jsx)("div",{className:"aspect-square h-2.5 w-2.5 shrink-0 rounded-full bg-primary"})})})});o.displayName=r.q7.displayName},38948:(e,t,a)=>{"use strict";a.d(t,{x:()=>i});var l=a(99289),r=a(53417),n=a(26551);let s={pro:"brand-twilight",business:"brand-twilight",admin:"brand-saffron",labs:"brand-twilight",internal:"secondary"},i=e=>{let{badge:t,className:a}=e;return(0,l.jsx)(r.E,{variant:s[t],className:(0,n.cn)("capitalize",a),children:t})}},39627:(e,t,a)=>{"use strict";a.d(t,{G1:()=>g,Jz:()=>p,Pt:()=>m,WQ:()=>u,mm:()=>c});var l=a(99289),r=a(51233),n=a(9070),s=a(97757),i=a(67017),o=a(26551),d=a(38948);let c=e=>{let{children:t,className:a,...n}=e;return(0,l.jsx)(r.tU,{className:(0,o.cn)("mt-0 flex w-full flex-1 flex-col items-start overflow-hidden md:flex-row",a),orientation:"vertical",...n,children:t})},u=e=>{let{children:t,className:a,hasActiveTab:n,...s}=e;return(0,l.jsxs)(r.j7,{className:(0,o.cn)("mt-[22px] flex h-full w-full flex-col gap-0.5 overflow-y-auto px-4 py-6 md:mt-0 md:w-[240px] md:flex-nowrap md:border-r",a,n?"hidden md:flex":"flex"),...s,children:[(0,l.jsx)(h,{hideBackButton:!0,className:"mt-[22px]",children:"Settings"}),t]})},p=e=>{let{children:t,className:a,...n}=e;return(0,l.jsx)(r.Xi,{className:(0,o.cn)("flex min-h-10 w-full items-center justify-start gap-3 rounded-md px-2.5 py-2 text-start text-base data-[state=active]:bg-muted hover:bg-muted-hover md:min-h-8 md:w-auto md:gap-2 md:text-sm [&>svg]:size-5 md:[&>svg]:size-4",a),...n,children:t})},m=e=>{let{children:t,className:a,title:n,description:i,docsLink:c,descriptionAction:u,badge:p,customBadge:m,...g}=e;return(0,l.jsxs)(r.av,{className:(0,o.cn)("flex max-h-full w-full flex-1 flex-col gap-6 overflow-y-auto px-6 pb-6 pt-20 data-[state=inactive]:hidden focus:outline-none md:px-10 md:pt-6",a),...g,children:[n&&(0,l.jsxs)("div",{className:"hidden w-full flex-col gap-2 border-b pb-3 md:flex",children:[(0,l.jsxs)("h4",{className:"flex items-center gap-2 text-lg font-medium",children:[(0,l.jsx)("span",{children:n}),p&&(0,l.jsx)(d.x,{badge:p}),m]}),i&&(0,l.jsxs)("div",{className:(0,o.cn)("flex items-start justify-between gap-2 text-sm text-muted-foreground"),children:[(0,l.jsx)("div",{className:"",children:i}),c&&(0,l.jsxs)("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-muted-foreground duration-150 ease-in-out hover:text-muted-foreground/80",children:[(0,l.jsx)(s.A,{name:"help",size:"small"}),"Docs"]}),u&&u]})]}),(0,l.jsx)(h,{descriptionAction:u,children:n}),t]})},g=e=>{let{title:t}=e;return(0,l.jsx)("div",{className:(0,o.cn)("mb-1 mt-6 px-3 text-sm font-medium text-muted-foreground first:mt-0 md:text-xs"),children:t})},h=e=>{let{children:t,className:a,hideBackButton:r=!1,descriptionAction:d,...c}=e,{openSettings:u}=(0,n.t)();return(0,i.A)("md")?(0,l.jsxs)("div",{className:(0,o.cn)("absolute inset-x-0 top-0 z-20 flex min-h-8 items-center justify-between border-b bg-background px-2 py-3 md:hidden",a),...c,children:[(0,l.jsx)("div",{className:"flex items-baseline",children:!r&&(0,l.jsxs)("button",{className:(0,o.cn)("flex items-center gap-1 text-base md:text-sm"),onClick:()=>u(),children:[(0,l.jsx)(s.A,{name:"chevron_left",size:"default"})," Settings"]})}),(0,l.jsx)("div",{className:"absolute left-1/2 flex -translate-x-1/2 items-baseline justify-center text-center text-lg font-medium",children:t}),(0,l.jsx)("div",{className:"flex min-h-7 items-baseline pr-0.5",children:d})]}):null}},40177:(e,t,a)=>{"use strict";a.d(t,{Gi:()=>f,Tp:()=>y,_C:()=>j,ct:()=>C,jD:()=>_});var l=a(99289),r=a(545),n=a(62656),s=a(22291),i=a(81797),o=a(7907),d=a(11405),c=a(50471),u=a(34958),p=a(69147),m=a(15207),g=a(37079),h=a(40074);let x=(0,n.default)(()=>Promise.all([a.e(836),a.e(1100),a.e(8566)]).then(a.bind(a,98566)).then(e=>({default:e.FeatureFlagDebugDialog})),{loadableGenerated:{webpack:()=>[98566]},ssr:!1});var f=function(e){return e.LaunchpadFormUploadImageModal="launchpad-upload-image-modal",e}({});let b=(0,d.createContext)(void 0),v=()=>{let e=(0,d.useContext)(b);if(!e)throw Error("useFeatureFlagContext must be used within a PostHogFlagsContext in the PosthogProvider");return e},w={},y=e=>{let{featureFlags:t,featureFlagOverrides:a}=v();return void 0!==a[e]?a[e]:!!(null==t?void 0:t[e])},j=e=>{let{featureFlags:t}=v();return null==t?void 0:t[e]},_=()=>({openFeatureFlagDebugDialog:v().openFeatureFlagDebugDialog}),N="phc_xdBVCyOkYw40Pqd7xp5Er88lGq2IGFd4kZHRiKvvkjr",k=N&&!0;function C(e){let{children:t,bootstrapData:a}=e,{authUser:n}=(0,g.Z2)(),p=(0,g.Nm)(),f=(0,d.useMemo)(()=>null==n?void 0:n.uid,[null==n?void 0:n.uid]),v=(0,d.useMemo)(()=>null==n?void 0:n.displayName,[null==n?void 0:n.displayName]),y=(0,u.E$)(),[j,_]=(0,d.useState)(!1),[C,P]=(0,d.useState)(w);(0,c.vC)("ctrl+shift+f",e=>{e.preventDefault(),_(e=>!e)},{enabled:!!y},[y]);let S=(0,d.useMemo)(()=>({featureFlags:null==a?void 0:a.featureFlags,featureFlagOverrides:C,openFeatureFlagDebugDialog:y?()=>_(!0):void 0}),[null==a?void 0:a.featureFlags,C,y]),E=(0,d.useCallback)(e=>{let{target:t,action:a}=e;if("bulk"===t){let e=Object.values(m.x);switch(a){case"enable_all":P(Object.fromEntries(e.map(e=>[e,!0])));break;case"disable_all":P(Object.fromEntries(e.map(e=>[e,!1])));break;case"clear_all":P(w)}}else P(e=>({...e,[t]:a}))},[]);(0,d.useEffect)(()=>{f&&r.gV({id:f})},[f]),(0,d.useEffect)(()=>{k&&f&&(i.Ay.identify(f,{email:p,name:v}),i.Ay.capture("github_branch",{branch:h.env.BRANCH||null}))},[f,p,v]),(0,d.useEffect)(()=>{k&&i.Ay.init(N,{api_host:"https://lovable.dev/ingest",ui_host:"https://us.posthog.com",bootstrap:a,session_recording:{maskAllInputs:!1,maskInputOptions:{password:!0}},autocapture:{element_allowlist:["button"]},verbose:!1})},[a]);let A=(0,s.usePathname)();return(0,d.useEffect)(()=>{i.Ay.capture("$pageview")},[A]),(0,l.jsx)(b.Provider,{value:S,children:(0,l.jsxs)(o.so,{client:i.Ay,children:[t,y&&(0,l.jsx)(x,{open:j,onOpenChange:_,featureFlagOverrides:C,onFeatureFlagOverrideChange:E,originalFlags:(null==a?void 0:a.featureFlags)||{}})]})})}N||p.logging.info("Missing NEXT_PUBLIC_POSTHOG_KEY in env; set to 'skip' to disable")},43328:(e,t,a)=>{"use strict";a.d(t,{cA:()=>N,Dx:()=>k,useCurrentWorkspaceStore:()=>C,nu:()=>P});var l=a(99289),r=a(34363),n=a(22291),s=a(11405),i=a(76918),o=a(37079),d=a(66608),c=a(33063),u=a(69147),p=a(72384),m=a(76974),g=a(51252),h=a(6919),x=a(98213),f=a(34936),b=a(33256),v=a(273),w=a(2906),y=a(19618),j=a(5465);let _=(0,s.createContext)(null);function N(e){var t,a,N;let k,{children:C}=e,P=(0,s.useRef)((0,i.vt)(()=>({currentWorkspace:null,membership:null,hasFetchedCurrentWorkspace:!1}))),{authUser:S}=(0,o.Z2)(),{userData:E}=(0,d.ur)(),A=(k=null!=(t=null==S?void 0:S.uid)?t:"","".concat("lovable-current-workspace-id","-").concat(k)),D=(0,n.useSearchParams)().get("workspaceId"),{allWorkspaces:L,isLoading:I}=(0,m.Mu)(e=>({allWorkspaces:e.workspaces,isLoading:e.isLoading})),T=null!=(a=null==L?void 0:L[0])?a:null,[R,O]=(0,s.useState)(null);(0,s.useEffect)(()=>{if(window)try{let e=window.localStorage.getItem(A);e&&O(e)}catch(e){u.logging.debug("Error getting current workspace id from localstorage",{error:e})}},[A]);let F=(0,s.useCallback)(e=>{O(e);try{e?window.localStorage.setItem(A,e):window.localStorage.removeItem(A)}catch(t){u.logging.debug("Error setting current workspace id to localstorage",{error:t,newId:e})}},[A]);(0,s.useEffect)(()=>{!R&&(null==T?void 0:T.id)&&F(T.id)},[R,null==T?void 0:T.id,F]);let{data:M,isLoading:z,isError:W}=(0,r.I)(p.y.detail({workspaceId:null!=R?R:"",projectId:void 0}));W&&F(null==T?void 0:T.id);let{data:K}=(0,r.I)(p.y.detail({workspaceId:null!=D?D:"",projectId:void 0}));!function(e){let{authUser:t,currentWorkspaceId:a,userData:l,isLoadingAllWorkspaces:r,currentWorkspace:n}=e,[i,o]=(0,s.useState)(!1),{toCheckout:d}=(0,y.R)(),c=(0,s.useCallback)(async()=>{if((null==t?void 0:t.uid)&&a&&!i)try{let e=localStorage.getItem(w.LS);if(!e)return;let t=JSON.parse(e),l=Date.now()-t.timestamp;if(localStorage.removeItem(w.LS),l>36e5)return;o(!0),await d({plan:t.planId,workspaceId:a})}catch(e){u.logging.error("Error processing pending plan selection",{error:e,userId:null==t?void 0:t.uid,workspaceId:a}),localStorage.removeItem(w.LS)}},[null==t?void 0:t.uid,a,i,d]);(0,s.useEffect)(()=>{t&&a&&!r&&!i&&(null==l?void 0:l.segmentation_form_status)===j.C.SUBMITTED&&(null==n?void 0:n.plan)==="free"&&c()},[t,null==n?void 0:n.plan,a,r,i,c,null==l?void 0:l.segmentation_form_status])}({authUser:S,currentWorkspaceId:R,userData:null!=E?E:null,isLoadingAllWorkspaces:I,currentWorkspace:null!=(N=null==M?void 0:M.workspace)?N:null}),function(e){let{allWorkspaces:t,isLoadingAllWorkspaces:a,workspaceDataForUnacceptedInvites:l,setCurrentWorkspaceId:r,authUser:i}=e,o=(0,n.useRouter)(),d=(0,n.usePathname)(),c=(0,n.useSearchParams)(),u=(0,s.useRef)(new Set),p=c.get("workspaceId"),{store:w}=(0,m.k9)(),y=(0,g.jE)(),j=(0,s.useCallback)(()=>{let e=new URLSearchParams(c);e.delete("workspaceId"),o.replace("".concat(d,"?").concat(e.toString()),{scroll:!1})},[o,d,c]),{mutate:_}=(0,h.n)({mutationFn:async e=>{let t=(0,b.Pg)();return await t.put("/user/workspaces/".concat(e.id,"/accept-invite")),e},onSuccess:e=>{r(e.id),j(),u.current.has(e.id)||(x.oR.success(e.name?'Switched to "'.concat(e.name,'" workspace'):"Switched to workspace"),null==w||w.setState({workspaces:[...t,e]})),u.current.add(e.id)},onError:(e,t)=>{u.current.has(t.id)||(j(),u.current.add(t.id),(0,f.Ni)(e))},onSettled:()=>{y.invalidateQueries({queryKey:v.Or.all})},retry:!1});(0,s.useEffect)(()=>{if(p&&!i&&!a)return void o.replace("/login");p&&!a&&(null==l?void 0:l.workspace)&&!u.current.has(l.workspace.id)&&_(l.workspace)},[_,a,null==l?void 0:l.workspace,p,i,o,d,c])}({allWorkspaces:L,isLoadingAllWorkspaces:I,authUser:S,workspaceDataForUnacceptedInvites:null!=K?K:{workspace:null},setCurrentWorkspaceId:F}),(0,s.useEffect)(()=>{var e,t;P.current.setState({currentWorkspace:null!=(e=null==M?void 0:M.workspace)?e:null,membership:null!=(t=null==M?void 0:M.current_member)?t:null})},[null==M?void 0:M.workspace,null==M?void 0:M.current_member]),(0,s.useEffect)(()=>{P.current.setState({hasFetchedCurrentWorkspace:!z})},[z]),(0,s.useEffect)(()=>{S||P.current.setState({currentWorkspace:null,membership:null,hasFetchedCurrentWorkspace:!1})},[S]);let B=(0,c.O)();(0,s.useEffect)(()=>(null==B||B.setCurrentWorkspaceId(null!=R?R:null),()=>{null==B||B.setCurrentWorkspaceId(null)}),[R,B]);let U={store:P.current,setCurrentWorkspaceId:F,currentWorkspaceId:R};return(0,l.jsx)(_.Provider,{value:U,children:C})}function k(){let e=(0,s.useContext)(_);if(!e)throw Error("useWorkspaceContext must be used within a WorkspaceProvider");return e}function C(e){let{store:t}=k();if(!t)throw Error("useWorkspaceStore must be used within a WorkspaceProvider");return t(e)}function P(e){let t=(0,s.useContext)(_),a=null==t?void 0:t.store;return a?a(e):null}},44346:e=>{e.exports={shimmerText:"ShimmeringText_shimmerText__SMwG_",shimmer:"ShimmeringText_shimmer__1AZHS",shimmerTextSuccess:"ShimmeringText_shimmerTextSuccess__itzB9"}},46891:(e,t,a)=>{"use strict";a.d(t,{O:()=>d});var l=a(99289),r=a(19550),n=a.n(r),s=a(73305),i=a(49944),o=a(9562);let d=e=>{let{type:t,variant:a,onClick:r,href:d,isExternal:c,text:u,showTooltip:p,tooltipContent:m,disabled:g,loading:h}=e;return"link"===t?(0,l.jsx)(i.$,{variant:a,asChild:!0,onClick:r,className:c?"h-9 w-full whitespace-nowrap":"h-9",children:(0,l.jsx)(n(),{href:d,passHref:!0,target:c?"_blank":void 0,children:u})}):(0,l.jsx)(o.Q,{showTooltip:p||!1,tooltipContent:m||"",delayDuration:300,children:(0,l.jsx)(s.oO,{onClick:r,variant:a,disabled:g,loading:h,className:"h-9",children:u})})}},48591:(e,t,a)=>{"use strict";a.d(t,{AE:()=>f,Bk:()=>C,G8:()=>N,H4:()=>k,J6:()=>S,Jt:()=>j,Li:()=>y,QZ:()=>v,Qe:()=>u,UT:()=>g,WW:()=>x,ZS:()=>b,aR:()=>c,bj:()=>p,f$:()=>h,fT:()=>m,j$:()=>P,sA:()=>_,tN:()=>w,zJ:()=>d});var l=a(43328),r=a(80328),n=a(40177),s=a(34958),i=a(15207),o=a(97115);let d=()=>(0,n.Tp)(i.x.ModelSelector),c=()=>(0,n.Tp)(i.x.InAppTeaching),u=()=>(0,n.Tp)(i.x.LaunchpadExamplePrompts),p=()=>(0,n.Tp)(i.x.SupabaseExperimental),m=()=>(0,n.Tp)(i.x.GrowthKtlo),g=()=>(0,n.Tp)(i.x.MemoryIntegration),h=()=>(0,n.Tp)(i.x.AIGateway),x=()=>{let e=(0,s.WW)(),t=(0,n.Tp)(i.x.DownloadZip),a=(0,l.useCurrentWorkspaceStore)(e=>e.currentWorkspace),{isBizOrEnterprisePlan:r}=(0,o.cb)(null==a?void 0:a.plan);return e||t||r},f=()=>(0,n.Tp)(i.x.Embed),b=()=>(0,n.Tp)(i.x.SetCreditLimit),v=()=>(0,n.Tp)(i.x.ChatSuggestions),w=()=>(0,n.Tp)(i.x.FiverrIntegration),y=()=>{var e;let t=null==(e=(0,r.l)().features)?void 0:e.view_switcher,a=(0,n.Tp)(i.x.ViewSwitcher);return t||a},j=()=>(0,n.Tp)(i.x.VoiceMode),_=()=>(0,n.Tp)(i.x.GithubContribution),N=()=>(0,n.Tp)(i.x.UploadAnyFile),k=()=>(0,n.Tp)(i.x.DirectCancellation),C=()=>(0,n.Tp)(i.x.CommunityFreshness),P=()=>(0,n.Tp)(i.x.IntegrationConnection),S=()=>(0,n.Tp)(i.x.McpPlugins)},50088:(e,t,a)=>{"use strict";a.d(t,{Y:()=>o});var l=a(32044),r=a(78316),n=a(33256),s=a(69147),i=a(273);let o={workspace:e=>{let{workspaceId:t,userData:a}=e;return(0,l.j)({queryKey:i.a$.workspace(t),queryFn:async()=>{let e=(0,n.Pg)();return(await e.get("/user/workspaces/".concat(t))).workspace},enabled:!!a&&!!t})},experimentalFeatures:e=>{let{user:t}=e;return(0,l.j)({queryKey:i.a$.experimentalFeatures(),enabled:!!t&&!!t.idToken&&(0,r.H)(t),refetchOnWindowFocus:!1,queryFn:async()=>{let e=(0,n.Pg)();try{return await e.get("/users/".concat(null==t?void 0:t.uid,"/experimental-features"))}catch(e){return s.logging.error("Failed to fetch experimental features",{error:e}),null}}})},contributions:e=>{let{userData:t}=e;return(0,l.j)({queryKey:i.a$.contributions(null==t?void 0:t.id),queryFn:async()=>(null==t?void 0:t.id)?(0,n.Pg)().get("/users/".concat(t.id,"/contributions")):{},enabled:!!(null==t?void 0:t.username)})},publicProfile:e=>{let{username:t}=e;return(0,l.j)({queryKey:i.a$.profile(t),queryFn:()=>(0,n.Pi)().get("/profile/".concat(t)),enabled:!!t,retry:!1})},studentDomains:()=>(0,l.j)({queryKey:i.a$.studentDomains(),queryFn:async()=>(0,n.Pg)().get("/user/student/domains")}),toolApprovalPreferences:()=>(0,l.j)({queryKey:i.a$.toolApprovalPreferences(),queryFn:async()=>(0,n.Pg)().get("/user/preferences/tool-preferences"),staleTime:6e5})}},52170:(e,t,a)=>{"use strict";a.d(t,{F:()=>d});var l=a(99289),r=a(67312);a(11405);var n=a(26551),s=a(44346),i=a.n(s);let o=(0,r.F)("",{variants:{variant:{default:i().shimmerText,success:i().shimmerTextSuccess}},defaultVariants:{variant:"default"}}),d=e=>{let{children:t,className:a,isShimmering:r=!1,variant:s,...i}=e;return(0,l.jsx)("span",{className:(0,n.cn)(a,r&&o({variant:s})),...i,children:t})}},52983:(e,t,a)=>{"use strict";a.d(t,{V:()=>r});var l=a(9627);let r=function(e){let{defaultValue:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{defaultValue:!1},[a,r]=(0,l.A)(e,{defaultValue:t});return[a,r]}},53417:(e,t,a)=>{"use strict";a.d(t,{E:()=>i});var l=a(99289),r=a(67312);a(11405);var n=a(26551);let s=(0,r.F)("inline-flex items-center rounded-sm px-2 py-px text-xs font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",warning:"border-transparent bg-warning text-warning-foreground hover:bg-warning/80",success:"border-transparent bg-success text-success-foreground hover:bg-success/80",accent:"border-transparent bg-accent text-accent-foreground hover:bg-accent/80",affirmative:"border-transparent bg-affirmative text-affirmative-foreground hover:bg-affirmative/80",outline:"text-foreground border border-border","brand-bubblegum":"bg-brand-bubblegum text-brand-bubblegum-foreground hover:bg-brand-bubblegum/80","brand-tiger":"bg-brand-tiger text-brand-tiger-foreground hover:bg-brand-tiger/80","brand-saffron":"bg-brand-saffron text-brand-saffron-foreground hover:bg-brand-saffron/80","brand-sapphire":"bg-brand-sapphire text-brand-sapphire-foreground hover:bg-brand-sapphire/80","brand-twilight":"bg-brand-twilight text-brand-twilight-foreground hover:bg-brand-twilight/80","brand-flamingo":"bg-brand-flamingo text-brand-flamingo-foreground hover:bg-brand-flamingo/80"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...r}=e;return(0,l.jsx)("div",{className:(0,n.cn)(s({variant:a}),t),...r})}},60802:(e,t,a)=>{"use strict";a.d(t,{U:()=>n});var l=a(34363),r=a(33256);let n=e=>{let{data:t,isLoading:a}=(0,l.I)({queryKey:["supabase-integration-data",e],queryFn:async()=>{let t=await (0,r.Pg)().get("/projects/".concat(e,"/integrations/supabase"));return""===t.supabase_project_id?null:t},enabled:!!e});return{supabaseIntegrationData:t,isSupabaseIntegrationDataLoading:a}}},63680:(e,t,a)=>{"use strict";a.d(t,{D:()=>l});let l=()=>{let e=e=>{let t="; ".concat(document.cookie).split("; ".concat(e,"="));if(2===t.length){var a;return null==(a=t.pop())?void 0:a.split(";").shift()}},t={},a=e("_fbc");a&&(t.fbc=a);let l=e("_fbp");l&&(t.fbp=l);let r=e("_ttp");r&&(t.ttp=r);let n=e("ttclid");return n&&(t.ttclid=n),t}},66324:(e,t,a)=>{"use strict";a.d(t,{nZ:()=>_,ZL:()=>j,lF:()=>N});var l=a(99289),r=a(81797),n=a(2906),s=a(69201),i=a(90352),o=a(24159);let d=e=>{let{selectedPlan:t,isScheduled:a}=e,{planType:s,setPlanType:d}=(0,n.et)(),c="annual"===s;return a&&(c="annual"===a),(0,l.jsx)("div",{className:"flex flex-col gap-2",children:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(i.d,{checked:c,disabled:!!a,onCheckedChange:e=>{d(e?"annual":"monthly"),r.Ay.capture(o.aw.PLAN_TYPE_CHANGED,{plan_id:t,plan_type:e?"annual":"monthly"})},className:"data-[state=checked]:bg-brand-twilight-primary",thumbClassName:"bg-[hsl(45_40_98%)]"}),(0,l.jsx)("div",{className:"flex",children:(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:"Annual"})})]})})};var c=a(46891),u=a(73305),p=a(93652),m=a(53417),g=a(97757),h=a(99017),x=a(69147),f=a(99605),b=a(97115),v=a(71302),w=a(71055),y=a(26551);let j=e=>{let{children:t,className:a,suffix:r}=e,{pricingScenario:s}=(0,n.et)();return(0,l.jsx)("div",{className:"flex w-full justify-center",children:(0,l.jsxs)("div",{className:"flex w-fit flex-col justify-center gap-6",children:[(0,l.jsx)("div",{className:(0,y.cn)("grid w-fit grid-cols-1 gap-4","sm:grid-cols-2 lg:gap-6","lg:flex lg:justify-center","lg:max-w-none",a,{"max-w-[600px]":"billing"!==s}),children:t}),r]})})},_=e=>{let{children:t}=e,a=(0,n.et)();return(0,l.jsx)("div",{className:(0,y.cn)("flex flex-col gap-4",a.isLoggedOut?"min-h-72":"min-h-[350px]"),children:t})},N=()=>{let e=(0,n.et)(),t=(0,b.RL)(e.selectedProPlan),a=(0,s.D)();return(0,l.jsx)(u.kp,{label:"Everything in Free, plus:",features:[(0,l.jsxs)("span",{className:"flex items-start gap-1",children:[t," monthly credits",(0,l.jsxs)(h.m_,{delayDuration:300,children:[(0,l.jsx)(h.k$,{children:(0,l.jsx)(g.A,{name:"info",className:"mt-0.5 h-4 w-4 text-muted-foreground"})}),(0,l.jsx)(h.ZI,{className:"max-w-[25ch]",children:(0,l.jsxs)("p",{children:[t," credits per month + 5 daily credits that reset each day"]})})]})]},"num-credits"),"5 daily credits (up to 150/month)","Private projects","User roles & permissions","Custom domains","Remove the Lovable badge",(0,l.jsxs)("span",{className:"flex items-start gap-1",children:["Credit rollovers",(0,l.jsxs)(h.m_,{delayDuration:300,children:[(0,l.jsx)(h.k$,{children:(0,l.jsx)(g.A,{name:"info",className:"mt-0.5 h-4 w-4 text-muted-foreground"})}),(0,l.jsx)(h.ZI,{className:"max-w-[25ch]",children:(0,l.jsxs)("p",{children:[t," rollover limit for monthly plans and 12x rollover limit for annual plans"]})})]})]},"num-credits"),...a?[(0,l.jsxs)("span",{className:"flex items-start gap-2",children:["Usage-based Cloud",(0,l.jsx)(m.E,{variant:"brand-twilight",children:"New"})]},"lovable-cloud")]:[]]})},k=e=>{var t,a;let{scheduledPlan:s}=e,i=(0,n.et)(),{isBizPlan:m,isEnterprisePlan:g}=(0,b.cb)(i.currentPlan.id),h="newWorkspace"===i.pricingScenario;if(!h&&!i.showProPlan)return null;let x=(()=>{let e=i.selectedProPlan,t=e===i.currentPlan.id&&i.planType==i.currentPlan.type,a=i.isPlanDowngrade(e);return i.isLoggedOut?{type:"link",text:"Get Started",variant:"twilight",href:"/signup",disabled:!1,onClick:()=>{r.Ay.capture(o.aw.GET_STARTED_CLICKED,{plan_type:"pro",plan_id:e,plan_price:i.getDisplayPrice(e),user_status:"logged_out"}),i.handleLoggedOutUpgrade(e)}}:h?i.newWorkspaceSelectedPlan===e?{type:"button",text:"Selected",variant:"twilight",disabled:!1,onClick:void 0,loading:!1}:{type:"button",text:"Select",variant:"twilight",disabled:!1,onClick:()=>{i.setNewWorkspaceSelectedPlan(e)},loading:!1}:s?{type:"button",text:"Scheduled",variant:"muted",disabled:!0,onClick:void 0,loading:!1}:t&&i.scheduledPlan?{type:"button",text:"Reactivate",variant:"twilight",disabled:!1,onClick:()=>{i.createPortalSession()},loading:!1}:t?{type:"button",text:"Your current plan",variant:"muted",disabled:!0,onClick:void 0,loading:!1}:i.shouldDisableWorkspaceAdminActions?{type:"button",text:"Contact Admin",variant:i.proPlanButtonVariant,disabled:!0,onClick:void 0,loading:!1,showTooltip:!0,tooltipContent:"You need to be a workspace admin to manage plans"}:g?{type:"button",text:i.getButtonText(e),variant:i.proPlanButtonVariant,disabled:!0,onClick:void 0,loading:!1}:a?{type:"button",text:i.getButtonText(e),variant:"link",disabled:!1,loading:!1,onClick:()=>{r.Ay.capture(o.aw.PLAN_DOWNGRADE_CLICKED,{current_plan_id:i.currentPlan.id,current_plan_type:i.currentPlan.type,target_plan_id:e,target_plan_type:i.planType,plan_type:"pro",plan_price:i.getDisplayPrice(e)}),i.setTargetDowngradePlan(e),i.onDowngradeClick()}}:{type:"button",text:i.getButtonText(e),variant:m?"twilight-muted":"twilight",disabled:!1,loading:!1,onClick:async()=>{await i.handleUpgradeClicked(e)}}})(),v=s&&i.scheduledPlan?i.scheduledPlan.id:i.selectedProPlan,w=i.getSavingsAmount(v);return(0,l.jsx)(u.Mt,{name:"Pro",title:"Designed for fast-moving teams building together in real time.",plan:null!=(t=null==s?void 0:s.id)?t:i.selectedProPlan,planType:null!=(a=null==s?void 0:s.type)?a:i.planType,description:(0,l.jsx)(d,{selectedPlan:v,isScheduled:null==s?void 0:s.type}),isPopular:!m&&!s,savingsAmount:w,isScheduled:h||null==s?void 0:s.type,highlighted:h&&i.newWorkspaceSelectedPlan===i.selectedProPlan,children:(0,l.jsxs)(_,{children:[(0,l.jsxs)(u.vi,{children:[(0,l.jsx)(c.O,{...x}),h?(0,l.jsx)(p.h,{options:f.pB,selectedOption:i.selectedProPlan,onSelect:e=>{i.setNewWorkspaceSelectedPlan(e),i.setSelectedProPlan(e)}}):(0,l.jsx)(p.h,{options:f.pB,selectedOption:s&&i.scheduledPlan?i.scheduledPlan.id:i.selectedProPlan,disabled:!!s||i.shouldDisableWorkspaceAdminActions,onSelect:i.setSelectedProPlan})]}),(0,l.jsx)(N,{})]})})},C=e=>{var t,a;let{scheduledPlan:s}=e,i=(0,n.et)(),{isBizPlan:m,isEnterprisePlan:x}=(0,b.cb)(i.currentPlan.id),v="newWorkspace"===i.pricingScenario,w=(0,b.RL)(i.selectedBizPlan);if(!v&&!i.showBizPlan)return null;let y=(()=>{let e=i.selectedBizPlan,t=e==i.currentPlan.id&&i.planType==i.currentPlan.type,a=i.isPlanDowngrade(e);return i.isLoggedOut?{type:"link",text:"Get Started",variant:"twilight-muted",href:"/signup",disabled:!1,onClick:()=>{r.Ay.capture(o.aw.GET_STARTED_CLICKED,{plan_type:"business",plan_id:e,plan_price:i.getDisplayPrice(e),user_status:"logged_out"})}}:v?i.newWorkspaceSelectedPlan===e?{type:"button",text:"Selected",variant:"twilight",disabled:!1,onClick:void 0,loading:!1}:{type:"button",text:"Select",variant:"twilight",disabled:!1,onClick:()=>{i.setNewWorkspaceSelectedPlan(e)},loading:!1}:s?{type:"button",text:"Scheduled",variant:"muted",disabled:!0,onClick:void 0,loading:!1}:t&&i.scheduledPlan?{type:"button",text:"Reactivate",variant:"twilight",disabled:!1,onClick:()=>{i.createPortalSession()},loading:!1}:t?{type:"button",text:"Your current plan",variant:"ghost",disabled:!0,onClick:void 0,loading:!1}:i.shouldDisableWorkspaceAdminActions?{type:"button",text:"Contact Admin",variant:m?"twilight":"twilight-muted",disabled:!0,onClick:void 0,loading:!1,showTooltip:!0,tooltipContent:"You need to be a workspace admin to manage plans"}:x?{type:"button",text:i.getButtonText(e),variant:"twilight-muted",disabled:!0,onClick:void 0,loading:!1}:a?{type:"button",text:i.getButtonText(e),variant:"link",disabled:!1,loading:!1,onClick:()=>{r.Ay.capture(o.aw.PLAN_DOWNGRADE_CLICKED,{current_plan_id:i.currentPlan.id,current_plan_type:i.currentPlan.type,target_plan_id:e,target_plan_type:i.planType,plan_type:"business",plan_price:i.getDisplayPrice(e)}),i.setTargetDowngradePlan(e),i.onDowngradeClick()}}:{type:"button",text:i.getButtonText(e),variant:m?"twilight":"twilight-muted",disabled:!1,loading:!1,onClick:async()=>{await i.handleUpgradeClicked(e)}}})(),j=s&&i.scheduledPlan?i.scheduledPlan.id:i.selectedBizPlan,N=i.getSavingsAmount(j);return(0,l.jsx)(u.Mt,{name:"Business",title:"Advanced controls and power features for growing departments",plan:null!=(t=null==s?void 0:s.id)?t:i.selectedBizPlan,planType:null!=(a=null==s?void 0:s.type)?a:i.planType,highlighted:v&&i.newWorkspaceSelectedPlan===i.selectedBizPlan,description:(0,l.jsx)(d,{selectedPlan:j,isScheduled:null==s?void 0:s.type}),savingsAmount:N,isPopular:m&&!s,isScheduled:null==s?void 0:s.type,children:(0,l.jsxs)(_,{children:[(0,l.jsxs)(u.vi,{children:[(0,l.jsx)(c.O,{...y}),v?(0,l.jsx)(p.h,{options:f.mR,selectedOption:i.selectedBizPlan,onSelect:e=>{i.setNewWorkspaceSelectedPlan(e),i.setSelectedBizPlan(e)}}):(0,l.jsx)(p.h,{options:f.mR,selectedOption:j,disabled:!!s||i.shouldDisableWorkspaceAdminActions,onSelect:i.setSelectedBizPlan})]}),(0,l.jsx)(u.kp,{label:"All features in Pro, plus:",features:[(0,l.jsxs)("span",{className:"flex items-start gap-1",children:[w," monthly credits",(0,l.jsxs)(h.m_,{delayDuration:300,children:[(0,l.jsx)(h.k$,{children:(0,l.jsx)(g.A,{name:"info",className:"mt-0.5 h-4 w-4 text-muted-foreground"})}),(0,l.jsx)(h.ZI,{className:"max-w-[25ch]",children:(0,l.jsxs)("p",{children:[w," credits per month + 5 daily credits that reset each day"]})})]})]},"num-credits"),"SSO","Personal Projects","Opt out of data training","Design templates"]})]})})};j.Free=()=>{let e=(0,n.et)(),{isFreePlan:t,isInactivePlan:a,isEnterprisePlan:i}=(0,b.cb)(e.currentPlan.id),d=(0,s.D)();if(!e.showFreePlan)return null;let p=(()=>{var l;return e.isLoggedOut?{type:"link",text:"Get Started",variant:"twilight-muted",href:"/signup",disabled:!1,onClick:()=>{r.Ay.capture(o.aw.GET_STARTED_CLICKED,{plan_type:"free",plan_id:"free",plan_price:0,user_status:"logged_out"})}}:(null==(l=e.scheduledPlan)?void 0:l.id)==="free"?{type:"button",text:"Scheduled",variant:"muted",disabled:!0,onClick:void 0,loading:!1}:t?{type:"button",text:"Your current plan",variant:"ghost",disabled:!0,onClick:void 0,loading:!1}:a?{type:"button",text:"Only for first workspace",variant:e.freePlanButtonVariant,disabled:!0,onClick:void 0,loading:!1}:i?{type:"button",text:"Downgrade (Contact us)",variant:e.freePlanButtonVariant,disabled:!0,onClick:void 0,loading:!1}:e.shouldDisableWorkspaceAdminActions?{type:"button",text:"Contact Admin",variant:e.freePlanButtonVariant,disabled:!0,onClick:void 0,loading:!1,showTooltip:!0,tooltipContent:"You need to be a workspace admin to manage plans"}:{type:"button",text:"Downgrade",variant:e.freePlanButtonVariant,disabled:!1,loading:e.isCreatePortalSessionLoading,onClick:()=>{r.Ay.capture(o.aw.PLAN_DOWNGRADE_CLICKED,{current_plan_id:e.currentPlan.id,current_plan_type:e.currentPlan.type,target_plan_id:"free",plan_type:"free"}),e.setFreePlanAsTarget(),e.onDowngradeClick()}}})();return(0,l.jsx)(u.Mt,{name:"Free",title:"Discover what Lovable can do for you",description:"Free forever",plan:v.VL.FREE,planType:"monthly",children:(0,l.jsxs)(_,{children:[(0,l.jsx)(u.vi,{children:(0,l.jsx)(c.O,{...p})}),(0,l.jsx)(u.kp,{label:"Free for everyone",features:["5 daily credits (up to 30/month)","Public projects","Unlimited collaborators",...d?[(0,l.jsxs)("span",{className:"flex items-start gap-2",children:["Cloud",(0,l.jsx)(m.E,{variant:"brand-twilight",children:"New"})]},"lovable-cloud")]:[]]})]})})},j.Ktlo=()=>{let e=(0,n.et)();if(!e.showKtloPlan)return null;let t=(()=>{var t;let a="ktlo"===e.currentPlan.id;return e.isLoggedOut?{type:"link",text:"Get Started",variant:"twilight",href:"/signup",disabled:!1,onClick:()=>{r.Ay.capture(o.aw.GET_STARTED_CLICKED,{plan_type:"ktlo",plan_price:15,user_status:"logged_out"})}}:a&&e.scheduledPlan?{type:"button",text:"Reactivate",variant:"twilight",disabled:!1,onClick:()=>{e.createPortalSession()},loading:!1}:a?{type:"button",text:"Your current plan",variant:"ghost",disabled:!0,onClick:void 0,loading:!1}:(null==(t=e.scheduledPlan)?void 0:t.id)==="ktlo"?{type:"button",text:"Scheduled",variant:"muted",disabled:!0,onClick:void 0,loading:!1}:e.shouldDisableWorkspaceAdminActions?{type:"button",text:"Contact Admin",variant:"twilight",disabled:!0,onClick:void 0,loading:!1,showTooltip:!0,tooltipContent:"You need to be a workspace admin to manage plans"}:{type:"button",text:"Switch to KTLO",variant:"twilight",disabled:!1,loading:!1,onClick:async()=>{var t;if(!(null==(t=w.y4[w.G.KTLO])?void 0:t.PRODUCT_ID))return void x.logging.error("KTLO product ID not found");r.Ay.capture(o.aw.PLAN_UPGRADE_CLICKED,{current_plan_id:e.currentPlan.id,current_plan_type:e.currentPlan.type,target_plan_id:"ktlo",plan_type:"ktlo",plan_price:15}),await e.handleUpgradeConfirmed(v.VL.KTLO)}}})();return(0,l.jsx)(u.Mt,{name:"Lite",title:"Keep your projects running with essential features",plan:v.VL.KTLO,planType:"monthly",description:"Monthly",children:(0,l.jsxs)(_,{children:[(0,l.jsx)(u.vi,{children:(0,l.jsx)(c.O,{...t})}),(0,l.jsx)(u.kp,{label:"Everything in Free, plus:",features:["5 daily credits (up to 150/month)","Private projects","User roles & permissions","Custom domains","Remove the Lovable badge"]})]})})},j.Scheduled=()=>{let{scheduledPlan:e}=(0,n.et)(),{isProPlan:t,isBizPlan:a}=(0,b.cb)(null==e?void 0:e.id);return e&&t?(0,l.jsx)(k,{scheduledPlan:e}):e&&a?(0,l.jsx)(C,{scheduledPlan:e}):void 0},j.Pro=k,j.Biz=C,j.Enterprise=()=>{let e=(0,n.et)(),{isEnterprisePlan:t}=(0,b.cb)(e.currentPlan.id);if(!e.showEnterprisePlan)return null;let a=t?{type:"button",text:"Your current plan",variant:"ghost",disabled:!0,onClick:void 0,loading:!1}:{type:"link",text:"Book a demo",variant:"twilight-muted",href:"https://enterpriseform.lovable.app/",disabled:!1,isExternal:!0,onClick:()=>{r.Ay.capture(o.aw.CONTACT_US_CLICKED,{plan_type:"enterprise",current_plan_id:e.currentPlan.id,current_plan_type:e.currentPlan.type,user_status:e.isLoggedOut?"logged_out":"logged_in"})}};return(0,l.jsx)(u.Mt,{name:"Enterprise",title:"Built for large orgs needing flexibility, scale, and governance.",className:(0,y.cn)("lg:col-span-1",{"sm:col-span-2":3===e.numberOfPlansShown}),plan:v.VL.ENTERPRISE,planType:e.planType,description:"Custom plans",hidePrice:!1,customPriceLabel:"Flexible billing",priceSuffix:"",children:(0,l.jsxs)(_,{children:[(0,l.jsx)(u.vi,{children:(0,l.jsx)(c.O,{...a})}),(0,l.jsx)(u.kp,{label:"Everything in Business, plus:",features:["Dedicated support","Onboarding services","Custom integrations","Group-based access control","Custom design systems"]})]})})}},67017:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var l=a(92903),r=a(11405);let n={sm:640,md:768,lg:1024,xl:1280,"2xl":1536},s=e=>{if("number"==typeof e&&e<0)throw Error("Breakpoint value must be positive");let t=(0,l.A)(),a=(0,r.useMemo)(()=>"number"==typeof e?e:n[e],[e]);return(0,r.useMemo)(()=>void 0!==t.width&&t.width<a,[t.width,a])}},68939:(e,t,a)=>{"use strict";a.d(t,{D:()=>o});var l=a(83469),r=a(99605),n=a(97115),s=a(18883);let i=e=>e?"string"==typeof e?new Date(e):e.toDate():null,o=e=>{var t,a;let{billingPeriodCreditLimit:o,billingPeriodCreditsUsed:d,dailyCreditLimit:c,dailyCreditsUsed:u,bonusCredits:p,billingPeriodEndDate:m,totalCreditsUsedInBillingPeriod:g}=(0,l.$)(e),h=(null==e?void 0:e.plan)==="free"?Math.max(0,Math.min(r.le-(null!=g?g:0),null!=c?c:0)):null!=c?c:0,x={granted:(0,s.V)(null!=p?p:0),billing:(0,s.V)(null!=o?o:0),rollover:(0,s.V)(null!=(t=null==e?void 0:e.rollover_credits_limit)?t:0),daily:(0,s.V)(h)},f={granted:0,billing:(0,s.V)(Math.min(null!=d?d:0,x.billing)),rollover:(0,s.V)(Math.min(null!=(a=null==e?void 0:e.rollover_credits_used)?a:0,x.rollover)),daily:(0,s.V)(Math.min(null!=u?u:0,x.daily))},b=(e=>{if(!e)return!1;let{isLegacyPlan:t}=(0,n.cb)(e.plan),a="ambassador"===e.plan,l="ktlo"===e.plan;return(t||a||l)&&(0===e.billing_period_credits_limit||void 0===e.billing_period_credits_limit)})(e),v={granted:(0,s.V)(x.granted-f.granted),billing:b?0:(0,s.V)(x.billing-f.billing),rollover:(0,s.V)(x.rollover-f.rollover),daily:(0,s.V)(x.daily-f.daily)},w=(0,s.V)(v.granted+v.billing+v.rollover+v.daily),y=(0,s.V)(f.billing+f.rollover+f.daily),j=(0,s.V)(b?x.granted+x.rollover+x.daily:x.granted+x.billing+x.rollover+x.daily),_=[{name:"granted",remaining:v.granted,limit:x.granted},{name:"billing",remaining:v.billing,limit:x.billing},{name:"rollover",remaining:v.rollover,limit:x.rollover},{name:"daily",remaining:v.daily,limit:x.daily}].filter(e=>e.remaining>0);return{totalRemaining:w,totalAllocation:j,totalUsed:y,sources:_,hasCredits:j>0,currentlyConsuming:v.daily>0?"daily":v.rollover>0?"rollover":v.billing>0?"billing":v.granted>0?"granted":null,billingPeriodEndDate:m,creditsResetDate:(e=>{if(!e)return null;if("annual"===e.plan_type){let t=i(e.last_rollover_period||e.billing_period_start_date||e.billing_period_end_date);if(t){let e=t.getMonth()+1,a=t.getFullYear(),l=t.getDate(),r=new Date(a,e+1,0).getDate();return new Date(a,e,Math.min(l,r))}return null}return e.billing_period_end_date?i(e.billing_period_end_date):null})(e),totalCreditsUsedInBillingPeriod:null!=g?g:0}}},69201:(e,t,a)=>{"use strict";a.d(t,{D:()=>s});var l=a(11405),r=a(48591),n=a(60802);let s=e=>{let{supabaseIntegrationData:t}=(0,n.U)(null==e?void 0:e.id),a=(0,r.bj)();return(0,l.useMemo)(()=>!!a||!!(null==t?void 0:t.is_managed_by_lovable),[a,null==t?void 0:t.is_managed_by_lovable])}},70999:(e,t,a)=>{"use strict";a.d(t,{RootDialog:()=>d,f:()=>o});var l=a(99289),r=a(11405),n=a(76918),s=a(6072);let i=(0,n.vt)(e=>({openDialog:null,setOpenDialog:t=>{e({openDialog:t})}}));function o(e){let t=i(e=>e.setOpenDialog);return(0,r.useCallback)(a=>{a?t({component:e,...a}):t(null)},[e,t])}let d=()=>{let e=i(e=>e.openDialog),t=i(e=>e.setOpenDialog);if((0,r.useEffect)(()=>{if(e){var t,a;null==(a=e.dialogProps)||null==(t=a.onOpen)||t.call(a)}},[e]),!e)return null;let{component:a,dialogProps:n,childProps:o}=e;return(0,l.jsx)(s.lG,{...n,open:!!e,onOpenChange:e=>{var a;e||t(null),null==n||null==(a=n.onOpenChange)||a.call(n,e)},children:(0,l.jsx)(a,{...o})})}},72384:(e,t,a)=>{"use strict";a.d(t,{y:()=>p});var l=a(32044),r=a(22803),n=a(33256),s=a(69147),i=a(273),o=a(26787),d=a(71302);function c(e){return"string"==typeof e&&Object.values(d.VL).includes(e)}function u(e){c(e.plan)||(s.logging.error("Workspace contains invalid/outdated plan ID. Defaulting to FREE. Please contact support to update your plan.",{workspace_id:e.id,received_plan:e.plan}),e.plan=d.VL.FREE),e.plan_scheduled&&!c(e.plan_scheduled)&&(s.logging.error("Workspace contains invalid/outdated scheduled plan ID. Removing scheduled plan. Please contact support to update your plan.",{workspace_id:e.id,received_scheduled_plan:e.plan_scheduled}),e.plan_scheduled=void 0)}let p={detail:e=>{let{workspaceId:t,projectId:a}=e;return(0,l.j)({queryKey:i.Or.detail(null!=t?t:""),queryFn:async()=>{if(!t)return{workspace:null,is_member:!1,current_member:null};let e=(0,n.Pg)(),l=await e.get(a?"/projects/".concat(a,"/workspace"):"/workspaces/".concat(t));return l.workspace&&u(l.workspace),l}})},totalProjects:e=>{let{workspaceId:t}=e;return(0,l.j)({queryKey:i.Or.totalProjects(t),queryFn:async()=>{let e=(0,r.P)((0,r.rJ)(o.db,"projects"),(0,r._M)("workspace_id","==",t));return(await (0,r.d_)(e)).data().count},enabled:!!t})},projects:e=>{let{workspaceId:t,userId:a,limit:r,isDraft:s=!1}=e;return(0,l.j)({queryKey:i.Or.projects({workspaceId:null!=t?t:"",userId:a,limit:r,isDraft:s}),queryFn:async()=>{let e=(0,n.Pg)(),l=new URLSearchParams;a&&"all"!==a&&l.set("user_id",a),r&&l.set("limit",r.toString());let i=s?"/workspaces/".concat(t,"/projects/draft"):"/workspaces/".concat(t,"/projects"),o=l.toString()?"".concat(i,"?").concat(l.toString()):i;return await e.get(o)},staleTime:3e5,enabled:!!t})},workspaces:e=>{let{userId:t,disabled:a}=e;return(0,l.j)({queryKey:i.Or.workspaces({userId:null!=t?t:""}),queryFn:async()=>{let e=(0,n.Pg)(),t=await e.get("/user/workspaces");return t.workspaces&&t.workspaces.forEach(u),t},enabled:!!t&&!a})},workspaceUsage:e=>{let{workspaceId:t,month:a,year:r}=e;return(0,l.j)({queryKey:i.Or.workspaceUsage(t,a,r),queryFn:async()=>{let e=(0,n.Pg)();return await e.post("/workspaces/".concat(t,"/usage"),{month:a,year:r})}})},workspaceUserTotalUsage:e=>{let{workspaceId:t}=e;return(0,l.j)({queryKey:i.Or.workspaceUserTotalUsage(t),queryFn:async()=>{let e=(0,n.Pg)();return(await e.get("/workspaces/".concat(t,"/user-total-usage"))).user_usages},enabled:!!t})},workspaceGithubInstallations:e=>{let{workspaceId:t}=e;return(0,l.j)({queryKey:i.Or.workspaceGithubInstallations(t),queryFn:async()=>{let e=(0,n.Pg)();return await e.get("/workspaces/".concat(t,"/github-installations"))},enabled:!!t})},unacceptedInvites:()=>(0,l.j)({queryKey:i.Or.unacceptedInvites(),queryFn:async()=>{let e=(0,n.Pg)();return(await e.get("/user/workspace-invitations")).invitations}}),referralCode:e=>{let{referralCode:t,workspaceId:a}=e;return(0,l.j)({queryKey:i.Or.referralCode(a,t),queryFn:async()=>{if(t)return{referral_code:t};let e=(0,n.Pg)();return await e.post("/workspaces/".concat(a,"/referral-code"))}})},templates:e=>{let{workspaceId:t}=e;return(0,l.j)({queryKey:i.Or.templates(t),queryFn:async()=>{let e=(0,n.Pg)();return await e.get("/workspaces/".concat(t,"/projects/templates"))},enabled:!!t})},workspaceMemberships:e=>{let{workspaceId:t}=e;return(0,l.j)({queryKey:i.Or.memberships(null!=t?t:""),refetchInterval:3e5,queryFn:async()=>(0,n.Pg)().get("/workspaces/".concat(t,"/memberships/search?limit=").concat(20)),enabled:!!t})},searchWorkspaceMemberships:e=>{let{workspaceId:t,params:a}=e;return(0,l.j)({queryKey:i.Or.memberships(t,a),staleTime:3e5,queryFn:async()=>{let e=(0,n.Pg)(),l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"q",a=new URLSearchParams;return e.query&&a.set(t,e.query),e.status&&"all"!==e.status&&a.set("status",e.status),e.role&&a.set("role",e.role),e.limit&&a.set("limit",e.limit.toString()),e.offset&&a.set("offset",e.offset.toString()),a}(a),r="/workspaces/".concat(t,"/memberships/search?").concat(l.toString());return await e.get(r)},enabled:!!t})},integrationsOAuthStatus:e=>{let{workspaceId:t,integrations:a}=e;return(0,l.j)({queryKey:i.Or.integrationsOAuthStatus(t,a),queryFn:async e=>{let{queryKey:a}=e,l=(0,n.Pg)(),r=a[a.length-1].integrations.join(","),s="/workspaces/".concat(t,"/integrations/oauth?integrations=").concat(r);return await l.get(s)}})},integrationOAuthStatus:e=>{let{workspaceId:t,integrationName:a}=e;return(0,l.j)({queryKey:i.Or.integrationOAuthStatus(t,a),queryFn:async()=>{let e=(0,n.Pg)(),l="/workspaces/".concat(t,"/integrations/").concat(a,"/oauth");return await e.get(l)}})}}},73305:(e,t,a)=>{"use strict";a.d(t,{Mt:()=>u,kp:()=>g,oO:()=>p,vi:()=>m});var l=a(99289),r=a(11405),n=a(52170),s=a(53417),i=a(49944),o=a(97757),d=a(97115),c=a(26551);let u=e=>{let{name:t,title:a,plan:r,planType:i,description:o,discountedPrice:u,children:p,savingsAmount:m,showSavingsAsPercentage:g=!1,hidePrice:h=!1,isPopular:x=!1,customPriceLabel:f,priceSuffix:b,isScheduled:v,className:w,highlighted:y}=e,j=(0,d.jL)({id:r,type:i});return(0,l.jsxs)("div",{className:(0,c.cn)("flex h-full w-full max-w-[360px] flex-col gap-4 rounded-xl border border-muted-border p-4 pb-6 sm:max-w-none lg:max-w-[280px]",{"bg-muted":x},{"border-brand-twilight-primary bg-brand-twilight-primary/10":y},w),children:[(0,l.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,l.jsx)("p",{className:"text-xl font-medium",children:t}),(0,l.jsx)("div",{className:"min-h-11 text-sm text-foreground lg:min-h-16",children:a})]}),(0,l.jsx)("div",{className:(0,c.cn)("flex items-baseline",{invisible:h}),children:f?(0,l.jsx)("span",{className:"flex min-h-11 items-center text-base tabular-nums text-muted-foreground",children:f}):(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"flex min-h-11 items-center gap-2",children:[(0,l.jsxs)("p",{className:(0,c.cn)("text-3xl font-medium tabular-nums",u&&"text-muted-foreground line-through"),children:["$",j]}),u&&(0,l.jsxs)("p",{className:"px-1 text-3xl font-medium tabular-nums",children:["$",u]}),(0,l.jsx)("p",{className:"text-base text-muted-foreground",children:null!=b?b:"per month"})]})})}),(0,l.jsx)("div",{className:"-mx-4 flex h-16 items-center border-y border-muted-border px-4 py-2",children:(0,l.jsxs)("div",{className:"flex w-full items-center gap-2",children:["string"==typeof o?(0,l.jsx)("p",{className:"flex-1 text-sm text-muted-foreground",children:o}):(0,l.jsx)("div",{className:"flex-1",children:o}),m&&"Coming soon"!==o&&!v&&m>0&&(0,l.jsx)(s.E,{variant:"success",className:"rounded-full bg-success",children:(0,l.jsx)(n.F,{isShimmering:!0,variant:"success",className:(0,c.cn)("flex min-h-8 flex-col justify-center text-base font-normal text-success-foreground","md:text-sm xl:text-base",{"md:text-xs":m>=100}),children:(0,l.jsx)("div",{className:"text-center",children:g?"Save ".concat(m,"%"):"Save $".concat(m.toLocaleString())})})})]})}),p]})},p=e=>{let{children:t,onClick:a,className:n,...s}=e,[o,d]=(0,r.useState)(!1),u=async()=>{d(!0),await (null==a?void 0:a()),d(!1)};return(0,l.jsx)(i.$,{onClick:u,...s,loading:o,className:(0,c.cn)("w-full",n),children:t})},m=e=>{let{children:t,className:a}=e;return(0,l.jsx)("div",{className:(0,c.cn)("flex flex-col justify-start gap-2",a),children:t})},g=e=>{let{label:t,features:a}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,l.jsx)("p",{className:"text-sm text-foreground",children:t}),(0,l.jsx)("ul",{className:"flex flex-col gap-4 text-base md:text-sm",children:a.map((e,t)=>(0,l.jsxs)("li",{className:"flex items-start gap-2",children:[(0,l.jsx)(o.A,{name:"check",size:"small",className:"relative top-[2px]"}),(0,l.jsx)("span",{className:"text-foreground",children:e})]},t))})]})}},76974:(e,t,a)=>{"use strict";a.d(t,{$M:()=>u,Mu:()=>m,k9:()=>p});var l=a(99289),r=a(34363),n=a(11405),s=a(76918),i=a(37079),o=a(72384),d=a(78316);let c=(0,n.createContext)(null);function u(e){let{children:t}=e,a=(0,n.useRef)((0,s.vt)(e=>({workspaces:[],error:null,isLoading:!0,showCreateWorkspaceDialog:!1,setShowCreateWorkspaceDialog:t=>{e({showCreateWorkspaceDialog:t})}}))),{authUser:u}=(0,i.Z2)(),{data:p,error:m,isFetching:g}=(0,r.I)(o.y.workspaces({userId:null==u?void 0:u.uid,disabled:!u||!(0,d.H)(u)}));return(0,n.useEffect)(()=>{(null==p?void 0:p.workspaces)&&a.current.setState({workspaces:p.workspaces}),a.current.setState({isLoading:g})},[p,g]),(0,n.useEffect)(()=>{m&&a.current.setState({error:m})},[m]),(0,l.jsx)(c.Provider,{value:{store:a.current},children:t})}function p(){let e=(0,n.useContext)(c);if(!e)throw Error("useWorkspaceContext must be used within a WorkspaceProvider");return e}function m(e){let{store:t}=p();if(!t)throw Error("useWorkspaceStore must be used within a WorkspaceProvider");return t(e)}},78316:(e,t,a)=>{"use strict";a.d(t,{H:()=>l});let l=e=>e.email_verified||"password"!==e.source_sign_in_provider},80328:(e,t,a)=>{"use strict";a.d(t,{M:()=>d,l:()=>c});var l=a(99289),r=a(34363),n=a(11405),s=a(50088),i=a(37079);let o=(0,n.createContext)(null);function d(e){let{children:t}=e,{authUser:a}=(0,i.Z2)(),{data:d,isLoading:c}=(0,r.I)(s.Y.experimentalFeatures({user:a})),u=(0,n.useMemo)(()=>({features:d||null,isLoading:c}),[d,c]);return(0,l.jsx)(o.Provider,{value:u,children:t})}function c(){let e=(0,n.useContext)(o);if(!e)throw Error("LabsFeaturesContext not found");return e}},83469:(e,t,a)=>{"use strict";a.d(t,{$:()=>o});var l=a(34363),r=a(11405),n=a(37079),s=a(33256),i=a(273);let o=e=>{var t,a,o,c,u;let{isAuthenticated:p,authUser:m}=(0,n.Z2)(),{data:g}=(0,l.I)({queryKey:[...i.Or.detail(null!=(t=null==e?void 0:e.id)?t:""),"users",null!=(a=null==m?void 0:m.uid)?a:"","monthly-usage"],queryFn:async()=>{if(!(null==e?void 0:e.id)||!(null==m?void 0:m.uid))return{user_monthly_usage:0,max_usage:null};try{let t=(0,s.Pg)();return await t.get("/workspaces/".concat(null==e?void 0:e.id,"/user-monthly-usage"))}catch(e){return{user_monthly_usage:0,max_usage:null}}},enabled:!!(null==e?void 0:e.id)&&!!(null==m?void 0:m.uid)}),h=(0,r.useMemo)(()=>{var t;if(e&&p)return!!((null!=(t=e.credits_granted)?t:0)-e.credits_used>0)||!!(e.daily_credits_used<e.daily_credits_limit)||!!((e.billing_period_credits_used||0)<e.billing_period_credits_limit)},[e,p]),x=null==e?void 0:e.daily_credits_limit,f=null==e?void 0:e.daily_credits_used,b=null==e?void 0:e.billing_period_credits_limit,v=null==e?void 0:e.billing_period_credits_used,w=null==e?void 0:e.total_credits_used_in_billing_period,y=null!=(o=null==g?void 0:g.max_usage)?o:null;return{dailyCreditLimit:x,dailyCreditsUsed:f,billingPeriodCreditLimit:b,billingPeriodCreditsUsed:v,totalCreditsUsedInBillingPeriod:w,rolloverCredits:(null==e?void 0:e.rollover_credits_limit)!==void 0&&(null==e?void 0:e.rollover_credits_used)!==void 0?e.rollover_credits_limit-e.rollover_credits_used:void 0,bonusCredits:(null==e?void 0:e.credits_granted)!==void 0?e.credits_granted-(null!=(c=e.credits_used)?c:0):void 0,areCreditsAvailable:h,billingPeriodEndDate:d(null==e?void 0:e.billing_period_end_date),userMonthlyUsage:null!=(u=null==g?void 0:g.user_monthly_usage)?u:0,maxUserMonthlyUsage:y,hasCreditLimit:null!==y&&y>0,workspaceDefaultLimit:null==e?void 0:e.default_monthly_member_credit_limit}},d=e=>e?"string"==typeof e?new Date(e):e.toDate():null},90352:(e,t,a)=>{"use strict";a.d(t,{d:()=>i});var l=a(99289),r=a(23406),n=a(11405),s=a(26551);let i=n.forwardRef((e,t)=>{let{className:a,thumbClassName:n,size:i="default",...o}=e;return(0,l.jsx)(r.bL,{className:(0,s.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50","sm"===i&&"h-4 w-7","lg"===i&&"h-6 w-11",a),...o,ref:t,children:(0,l.jsx)(r.zi,{className:(0,s.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0 dark:data-[state=unchecked]:bg-foreground","sm"===i&&"h-3 w-3 data-[state=checked]:translate-x-3","lg"===i&&"h-5 w-5 data-[state=checked]:translate-x-5",n)})})});i.displayName=r.bL.displayName},91352:(e,t,a)=>{"use strict";a.d(t,{n:()=>y});var l=a(99289),r=a(1596),n=a(74174),s=a(11405),i=a(43328),o=a(2906),d=a(49944),c=a(6072),u=a(97757),p=a(86077),m=a(97115),g=a(26551),h=a(13070),x=a(93652);let f=["Private projects","User roles & permissions","Custom domains","Remove the Lovable badge"],b=["SSO","Personal Projects","Opt out of data training","Design templates"],v=["Downgrade anytime","Credits rollover"],w=e=>{let{features:t}=e;return(0,l.jsx)("div",{className:"mt-3 space-y-3",children:t.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-start gap-[6px]",children:[(0,l.jsx)(u.A,{name:"thick_check",size:"small",className:"relative top-[2px]"}),(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:e})]},t))})},y=e=>{let{targetPlan:t,availablePlans:a,title:u,subtitle:y,showCreditDifference:j=!0,showWhatsChanging:_=!0,showPlanFeatures:N=!0,showNextBillingCycle:k=!0,showPlanDropdown:C=!0}=e,{getDisplayPrice:P,handleUpgradeConfirmed:S,currentPlan:E,checkoutLoading:A}=(0,o.et)(),D=(0,m.RL)(E.id),L=(0,m.m6)(t),[I,T]=(0,s.useState)(t),R=(0,m.RL)(I),O=k&&!N,F=(0,i.useCurrentWorkspaceStore)(e=>e.currentWorkspace),M=(null==F?void 0:F.billing_period_end_date)?(0,r.GP)((0,h.ay)(F.billing_period_end_date),"MMMM do"):(0,r.GP)((0,n.P)(new Date,1),"MMMM do"),z=(0,m.jL)(E),W=P(I),K=Math.max(0,W-z),B=R-D,U=P(I),G=async()=>{await S(I)};return(0,l.jsxs)(c.Cf,{className:"max-w-[425px]",children:[(0,l.jsxs)(c.c7,{className:"space-y-4",children:[(0,l.jsx)(p.Fy,{className:"size-9 shrink-0"}),(0,l.jsxs)("div",{children:[(0,l.jsx)(c.L3,{className:"mb-2 text-3xl font-medium",children:u}),(0,l.jsx)("p",{className:"text-sm text-foreground",children:y})]})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,l.jsxs)("div",{className:"rounded-lg border-2 border-muted-border p-4",children:[(0,l.jsx)("div",{className:"text-lg font-medium",children:"Upgrade Fee"}),(0,l.jsxs)("div",{className:(0,g.cn)("flex items-center",{"mb-3":C}),children:[(0,l.jsxs)("span",{className:"text-4xl font-medium",children:["$",j?K:W]}),(0,l.jsx)("span",{className:"ml-2 text-base text-foreground",children:j?"due today":"per month"})]}),C&&(0,l.jsx)(x.h,{options:a,selectedOption:I,onSelect:T,showCreditDifference:j,currentPlanLimit:D})]}),_&&(0,l.jsxs)("div",{className:"rounded-lg bg-muted p-4",children:[(0,l.jsx)("p",{className:"text-sm font-medium",children:"What's changing?"}),(0,l.jsxs)("p",{className:"mt-1.5 text-sm text-muted-foreground",children:["You are unlocking all business features"," ",B?"and receiving ".concat(B," credits today"):"but your credits will stay the same"]})]}),N&&(0,l.jsxs)("div",{className:"rounded-lg bg-muted p-4",children:[(0,l.jsx)("p",{className:"text-sm font-medium",children:"You will unlock:"}),(0,l.jsx)(w,{features:[..."biz"===L?b:f,...O?[]:v]})]}),k&&(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"text-sm font-medium",children:["Next billing cycle (",M,")"]}),(0,l.jsx)(w,{features:["Your plan will update to $".concat(U," / month for ").concat((0,m.RL)(I)," credits"),...O?v:[]]})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 border-t pt-4",children:[(0,l.jsx)(c.HM,{asChild:!0,children:(0,l.jsx)(d.$,{variant:"decline",className:"flex-1",children:"Cancel"})}),(0,l.jsx)(d.$,{className:"flex-1",variant:"default",onClick:G,loading:!!A,children:"Confirm"})]})]})}},92903:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var l=a(11405);let r=()=>{let[e,t]=(0,l.useState)({width:void 0,height:void 0});return(0,l.useEffect)(()=>{{let e=()=>{t({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}},[]),e}},93652:(e,t,a)=>{"use strict";a.d(t,{h:()=>d});var l=a(99289),r=a(5531),n=a(97757),s=a(97115),i=a(71302),o=a(26551);function d(e){let{options:t,selectedOption:a,onSelect:d,disabled:c=!1,disabledText:u,showCreditDifference:p=!1,currentPlanLimit:m}=e,g=e=>{let t=(0,s.RL)(e);if(p&&void 0!==m){let a=t-m;if(e===i.VL.KTLO)return"5 daily credits";if(a>0)return"+".concat(a," additional credits");if(0===a)return"No additional credits"}return"".concat(t," credits / month")},h=()=>g(a);if(c){let e=u||h();return e?(0,l.jsx)("div",{className:"flex w-full items-center justify-between rounded-md border border-muted-border bg-muted px-3 py-2 text-sm text-muted-foreground",children:e}):null}return(0,l.jsxs)(r.rI,{children:[(0,l.jsxs)(r.ty,{className:"flex w-full items-center justify-between rounded-md border border-muted-border bg-background px-3 py-2 text-sm focus:outline-none",children:[(0,l.jsx)("span",{children:h()}),(0,l.jsx)(n.A,{name:"chevron_right",className:"flex-shrink-0 rotate-90",size:"small"})]}),(0,l.jsx)(r.SQ,{className:"max-h-[300px] w-[var(--radix-dropdown-menu-trigger-width)] overflow-auto",align:"start",children:t.map(e=>(0,l.jsxs)(r._2,{onClick:()=>d(e),className:(0,o.cn)("flex w-full cursor-pointer items-center justify-between px-3 py-2 text-sm hover:bg-brand-twilight focus:bg-brand-twilight",a===e&&"bg-brand-twilight-primary text-affirmative-primary-foreground hover:bg-brand-twilight-primary hover:text-affirmative-primary-foreground focus:bg-brand-twilight-primary focus:text-affirmative-primary-foreground"),children:[(0,l.jsx)("span",{className:"block overflow-hidden text-ellipsis whitespace-nowrap",children:g(e)}),a===e&&(0,l.jsx)(n.A,{name:"check",size:"small",className:"ml-2 flex-shrink-0"})]},e))})]})}},99017:(e,t,a)=>{"use strict";a.d(t,{Bc:()=>i,PR:()=>u,ZI:()=>c,k$:()=>d,m_:()=>o});var l=a(99289),r=a(1571),n=a(11405),s=a(26551);let i=e=>{let{instant:t,delayDuration:a,skipDelayDuration:n=550,...s}=e;return(0,l.jsx)(r.Kq,{delayDuration:null!=a?a:700*!t,skipDelayDuration:n,...s})},o=e=>{let{instant:t,delayDuration:a,...n}=e;return(0,l.jsx)(r.bL,{delayDuration:null!=a?a:700*!t,...n})},d=r.l9,c=n.forwardRef((e,t)=>{let{className:a,sideOffset:n=4,...i}=e;return(0,l.jsx)(r.ZL,{children:(0,l.jsx)(r.UC,{ref:t,sideOffset:n,className:(0,s.cn)("z-[10000] overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground shadow-md","data-[state=delayed-open]:animate-in data-[state=delayed-open]:fade-in-0 data-[state=delayed-open]:zoom-in-95","data-[state=delayed-open]:data-[side=bottom]:slide-in-from-top-2 data-[state=delayed-open]:data-[side=left]:slide-in-from-right-2 data-[state=delayed-open]:data-[side=right]:slide-in-from-left-2 data-[state=delayed-open]:data-[side=top]:slide-in-from-bottom-2","data-[state=instant-open]:animate-in data-[state=instant-open]:fade-in-0","data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95",a),...i})})});c.displayName=r.UC.displayName;let u=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)(r.i3,{ref:t,className:(0,s.cn)("fill-primary",a),...n})});u.displayName=r.i3.displayName},99280:(e,t,a)=>{"use strict";a.d(t,{Y:()=>r});var l=a(97115);function r(e){let{currentPlan:t,targetPlanCategory:a}=e,r=(0,l.m6)(t.id)===a;if(!["pro","biz"].includes(a))throw Error("Target plan category must be pro or biz");return r?(0,l.yQ)(t.id,a):(0,l.Bq)(t.id,a)}}}]);