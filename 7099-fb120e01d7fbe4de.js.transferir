try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="713e03d0-5ae5-4e71-9854-30b50d17da99",e._sentryDebugIdIdentifier="sentry-dbid-713e03d0-5ae5-4e71-9854-30b50d17da99")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7099],{7099:(e,t,r)=>{"use strict";r.d(t,{U:()=>L});var n=r(99289),a=r(19550),s=r.n(a),l=r(22291),o=r(11405),i=r(27317),c=r(2418),d=r(81797),u=r(24159),m=r(14450),p=r(49944),x=r(9562),h=r(6072),j=r(67017),g=r(51255),f=r(42581);let b=e=>{let{handleRemix:t,isRemixing:r,isOpen:a,onClose:l,project:o,remixDisabled:i,remixDisableReason:c}=e,d=(0,g.O)({projectId:o.id}),u=(0,j.A)("md");return(0,n.jsx)(h.lG,{open:a,onOpenChange:l,children:(0,n.jsxs)(h.Cf,{className:"flex h-[85vh] max-h-none max-w-[90vw] flex-col rounded-3xl p-4",size:"xl",hideCloseButton:!0,children:[(0,n.jsxs)("div",{className:"flex items-center ".concat(u?"justify-center":"justify-between"),children:[!u&&(0,n.jsx)("div",{className:"flex items-center gap-1.5 truncate pl-0.5",children:(0,n.jsxs)(h.L3,{className:"truncate",children:[o.name,o.authorName&&(0,n.jsxs)("span",{className:"ml-1 text-muted-foreground/50",children:["by ",o.authorName]})]})}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(p.$,{asChild:!0,variant:"outline",className:"flex items-center gap-1",children:(0,n.jsx)(s(),{href:"/projects/".concat(o.id),children:"Open Project"})}),(0,n.jsx)(x.Q,{showTooltip:i,tooltipContent:c,children:(0,n.jsx)(p.$,{onClick:()=>{t({projectId:o.id})},disabled:r||i,loading:r,className:"flex items-center gap-1",children:r?"Remixing...":"Remix"})})]})]}),(0,n.jsx)("div",{className:"flex flex-1 overflow-hidden rounded-lg border",children:(0,n.jsx)("iframe",{sandbox:f.Z,src:d,className:"h-full w-full",style:{border:"none",margin:0,padding:0},allow:"accelerometer; autoplay; camera; encrypted-media; fullscreen; geolocation; gyroscope; microphone; midi; clipboard-read; clipboard-write; payment; usb; vr; xr-spatial-tracking; screen-wake-lock; magnetometer; ambient-light-sensor; battery; gamepad; picture-in-picture; display-capture; bluetooth;"})})]})})},v=e=>{let{handlePreview:t}=e;return(0,n.jsx)("div",{className:"absolute inset-0 hidden cursor-pointer items-center justify-center bg-black/30 opacity-0 transition-all duration-300 ease-out group-hover:opacity-100 md:flex",onClick:t,children:(0,n.jsx)("span",{className:"font-light translate-y-1 transform text-lg text-white opacity-0 transition-all duration-300 ease-out group-hover:translate-y-0 group-hover:opacity-70",children:"Preview"})})},w=(0,o.memo)(e=>{let{project:t,previewUrl:r,isCommunityProject:a,isTemplate:l=!1,selectTemplate:i,positionIndex:p}=e,[x,h]=(0,o.useState)(!1),{mutate:j,isPending:g}=(0,m.O)(),f=!!t.supabase_project_config;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s(),{href:r,className:"group relative aspect-video w-full overflow-hidden rounded-xl bg-muted",scroll:!1,onClick:e=>{l&&i&&(e.preventDefault(),e.stopPropagation(),i()),0!==e.button||e.metaKey||e.ctrlKey||e.altKey||e.shiftKey||e.defaultPrevented||a&&(e.preventDefault(),d.Ay.capture(u.$6.COMMUNITY.PROJECT_CLICKED,{project_id:t.id,project_name:t.name,project_category:t.category,position_index:p}),h(!0))},children:(0,n.jsxs)("div",{className:"relative h-full w-full",children:[t.latest_screenshot_url?(0,n.jsx)(c.default,{src:t.latest_screenshot_url,alt:"Screenshot of ".concat(t.name||"project"),className:"rounded-xl border border-muted-border",fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",style:{objectFit:"cover",objectPosition:"top"},draggable:"false"}):(0,n.jsx)("div",{className:"absolute inset-0 rounded-xl border border-muted-border bg-muted"}),a&&(0,n.jsx)(v,{handlePreview:e=>{e.preventDefault(),e.stopPropagation(),h(!0)}})]})}),(0,n.jsx)(b,{handleRemix:j,isRemixing:g,remixDisabled:f,remixDisableReason:f?"This project can't be remixed because it's connected to Supabase":void 0,isOpen:x,onClose:()=>h(!1),project:{id:t.id,name:t.name||"Untitled Project",authorName:t.user_display_name||void 0}})]})});w.displayName="ProjectImage";var y=r(62560),_=r.n(y);function N(){return(0,n.jsx)("span",{className:"bg-foreground before:bg-foreground after:bg-foreground ".concat(_().DotElastic," inline-block")})}let P=e=>{let{project:t}=e;return(0,n.jsx)("p",{className:"overflow-hidden truncate whitespace-nowrap",children:"in_progress"!==t.status||t.name?t.name||t.id:(0,n.jsxs)(n.Fragment,{children:["Dreaming up name",(0,n.jsx)(N,{})]})})};var C=r(86077),k=r(99017);let R=(0,o.memo)(e=>{let{supabaseProjectConfig:t,clickable:r=!0}=e;return(0,n.jsxs)(k.m_,{children:[(0,n.jsx)(k.k$,{asChild:!0,children:r?(0,n.jsx)(s(),{href:"https://supabase.com/dashboard/project/".concat(null==t?void 0:t.supabase_project_id),target:"_blank",children:(0,n.jsx)(C.Wu,{className:"size-4"})}):(0,n.jsx)("div",{children:(0,n.jsx)(C.Wu,{className:"size-4"})})}),(0,n.jsx)(k.ZI,{children:r?"Click to open in Supabase.":"Connected to Supabase"})]})});R.displayName="SupabaseIcon";var D=r(44920),E=r(37079),I=r(49612),S=r(84923),O=r(53090),z=r(53417),A=r(5531),F=r(97757),T=r(51917),U=r(74892);let W=e=>{let{project:t}=e,{authUser:r}=(0,E.Z2)(),a=(0,l.useRouter)(),[s,i]=(0,o.useState)(!1),[c,d]=(0,o.useState)(!1),[u,x]=(0,o.useState)(!1),{mutate:h,isPending:j}=(0,m.O)(),g=!t.supabase_project_config;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(A.rI,{open:s,onOpenChange:i,children:[(0,n.jsx)(A.ty,{asChild:!0,children:(0,n.jsx)(p.$,{variant:"ghost",size:"icon-sm",className:"mb-auto transition-opacity ".concat(s?"opacity-100":"opacity-100 group-hover:opacity-100 sm:opacity-0 sm:group-hover:opacity-100"),disabled:j,children:(0,n.jsx)(F.A,{name:"more_horiz",size:"small"})})}),(0,n.jsxs)(A.SQ,{align:"end",children:[(0,n.jsxs)(A._2,{onClick:e=>{if(e.preventDefault(),e.stopPropagation(),!r)return void a.push("/login?redirect=".concat(window.location.pathname));h({projectId:t.id,includeHistory:!1,includeCustomKnowledge:!1})},disabled:!g||j,children:[(0,n.jsx)(F.A,{name:j?"progress_activity":"shuffle",size:"small",className:j?"animate-spin":""}),j?"Remixing...":"Remix",!g&&(0,n.jsx)("span",{className:"ml-2 text-xs text-muted-foreground",children:"(Unavailable for Supabase projects)"})]}),(0,n.jsxs)(A._2,{onClick:()=>{i(!1),d(!0)},children:[(0,n.jsx)(F.A,{name:"edit_square",size:"small"}),"Rename"]}),(0,n.jsxs)(A._2,{onClick:()=>{i(!1),a.push("/projects/".concat(t.id,"?settings=project"))},children:[(0,n.jsx)(F.A,{name:"settings",size:"small"}),"Settings"]}),(0,n.jsxs)(A._2,{onClick:()=>{i(!1),x(!0)},className:"text-destructive-primary",children:[(0,n.jsx)(F.A,{name:"delete",size:"small"}),"Delete"]})]})]}),(0,n.jsx)(O.U,{project:t,isOpen:c,onClose:()=>d(!1)}),(0,n.jsx)(S.B,{project:t,isOpen:u,onClose:()=>x(!1)})]})},L=(0,o.memo)(e=>{var t;let{project:r,isSupabaseClickable:a=!0,showAvatar:l=!0,selectedCategory:c,subtitleType:d="remixes",isCommunityProject:u,positionIndex:m,isTemplate:p=!1,selectTemplate:x}=e,h=null==r?void 0:r.id,j=(0,o.useMemo)(()=>h?"/projects/".concat(h):"",[h]);if(null===r)return(0,n.jsx)(i.p,{});let g=r.remix_count?r.remix_count:0,f=1===g?"1 Remix":"".concat(g," Remixes"),b="all"===c||c!==r.category,v=(()=>{switch(d){case"remixes":return f;case"edit-time":return r.updated_at?"Edited ".concat((0,D.P)({updatedAt:r.updated_at})):null;case"create-time":return r.created_at?"Created ".concat((0,D.P)({updatedAt:r.created_at}).replace("about ","")):null;case"trending-rank":return null!=r.feature_rank?"Ranked ".concat(r.feature_rank):"Ranked -";case"created-by":return r.created_by?(0,n.jsx)(T.f,{username:r.created_by,prefix:"Created by ",showAsLink:!1,className:""}):null;default:return d}})();return(0,n.jsxs)("div",{className:"group relative flex flex-col",children:[(0,n.jsxs)("div",{className:"relative mb-3 flex flex-col",children:[(0,n.jsx)(w,{project:r,previewUrl:j,isCommunityProject:u,isTemplate:p,selectTemplate:x,positionIndex:m}),r.is_published&&!u&&(0,n.jsx)("div",{className:"pointer-events-none absolute bottom-0 left-0 p-2",children:(0,n.jsx)(z.E,{variant:"secondary",className:"text-xs opacity-50",children:"Published"})})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[l&&(0,n.jsx)(s(),{href:"/users/".concat(r.created_by),className:"transition-opacity hover:opacity-80",children:(0,n.jsx)(I.H,{user:{id:r.user_id,username:r.user_display_name||""},photoURL:null!=(t=r.user_photo_url)?t:void 0,className:"h-9 w-9"})}),(0,n.jsxs)("div",{className:"flex w-full min-w-0 justify-between",children:[(0,n.jsxs)("div",{className:"flex min-w-0 flex-col",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 truncate",children:[(0,n.jsx)(P,{project:r}),b&&(0,n.jsx)(U._,{category:r.category})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[v&&(0,n.jsx)("p",{children:v}),!l&&r.supabase_project_config&&(0,n.jsx)(R,{supabaseProjectConfig:r.supabase_project_config,clickable:a})]})]}),(!l||!p)&&(0,n.jsx)(W,{project:r})]})]})]})});L.displayName="ProjectCard"},14450:(e,t,r)=>{"use strict";r.d(t,{O:()=>m});var n=r(6919),a=r(22291),s=r(98213),l=r(37079),o=r(43328),i=r(33256),c=r(69147);let d={title:"Project remixed",description:"We're taking you to the new project page"},u={unauthorized:"You have to be logged in to remix projects",workspace:"You need to be in a workspace to remix projects",general:"Error remixing project",generalDescription:"Please try again"},m=e=>{let{authUser:t}=(0,l.Z2)(),r=(0,a.useRouter)(),m=(0,o.useCurrentWorkspaceStore)(e=>e.currentWorkspace),p=(null==e?void 0:e.currentWorkspaceId)||(null==m?void 0:m.id),{mutate:x,isPending:h}=(0,n.n)({mutationFn:async e=>{let{projectId:t,includeHistory:r=!1,includeCustomKnowledge:n=!1}=e;return p?(0,i.Pg)().post("/projects/".concat(t,"/remix"),{include_history:r,include_custom_knowledge:n,workspace_id:p}):void s.oR.error(u.workspace)},onMutate:()=>{var t;null==e||null==(t=e.onSubmit)||t.call(e)},onSuccess:e=>{e&&(s.oR.success(d.title,{description:d.description}),r.push("/projects/".concat(e.project_id)))},onError:(e,t)=>{let{projectId:r}=t;c.logging.error("Error remixing project",{projectId:r,error:e}),401===e.status?s.oR.error(u.unauthorized):s.oR.error(u.general,{description:u.generalDescription})}});return{mutate:x,isPending:h&&!!t}}},27317:(e,t,r)=>{"use strict";r.d(t,{p:()=>l});var n=r(99289),a=r(16161),s=r(26551);let l=e=>{let{mainSkeletonClassName:t}=e;return(0,n.jsxs)("div",{className:"group flex flex-col",children:[(0,n.jsx)(a.E,{className:(0,s.cn)("mb-3 aspect-video h-full w-full rounded-lg bg-muted",t)}),(0,n.jsxs)("div",{className:"flex flex-col gap-2 py-1",children:[(0,n.jsx)(a.E,{className:"h-3.5 w-[150px] bg-muted"}),(0,n.jsx)(a.E,{className:"h-3.5 w-[120px] bg-muted"})]})]})}},37598:(e,t,r)=>{"use strict";r.d(t,{C5:()=>f,MJ:()=>j,Rr:()=>g,eI:()=>x,lR:()=>h,lV:()=>c,zB:()=>u});var n=r(99289),a=r(52954),s=r(11405),l=r(26984),o=r(82162),i=r(26551);let c=l.Op,d=s.createContext({}),u=e=>{let{...t}=e;return(0,n.jsx)(d.Provider,{value:{name:t.name},children:(0,n.jsx)(l.xI,{...t})})},m=()=>{let e=s.useContext(d),t=s.useContext(p),{getFieldState:r,formState:n}=(0,l.xW)(),a=r(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=t;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...a}},p=s.createContext({}),x=s.forwardRef((e,t)=>{let{className:r,...a}=e,l=s.useId();return(0,n.jsx)(p.Provider,{value:{id:l},children:(0,n.jsx)("div",{ref:t,className:(0,i.cn)("space-y-2",r),...a})})});x.displayName="FormItem";let h=s.forwardRef((e,t)=>{let{className:r,...a}=e,{error:s,formItemId:l}=m();return(0,n.jsx)(o.Label,{ref:t,className:(0,i.cn)(s&&"",r),htmlFor:l,...a})});h.displayName="FormLabel";let j=s.forwardRef((e,t)=>{let{...r}=e,{error:s,formItemId:l,formDescriptionId:o,formMessageId:i}=m();return(0,n.jsx)(a.DX,{ref:t,id:l,"aria-describedby":s?"".concat(o," ").concat(i):"".concat(o),"aria-invalid":!!s,...r})});j.displayName="FormControl";let g=s.forwardRef((e,t)=>{let{className:r,...a}=e,{formDescriptionId:s}=m();return(0,n.jsx)("p",{ref:t,id:s,className:(0,i.cn)("text-sm text-muted-foreground",r),...a})});g.displayName="FormDescription";let f=s.forwardRef((e,t)=>{let{className:r,children:a,...s}=e,{error:l,formMessageId:o}=m(),c=l?String(null==l?void 0:l.message):a;return c?(0,n.jsx)("p",{ref:t,id:o,className:(0,i.cn)("text-xs font-medium text-destructive-primary",r),...s,children:c}):null});f.displayName="FormMessage"},42581:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});let n="allow-scripts allow-same-origin allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-presentation allow-downloads allow-popups"},44920:(e,t,r)=>{"use strict";r.d(t,{P:()=>s});var n=r(57355),a=r(22803);let s=e=>{let{updatedAt:t}=e,r=null;return"string"==typeof t?r=new Date(t):t instanceof a.Dc?r=t.toDate():t instanceof Date?r=t:"number"==typeof t&&(r=new Date(t)),r?(0,n.m)(r,{addSuffix:!0}):""}},51255:(e,t,r)=>{"use strict";r.d(t,{O:()=>a});var n=r(40074);let a=e=>{let{projectId:t,projectName:r,useCacheBuster:a,sha:s}=e;if(!t&&!r)throw Error("projectId or projectName must be provided");if(t&&r)throw Error("projectId and projectName cannot both be provided");let l=n.env.NEXT_PUBLIC_PROXY_WORKER_PROTOCOL||"https",o=n.env.NEXT_PUBLIC_PROXY_WORKER_PORT?":".concat(n.env.NEXT_PUBLIC_PROXY_WORKER_PORT):"",i=s?"-".concat(s.slice(0,8)):"";try{let e=new URL("".concat(l,"://").concat(void 0!==r?"preview":"id-preview").concat(i,"--").concat(r||t,".").concat("lovable.app").concat(o));return a&&e.searchParams.set("cache",Date.now().toString()),e.toString()}catch(e){return window.location.href="/","/"}}},51917:(e,t,r)=>{"use strict";r.d(t,{f:()=>c});var n=r(99289),a=r(34363),s=r(19550),l=r.n(s),o=r(11405),i=r(50088);let c=(0,o.memo)(function(e){var t,r;let{username:s,showAsLink:o=!0,className:c="font-medium",fallback:d,prefix:u=""}=e,{data:m,isLoading:p}=(0,a.I)(i.Y.publicProfile({username:s||""}));if(!s&&!d)return(0,n.jsxs)("span",{className:c,children:[u,"Unknown User"]});let x=null!=d?d:s;if(p)return o?(0,n.jsxs)(n.Fragment,{children:[u,(0,n.jsx)(l(),{href:"/@".concat(s),className:c,target:"_blank",children:x})]}):(0,n.jsxs)("span",{className:c,children:[u,x]});let h=null!=(r=null==m||null==(t=m.attributes)?void 0:t.display_name)?r:x;return o?(0,n.jsxs)(n.Fragment,{children:[u,(0,n.jsx)(l(),{href:"/@".concat(s),className:c,target:"_blank",children:h})]}):(0,n.jsxs)("span",{className:c,children:[u,h]})})},53090:(e,t,r)=>{"use strict";r.d(t,{U:()=>b});var n=r(99289),a=r(74880),s=r(51252),l=r(6919),o=r(26984),i=r(98213),c=r(99490),d=r(43328),u=r(49944),m=r(6072),p=r(37598),x=r(88852),h=r(34936),j=r(33256),g=r(273);let f=c.Ik({newProjectName:c.Yj().min(1,"Project name is required").max(45,"Project name must be less than 45 characters").regex(/^[a-z0-9-]+$/,{message:"Project name can only contain lowercase letters, numbers, and hyphens."}).regex(/^(?!.*--).+$/,{message:"Project name cannot contain consecutive hyphens."}).regex(/^[a-z]/,{message:"Project name must start with a lowercase letter."}).regex(/[a-z0-9]$/,{message:"Project name cannot end with a hyphen."})}),b=e=>{let{project:t,isOpen:r,onClose:c}=e,b=(0,s.jE)(),v=(0,d.useCurrentWorkspaceStore)(e=>{var t;return null==(t=e.currentWorkspace)?void 0:t.id}),w=(0,o.mN)({resolver:(0,a.u)(f),defaultValues:{newProjectName:t.name||""}}),y=(0,l.n)({mutationFn:async e=>{let{name:r}=e;return(0,j.Pg)().put("/projects/".concat(t.id),{name:r})},onSuccess:(e,t)=>{b.invalidateQueries({queryKey:g.gO.all}),b.invalidateQueries({queryKey:g.Or.detail(v||"")}),i.oR.success("Project renamed successfully"),c(),w.reset({newProjectName:t.name})},onError:e=>{(0,h.Ni)(e)}}),_=async e=>{await y.mutateAsync({name:e.newProjectName})},N=!!w.formState.dirtyFields.newProjectName;return(0,n.jsx)(m.lG,{open:r,onOpenChange:c,children:(0,n.jsxs)(m.Cf,{size:"sm",children:[(0,n.jsxs)(m.c7,{children:[(0,n.jsx)(m.L3,{children:"Rename project"}),(0,n.jsx)(m.rr,{children:(0,n.jsx)("p",{children:"Give your project a new name."})})]}),(0,n.jsx)(p.lV,{...w,children:(0,n.jsxs)("form",{onSubmit:w.handleSubmit(_),className:"flex w-full flex-col gap-4",children:[(0,n.jsx)("div",{className:"w-full space-y-4",children:(0,n.jsx)(p.zB,{control:w.control,name:"newProjectName",render:e=>{let{field:t}=e;return(0,n.jsxs)(p.eI,{children:[(0,n.jsx)(p.lR,{children:"Project Name"}),(0,n.jsx)(p.MJ,{children:(0,n.jsx)(x.p,{placeholder:"Enter new project name",...t})}),!w.formState.errors.newProjectName&&(0,n.jsx)(p.Rr,{children:"Use lowercase letters, numbers, and hyphens only. Name must start with a lowercase letter. Example: my-awesome-project"}),(0,n.jsx)(p.C5,{})]})}})}),(0,n.jsxs)(m.Es,{children:[(0,n.jsx)(u.$,{variant:"outline",onClick:c,type:"button",children:"Cancel"}),(0,n.jsx)(u.$,{type:"submit",disabled:!N||y.isPending,loading:y.isPending,children:y.isPending?"Renaming...":"Rename Project"})]})]})})]})})}},62560:e=>{e.exports={DotElastic:"AnimatedDots_DotElastic__JXvFf","DotElastic-before":"AnimatedDots_DotElastic-before__gaC87","DotElastic-after":"AnimatedDots_DotElastic-after__CStzD"}},74892:(e,t,r)=>{"use strict";r.d(t,{_:()=>o,y:()=>s});var n=r(99289);r(11405);var a=r(26551);let s={internal_tools:"Internal Tools",website:"Website",personal:"Personal",consumer_app:"Consumer App",b2b_app:"B2B App",prototype:"Prototype"},l={internal_tools:"bg-brand-sapphire text-brand-sapphire-foreground",website:"bg-brand-saffron text-brand-saffron-foreground",personal:"bg-brand-bubblegum text-brand-bubblegum-foreground",consumer_app:"bg-brand-flamingo text-brand-flamingo-foreground",b2b_app:"bg-brand-twilight text-brand-twilight-foreground",prototype:"bg-brand-tiger text-brand-tiger-foreground"},o=e=>{let{category:t}=e;if(!t)return null;let r=s[t],o=l[t];return(0,n.jsx)("span",{className:(0,a.cn)("mr-2 inline-block rounded-md px-2 py-0.5 text-xs font-medium",o),title:r,children:r})}},81688:(e,t,r)=>{"use strict";r.d(t,{CS:()=>n,oX:()=>l,rI:()=>s,rZ:()=>a}),r(99289),r(49944),r(97757);let n="GPT-Engineer-App",a=(e,t)=>"https://github.com/".concat(t||n,"/").concat(e),s=(e,t,r)=>"".concat(a(e,r),"/commit/").concat(t),l=e=>{var t;let r=null==e||null==(t=e.github_owner)?void 0:t.name;return!!(r&&r!==n)}},84923:(e,t,r)=>{"use strict";r.d(t,{B:()=>g});var n=r(99289),a=r(51252),s=r(6919),l=r(22291),o=r(11405),i=r(98213),c=r(43328),d=r(81688),u=r(49944),m=r(6072),p=r(34936),x=r(33256),h=r(273),j=r(9562);let g=e=>{var t,r,g,f,b;let{project:v,isOpen:w,onClose:y,hasActiveLock:_=!1}=e,[N,P]=(0,o.useState)(null),C=(0,l.useRouter)(),k=(0,a.jE)(),R=(0,c.useCurrentWorkspaceStore)(e=>{var t;return null==(t=e.currentWorkspace)?void 0:t.id}),D=(0,s.n)({mutationFn:async()=>(0,x.Pg)().delete("/projects/".concat(v.id)),onSuccess:e=>{if(k.invalidateQueries({queryKey:h.gO.all}),k.invalidateQueries({queryKey:h.Or.detail(R||"")}),e.deleting_repo)i.oR.success("Project deleted",{description:"Your project has been deleted."});else{var t;C.push("/?deleted=true&projectName=".concat(v.github_repo_name,"&githubOwner=").concat(null==(t=v.github_owner)?void 0:t.name))}y()},onError:e=>{var t;let r=(null==e||null==(t=e.data)?void 0:t.detail)||"Something went wrong";(0,p.Ni)(e),P(r)}}),E=async()=>{P(null),await D.mutateAsync()};return(0,n.jsx)(m.lG,{open:w,onOpenChange:y,children:(0,n.jsxs)(m.Cf,{size:"sm",children:[(0,n.jsxs)(m.c7,{children:[(0,n.jsxs)(m.L3,{children:["Delete ",v.name,"?"]}),(0,n.jsxs)(m.rr,{children:["This action cannot be undone."," ",(0,n.jsx)("span",{className:"text-destructive-primary",children:"This will permanently delete your project."})," Including:",(0,n.jsxs)("ul",{className:"my-2 list-disc pl-5 text-left",children:[(0,n.jsx)("li",{children:"Any deployments made with Lovable"}),(0,n.jsx)("li",{children:"All preview links"}),(null==v||null==(t=v.github_owner)?void 0:t.name)&&v.github_owner.name===d.CS&&(0,n.jsx)("li",{children:"All generated code"})]}),(null==v||null==(r=v.github_owner)?void 0:r.name)&&v.github_owner.name!==d.CS&&(0,n.jsxs)("p",{className:"mt-2",children:["Note: The Github repository"," ",(0,n.jsxs)("a",{href:null!=(b=(0,d.rZ)(v.github_repo_name,null==v||null==(g=v.github_owner)?void 0:g.name))?b:"#",target:"_blank",rel:"noreferrer",className:"font-medium text-foreground hover:underline",children:[null==v||null==(f=v.github_owner)?void 0:f.name,"/",null==v?void 0:v.github_repo_name]})," ","will not be deleted."]})]})]}),(0,n.jsxs)(m.Es,{children:[(0,n.jsx)(u.$,{variant:"outline",size:"sm",onClick:()=>{y(),P(null)},children:"Cancel"}),(0,n.jsx)(j.Q,{showTooltip:_,tooltipContent:"Cannot delete project while there is an active operation in progress (e.g. chat or revert). Please wait for the operation to complete.",children:(0,n.jsx)(u.$,{variant:"destructive",size:"sm",onClick:E,loading:D.isPending,disabled:_,children:D.isPending?"Deleting...":"Delete Project"})})]}),N&&(0,n.jsx)("p",{className:"mt-2 text-sm text-destructive-primary",children:N})]})})}}}]);